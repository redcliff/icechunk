<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Open-source, cloud-native transactional tensor storage engine"><meta name=author content="Earthmover PBC"><link href=https://icechunk.io/icechunk-python/reference/ rel=canonical><link href=../virtual/ rel=prev><link href=../../icechunk-rust/ rel=next><link rel=icon href=../../assets/favicon/favicon-96x96.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.40"><title>API Reference - Icechunk</title><link rel=stylesheet href=../../assets/stylesheets/main.8c3ca2c6.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/_mkdocstrings.css><link rel=stylesheet href=../../stylesheets/theme.css><link rel=stylesheet href=../../stylesheets/global.css><link rel=stylesheet href=../../stylesheets/notebooks.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-TNHH1RF342"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-TNHH1RF342",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-TNHH1RF342",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script><meta property=og:type content=website><meta property=og:title content="API Reference - Icechunk"><meta property=og:description content="Open-source, cloud-native transactional tensor storage engine"><meta property=og:image content=https://icechunk.io/assets/images/social/icechunk-python/reference.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta content=https://icechunk.io/icechunk-python/reference/ property=og:url><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="API Reference - Icechunk"><meta name=twitter:description content="Open-source, cloud-native transactional tensor storage engine"><meta name=twitter:image content=https://icechunk.io/assets/images/social/icechunk-python/reference.png></head> <body dir=ltr data-md-color-scheme=light data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#icechunk class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=Icechunk class="md-header__button md-logo" aria-label=Icechunk data-md-component=logo> <img src=../../assets/logo-wire.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Icechunk </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> API Reference </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=light data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/earth-mover/icechunk title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> earth-mover/icechunk </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../overview/ class=md-tabs__link> Overview </a> </li> <li class=md-tabs__item> <a href=../../faq/ class=md-tabs__link> FAQ </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../quickstart/ class=md-tabs__link> Icechunk Python </a> </li> <li class=md-tabs__item> <a href=../../icechunk-rust/ class=md-tabs__link> Icechunk Rust </a> </li> <li class=md-tabs__item> <a href=../../contributing/ class=md-tabs__link> Contributing </a> </li> <li class=md-tabs__item> <a href=../../sample-datasets/ class=md-tabs__link> Sample Datasets </a> </li> <li class=md-tabs__item> <a href=../../spec/ class=md-tabs__link> Spec </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!--
NOTE:
    We are overriding this partial to remove default behavior of hiding sidebar menu when using tabs.
    (remove md-nav--lifted class from <nav>)
    @see https://github.com/squidfunk/mkdocs-material/blob/master/src/templates/partials/nav.html#L28
--> <!-- Determine classes --> <!-- Navigation --> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <!-- Site title --> <label class=md-nav__title for=__drawer> <a href=../.. title=Icechunk class="md-nav__button md-logo" aria-label=Icechunk data-md-component=logo> <img src=../../assets/logo-wire.svg alt=logo> </a> Icechunk </label> <!-- Repository information --> <div class=md-nav__source> <a href=https://github.com/earth-mover/icechunk title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> earth-mover/icechunk </div> </a> </div> <!-- Navigation list --> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Icechunk Python </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Icechunk Python </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../quickstart/ class=md-nav__link> <span class=md-ellipsis> Quickstart </span> </a> </li> <li class=md-nav__item> <a href=../configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../xarray/ class=md-nav__link> <span class=md-ellipsis> Xarray </span> </a> </li> <li class=md-nav__item> <a href=../dask/ class=md-nav__link> <span class=md-ellipsis> Dask </span> </a> </li> <li class=md-nav__item> <a href=../version-control/ class=md-nav__link> <span class=md-ellipsis> Version control </span> </a> </li> <li class=md-nav__item> <a href=../virtual/ class=md-nav__link> <span class=md-ellipsis> Virtual Datasets </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> API Reference </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> API Reference </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#icechunk class=md-nav__link> <span class=md-ellipsis> icechunk </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.BasicConflictSolver class=md-nav__link> <span class=md-ellipsis> BasicConflictSolver </span> </a> <nav class=md-nav aria-label=BasicConflictSolver> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.BasicConflictSolver.__init__ class=md-nav__link> <span class=md-ellipsis> __init__ </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.CachingConfig class=md-nav__link> <span class=md-ellipsis> CachingConfig </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.CompressionAlgorithm class=md-nav__link> <span class=md-ellipsis> CompressionAlgorithm </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.CompressionConfig class=md-nav__link> <span class=md-ellipsis> CompressionConfig </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Conflict class=md-nav__link> <span class=md-ellipsis> Conflict </span> </a> <nav class=md-nav aria-label=Conflict> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.Conflict.conflict_type class=md-nav__link> <span class=md-ellipsis> conflict_type </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Conflict.conflicted_chunks class=md-nav__link> <span class=md-ellipsis> conflicted_chunks </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Conflict.path class=md-nav__link> <span class=md-ellipsis> path </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.ConflictDetector class=md-nav__link> <span class=md-ellipsis> ConflictDetector </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.ConflictError class=md-nav__link> <span class=md-ellipsis> ConflictError </span> </a> <nav class=md-nav aria-label=ConflictError> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.ConflictError.actual_parent class=md-nav__link> <span class=md-ellipsis> actual_parent </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.ConflictError.expected_parent class=md-nav__link> <span class=md-ellipsis> expected_parent </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.ConflictErrorData class=md-nav__link> <span class=md-ellipsis> ConflictErrorData </span> </a> <nav class=md-nav aria-label=ConflictErrorData> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.ConflictErrorData.actual_parent class=md-nav__link> <span class=md-ellipsis> actual_parent </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.ConflictErrorData.expected_parent class=md-nav__link> <span class=md-ellipsis> expected_parent </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.ConflictSolver class=md-nav__link> <span class=md-ellipsis> ConflictSolver </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.ConflictType class=md-nav__link> <span class=md-ellipsis> ConflictType </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkError class=md-nav__link> <span class=md-ellipsis> IcechunkError </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore class=md-nav__link> <span class=md-ellipsis> IcechunkStore </span> </a> <nav class=md-nav aria-label=IcechunkStore> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.supports_listing class=md-nav__link> <span class=md-ellipsis> supports_listing </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.supports_partial_writes class=md-nav__link> <span class=md-ellipsis> supports_partial_writes </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.supports_writes class=md-nav__link> <span class=md-ellipsis> supports_writes </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.__init__ class=md-nav__link> <span class=md-ellipsis> __init__ </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.clear class=md-nav__link> <span class=md-ellipsis> clear </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.delete class=md-nav__link> <span class=md-ellipsis> delete </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.delete_dir class=md-nav__link> <span class=md-ellipsis> delete_dir </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.exists class=md-nav__link> <span class=md-ellipsis> exists </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.get class=md-nav__link> <span class=md-ellipsis> get </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.get_partial_values class=md-nav__link> <span class=md-ellipsis> get_partial_values </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.is_empty class=md-nav__link> <span class=md-ellipsis> is_empty </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.list class=md-nav__link> <span class=md-ellipsis> list </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.list_dir class=md-nav__link> <span class=md-ellipsis> list_dir </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.list_prefix class=md-nav__link> <span class=md-ellipsis> list_prefix </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.set class=md-nav__link> <span class=md-ellipsis> set </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.set_if_not_exists class=md-nav__link> <span class=md-ellipsis> set_if_not_exists </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.set_partial_values class=md-nav__link> <span class=md-ellipsis> set_partial_values </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.set_virtual_ref class=md-nav__link> <span class=md-ellipsis> set_virtual_ref </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.sync_clear class=md-nav__link> <span class=md-ellipsis> sync_clear </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.RebaseFailedData class=md-nav__link> <span class=md-ellipsis> RebaseFailedData </span> </a> <nav class=md-nav aria-label=RebaseFailedData> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.RebaseFailedData.conflicts class=md-nav__link> <span class=md-ellipsis> conflicts </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.RebaseFailedData.snapshot class=md-nav__link> <span class=md-ellipsis> snapshot </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.RebaseFailedError class=md-nav__link> <span class=md-ellipsis> RebaseFailedError </span> </a> <nav class=md-nav aria-label=RebaseFailedError> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.RebaseFailedError.conflicts class=md-nav__link> <span class=md-ellipsis> conflicts </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.RebaseFailedError.snapshot_id class=md-nav__link> <span class=md-ellipsis> snapshot_id </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.Repository class=md-nav__link> <span class=md-ellipsis> Repository </span> </a> <nav class=md-nav aria-label=Repository> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.Repository.ancestry class=md-nav__link> <span class=md-ellipsis> ancestry </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.create class=md-nav__link> <span class=md-ellipsis> create </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.create_branch class=md-nav__link> <span class=md-ellipsis> create_branch </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.create_tag class=md-nav__link> <span class=md-ellipsis> create_tag </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.delete_branch class=md-nav__link> <span class=md-ellipsis> delete_branch </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.exists class=md-nav__link> <span class=md-ellipsis> exists </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.fetch_config class=md-nav__link> <span class=md-ellipsis> fetch_config </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.list_branches class=md-nav__link> <span class=md-ellipsis> list_branches </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.list_tags class=md-nav__link> <span class=md-ellipsis> list_tags </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.lookup_branch class=md-nav__link> <span class=md-ellipsis> lookup_branch </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.lookup_tag class=md-nav__link> <span class=md-ellipsis> lookup_tag </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.open class=md-nav__link> <span class=md-ellipsis> open </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.open_or_create class=md-nav__link> <span class=md-ellipsis> open_or_create </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.readonly_session class=md-nav__link> <span class=md-ellipsis> readonly_session </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.reset_branch class=md-nav__link> <span class=md-ellipsis> reset_branch </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.save_config class=md-nav__link> <span class=md-ellipsis> save_config </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.writable_session class=md-nav__link> <span class=md-ellipsis> writable_session </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.RepositoryConfig class=md-nav__link> <span class=md-ellipsis> RepositoryConfig </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session class=md-nav__link> <span class=md-ellipsis> Session </span> </a> <nav class=md-nav aria-label=Session> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.Session.branch class=md-nav__link> <span class=md-ellipsis> branch </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.has_uncommitted_changes class=md-nav__link> <span class=md-ellipsis> has_uncommitted_changes </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.read_only class=md-nav__link> <span class=md-ellipsis> read_only </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.snapshot_id class=md-nav__link> <span class=md-ellipsis> snapshot_id </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.store class=md-nav__link> <span class=md-ellipsis> store </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.all_virtual_chunk_locations class=md-nav__link> <span class=md-ellipsis> all_virtual_chunk_locations </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.commit class=md-nav__link> <span class=md-ellipsis> commit </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.discard_changes class=md-nav__link> <span class=md-ellipsis> discard_changes </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.merge class=md-nav__link> <span class=md-ellipsis> merge </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.rebase class=md-nav__link> <span class=md-ellipsis> rebase </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.SnapshotMetadata class=md-nav__link> <span class=md-ellipsis> SnapshotMetadata </span> </a> <nav class=md-nav aria-label=SnapshotMetadata> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.SnapshotMetadata.id class=md-nav__link> <span class=md-ellipsis> id </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.SnapshotMetadata.message class=md-nav__link> <span class=md-ellipsis> message </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.SnapshotMetadata.written_at class=md-nav__link> <span class=md-ellipsis> written_at </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.Storage class=md-nav__link> <span class=md-ellipsis> Storage </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.StorageConcurrencySettings class=md-nav__link> <span class=md-ellipsis> StorageConcurrencySettings </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.StorageSettings class=md-nav__link> <span class=md-ellipsis> StorageSettings </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.VersionSelection class=md-nav__link> <span class=md-ellipsis> VersionSelection </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.azure_credentials class=md-nav__link> <span class=md-ellipsis> azure_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.azure_from_env_credentials class=md-nav__link> <span class=md-ellipsis> azure_from_env_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.azure_static_credentials class=md-nav__link> <span class=md-ellipsis> azure_static_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.azure_storage class=md-nav__link> <span class=md-ellipsis> azure_storage </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.containers_credentials class=md-nav__link> <span class=md-ellipsis> containers_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.gcs_credentials class=md-nav__link> <span class=md-ellipsis> gcs_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.gcs_from_env_credentials class=md-nav__link> <span class=md-ellipsis> gcs_from_env_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.gcs_static_credentials class=md-nav__link> <span class=md-ellipsis> gcs_static_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.gcs_storage class=md-nav__link> <span class=md-ellipsis> gcs_storage </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.in_memory_storage class=md-nav__link> <span class=md-ellipsis> in_memory_storage </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.local_filesystem_storage class=md-nav__link> <span class=md-ellipsis> local_filesystem_storage </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.s3_anonymous_credentials class=md-nav__link> <span class=md-ellipsis> s3_anonymous_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.s3_credentials class=md-nav__link> <span class=md-ellipsis> s3_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.s3_from_env_credentials class=md-nav__link> <span class=md-ellipsis> s3_from_env_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.s3_refreshable_credentials class=md-nav__link> <span class=md-ellipsis> s3_refreshable_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.s3_static_credentials class=md-nav__link> <span class=md-ellipsis> s3_static_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.s3_storage class=md-nav__link> <span class=md-ellipsis> s3_storage </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.s3_store class=md-nav__link> <span class=md-ellipsis> s3_store </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.xarray class=md-nav__link> <span class=md-ellipsis> xarray </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.xarray.XarrayDatasetWriter class=md-nav__link> <span class=md-ellipsis> XarrayDatasetWriter </span> </a> <nav class=md-nav aria-label=XarrayDatasetWriter> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.xarray.XarrayDatasetWriter.write_eager class=md-nav__link> <span class=md-ellipsis> write_eager </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.xarray.XarrayDatasetWriter.write_lazy class=md-nav__link> <span class=md-ellipsis> write_lazy </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.xarray.XarrayDatasetWriter.write_metadata class=md-nav__link> <span class=md-ellipsis> write_metadata </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.xarray.to_icechunk class=md-nav__link> <span class=md-ellipsis> to_icechunk </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../icechunk-rust/ class=md-nav__link> <span class=md-ellipsis> Icechunk Rust </span> </a> </li> <li class=md-nav__item> <a href=../../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../../sample-datasets/ class=md-nav__link> <span class=md-ellipsis> Sample Datasets </span> </a> </li> <li class=md-nav__item> <a href=../../spec/ class=md-nav__link> <span class=md-ellipsis> Spec </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#icechunk class=md-nav__link> <span class=md-ellipsis> icechunk </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.BasicConflictSolver class=md-nav__link> <span class=md-ellipsis> BasicConflictSolver </span> </a> <nav class=md-nav aria-label=BasicConflictSolver> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.BasicConflictSolver.__init__ class=md-nav__link> <span class=md-ellipsis> __init__ </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.CachingConfig class=md-nav__link> <span class=md-ellipsis> CachingConfig </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.CompressionAlgorithm class=md-nav__link> <span class=md-ellipsis> CompressionAlgorithm </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.CompressionConfig class=md-nav__link> <span class=md-ellipsis> CompressionConfig </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Conflict class=md-nav__link> <span class=md-ellipsis> Conflict </span> </a> <nav class=md-nav aria-label=Conflict> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.Conflict.conflict_type class=md-nav__link> <span class=md-ellipsis> conflict_type </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Conflict.conflicted_chunks class=md-nav__link> <span class=md-ellipsis> conflicted_chunks </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Conflict.path class=md-nav__link> <span class=md-ellipsis> path </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.ConflictDetector class=md-nav__link> <span class=md-ellipsis> ConflictDetector </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.ConflictError class=md-nav__link> <span class=md-ellipsis> ConflictError </span> </a> <nav class=md-nav aria-label=ConflictError> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.ConflictError.actual_parent class=md-nav__link> <span class=md-ellipsis> actual_parent </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.ConflictError.expected_parent class=md-nav__link> <span class=md-ellipsis> expected_parent </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.ConflictErrorData class=md-nav__link> <span class=md-ellipsis> ConflictErrorData </span> </a> <nav class=md-nav aria-label=ConflictErrorData> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.ConflictErrorData.actual_parent class=md-nav__link> <span class=md-ellipsis> actual_parent </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.ConflictErrorData.expected_parent class=md-nav__link> <span class=md-ellipsis> expected_parent </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.ConflictSolver class=md-nav__link> <span class=md-ellipsis> ConflictSolver </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.ConflictType class=md-nav__link> <span class=md-ellipsis> ConflictType </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkError class=md-nav__link> <span class=md-ellipsis> IcechunkError </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore class=md-nav__link> <span class=md-ellipsis> IcechunkStore </span> </a> <nav class=md-nav aria-label=IcechunkStore> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.supports_listing class=md-nav__link> <span class=md-ellipsis> supports_listing </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.supports_partial_writes class=md-nav__link> <span class=md-ellipsis> supports_partial_writes </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.supports_writes class=md-nav__link> <span class=md-ellipsis> supports_writes </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.__init__ class=md-nav__link> <span class=md-ellipsis> __init__ </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.clear class=md-nav__link> <span class=md-ellipsis> clear </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.delete class=md-nav__link> <span class=md-ellipsis> delete </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.delete_dir class=md-nav__link> <span class=md-ellipsis> delete_dir </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.exists class=md-nav__link> <span class=md-ellipsis> exists </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.get class=md-nav__link> <span class=md-ellipsis> get </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.get_partial_values class=md-nav__link> <span class=md-ellipsis> get_partial_values </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.is_empty class=md-nav__link> <span class=md-ellipsis> is_empty </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.list class=md-nav__link> <span class=md-ellipsis> list </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.list_dir class=md-nav__link> <span class=md-ellipsis> list_dir </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.list_prefix class=md-nav__link> <span class=md-ellipsis> list_prefix </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.set class=md-nav__link> <span class=md-ellipsis> set </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.set_if_not_exists class=md-nav__link> <span class=md-ellipsis> set_if_not_exists </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.set_partial_values class=md-nav__link> <span class=md-ellipsis> set_partial_values </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.set_virtual_ref class=md-nav__link> <span class=md-ellipsis> set_virtual_ref </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.IcechunkStore.sync_clear class=md-nav__link> <span class=md-ellipsis> sync_clear </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.RebaseFailedData class=md-nav__link> <span class=md-ellipsis> RebaseFailedData </span> </a> <nav class=md-nav aria-label=RebaseFailedData> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.RebaseFailedData.conflicts class=md-nav__link> <span class=md-ellipsis> conflicts </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.RebaseFailedData.snapshot class=md-nav__link> <span class=md-ellipsis> snapshot </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.RebaseFailedError class=md-nav__link> <span class=md-ellipsis> RebaseFailedError </span> </a> <nav class=md-nav aria-label=RebaseFailedError> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.RebaseFailedError.conflicts class=md-nav__link> <span class=md-ellipsis> conflicts </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.RebaseFailedError.snapshot_id class=md-nav__link> <span class=md-ellipsis> snapshot_id </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.Repository class=md-nav__link> <span class=md-ellipsis> Repository </span> </a> <nav class=md-nav aria-label=Repository> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.Repository.ancestry class=md-nav__link> <span class=md-ellipsis> ancestry </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.create class=md-nav__link> <span class=md-ellipsis> create </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.create_branch class=md-nav__link> <span class=md-ellipsis> create_branch </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.create_tag class=md-nav__link> <span class=md-ellipsis> create_tag </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.delete_branch class=md-nav__link> <span class=md-ellipsis> delete_branch </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.exists class=md-nav__link> <span class=md-ellipsis> exists </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.fetch_config class=md-nav__link> <span class=md-ellipsis> fetch_config </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.list_branches class=md-nav__link> <span class=md-ellipsis> list_branches </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.list_tags class=md-nav__link> <span class=md-ellipsis> list_tags </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.lookup_branch class=md-nav__link> <span class=md-ellipsis> lookup_branch </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.lookup_tag class=md-nav__link> <span class=md-ellipsis> lookup_tag </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.open class=md-nav__link> <span class=md-ellipsis> open </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.open_or_create class=md-nav__link> <span class=md-ellipsis> open_or_create </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.readonly_session class=md-nav__link> <span class=md-ellipsis> readonly_session </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.reset_branch class=md-nav__link> <span class=md-ellipsis> reset_branch </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.save_config class=md-nav__link> <span class=md-ellipsis> save_config </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Repository.writable_session class=md-nav__link> <span class=md-ellipsis> writable_session </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.RepositoryConfig class=md-nav__link> <span class=md-ellipsis> RepositoryConfig </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session class=md-nav__link> <span class=md-ellipsis> Session </span> </a> <nav class=md-nav aria-label=Session> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.Session.branch class=md-nav__link> <span class=md-ellipsis> branch </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.has_uncommitted_changes class=md-nav__link> <span class=md-ellipsis> has_uncommitted_changes </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.read_only class=md-nav__link> <span class=md-ellipsis> read_only </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.snapshot_id class=md-nav__link> <span class=md-ellipsis> snapshot_id </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.store class=md-nav__link> <span class=md-ellipsis> store </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.all_virtual_chunk_locations class=md-nav__link> <span class=md-ellipsis> all_virtual_chunk_locations </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.commit class=md-nav__link> <span class=md-ellipsis> commit </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.discard_changes class=md-nav__link> <span class=md-ellipsis> discard_changes </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.merge class=md-nav__link> <span class=md-ellipsis> merge </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.Session.rebase class=md-nav__link> <span class=md-ellipsis> rebase </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.SnapshotMetadata class=md-nav__link> <span class=md-ellipsis> SnapshotMetadata </span> </a> <nav class=md-nav aria-label=SnapshotMetadata> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.SnapshotMetadata.id class=md-nav__link> <span class=md-ellipsis> id </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.SnapshotMetadata.message class=md-nav__link> <span class=md-ellipsis> message </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.SnapshotMetadata.written_at class=md-nav__link> <span class=md-ellipsis> written_at </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.Storage class=md-nav__link> <span class=md-ellipsis> Storage </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.StorageConcurrencySettings class=md-nav__link> <span class=md-ellipsis> StorageConcurrencySettings </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.StorageSettings class=md-nav__link> <span class=md-ellipsis> StorageSettings </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.VersionSelection class=md-nav__link> <span class=md-ellipsis> VersionSelection </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.azure_credentials class=md-nav__link> <span class=md-ellipsis> azure_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.azure_from_env_credentials class=md-nav__link> <span class=md-ellipsis> azure_from_env_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.azure_static_credentials class=md-nav__link> <span class=md-ellipsis> azure_static_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.azure_storage class=md-nav__link> <span class=md-ellipsis> azure_storage </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.containers_credentials class=md-nav__link> <span class=md-ellipsis> containers_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.gcs_credentials class=md-nav__link> <span class=md-ellipsis> gcs_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.gcs_from_env_credentials class=md-nav__link> <span class=md-ellipsis> gcs_from_env_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.gcs_static_credentials class=md-nav__link> <span class=md-ellipsis> gcs_static_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.gcs_storage class=md-nav__link> <span class=md-ellipsis> gcs_storage </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.in_memory_storage class=md-nav__link> <span class=md-ellipsis> in_memory_storage </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.local_filesystem_storage class=md-nav__link> <span class=md-ellipsis> local_filesystem_storage </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.s3_anonymous_credentials class=md-nav__link> <span class=md-ellipsis> s3_anonymous_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.s3_credentials class=md-nav__link> <span class=md-ellipsis> s3_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.s3_from_env_credentials class=md-nav__link> <span class=md-ellipsis> s3_from_env_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.s3_refreshable_credentials class=md-nav__link> <span class=md-ellipsis> s3_refreshable_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.s3_static_credentials class=md-nav__link> <span class=md-ellipsis> s3_static_credentials </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.s3_storage class=md-nav__link> <span class=md-ellipsis> s3_storage </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.s3_store class=md-nav__link> <span class=md-ellipsis> s3_store </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.xarray class=md-nav__link> <span class=md-ellipsis> xarray </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.xarray.XarrayDatasetWriter class=md-nav__link> <span class=md-ellipsis> XarrayDatasetWriter </span> </a> <nav class=md-nav aria-label=XarrayDatasetWriter> <ul class=md-nav__list> <li class=md-nav__item> <a href=#icechunk.xarray.XarrayDatasetWriter.write_eager class=md-nav__link> <span class=md-ellipsis> write_eager </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.xarray.XarrayDatasetWriter.write_lazy class=md-nav__link> <span class=md-ellipsis> write_lazy </span> </a> </li> <li class=md-nav__item> <a href=#icechunk.xarray.XarrayDatasetWriter.write_metadata class=md-nav__link> <span class=md-ellipsis> write_metadata </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#icechunk.xarray.to_icechunk class=md-nav__link> <span class=md-ellipsis> to_icechunk </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>API Reference</h1> <p><a href=/ >Home</a> / <a href=/icechunk-python/ >icechunk-python</a> / reference </p> <div class="doc doc-object doc-module"> <a id=icechunk></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=icechunk.BasicConflictSolver class="doc doc-heading"> <code>BasicConflictSolver</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code>ConflictSolver</code></p> <p>A basic conflict solver that allows for simple configuration of resolution behavior</p> <p>This conflict solver allows for simple configuration of resolution behavior for conflicts that may occur during a rebase operation. It will attempt to resolve a limited set of conflicts based on the configuration options provided.</p> <ul> <li>When a user attribute conflict is encountered, the behavior is determined by the <code>on_user_attributes_conflict</code> option</li> <li>When a chunk conflict is encountered, the behavior is determined by the <code>on_chunk_conflict</code> option</li> <li>When an array is deleted that has been updated, <code>fail_on_delete_of_updated_array</code> will determine whether to fail the rebase operation</li> <li>When a group is deleted that has been updated, <code>fail_on_delete_of_updated_group</code> will determine whether to fail the rebase operation</li> </ul> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-467>467</a></span>
<span class=normal><a href=#__codelineno-0-468>468</a></span>
<span class=normal><a href=#__codelineno-0-469>469</a></span>
<span class=normal><a href=#__codelineno-0-470>470</a></span>
<span class=normal><a href=#__codelineno-0-471>471</a></span>
<span class=normal><a href=#__codelineno-0-472>472</a></span>
<span class=normal><a href=#__codelineno-0-473>473</a></span>
<span class=normal><a href=#__codelineno-0-474>474</a></span>
<span class=normal><a href=#__codelineno-0-475>475</a></span>
<span class=normal><a href=#__codelineno-0-476>476</a></span>
<span class=normal><a href=#__codelineno-0-477>477</a></span>
<span class=normal><a href=#__codelineno-0-478>478</a></span>
<span class=normal><a href=#__codelineno-0-479>479</a></span>
<span class=normal><a href=#__codelineno-0-480>480</a></span>
<span class=normal><a href=#__codelineno-0-481>481</a></span>
<span class=normal><a href=#__codelineno-0-482>482</a></span>
<span class=normal><a href=#__codelineno-0-483>483</a></span>
<span class=normal><a href=#__codelineno-0-484>484</a></span>
<span class=normal><a href=#__codelineno-0-485>485</a></span>
<span class=normal><a href=#__codelineno-0-486>486</a></span>
<span class=normal><a href=#__codelineno-0-487>487</a></span>
<span class=normal><a href=#__codelineno-0-488>488</a></span>
<span class=normal><a href=#__codelineno-0-489>489</a></span>
<span class=normal><a href=#__codelineno-0-490>490</a></span>
<span class=normal><a href=#__codelineno-0-491>491</a></span>
<span class=normal><a href=#__codelineno-0-492>492</a></span>
<span class=normal><a href=#__codelineno-0-493>493</a></span>
<span class=normal><a href=#__codelineno-0-494>494</a></span>
<span class=normal><a href=#__codelineno-0-495>495</a></span>
<span class=normal><a href=#__codelineno-0-496>496</a></span>
<span class=normal><a href=#__codelineno-0-497>497</a></span>
<span class=normal><a href=#__codelineno-0-498>498</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-467><a id=__codelineno-0-467 name=__codelineno-0-467></a><span class=k>class</span> <span class=nc>BasicConflictSolver</span><span class=p>(</span><span class=n>ConflictSolver</span><span class=p>):</span>
</span><span id=__span-0-468><a id=__codelineno-0-468 name=__codelineno-0-468></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;A basic conflict solver that allows for simple configuration of resolution behavior</span>
</span><span id=__span-0-469><a id=__codelineno-0-469 name=__codelineno-0-469></a>
</span><span id=__span-0-470><a id=__codelineno-0-470 name=__codelineno-0-470></a><span class=sd>    This conflict solver allows for simple configuration of resolution behavior for conflicts that may occur during a rebase operation.</span>
</span><span id=__span-0-471><a id=__codelineno-0-471 name=__codelineno-0-471></a><span class=sd>    It will attempt to resolve a limited set of conflicts based on the configuration options provided.</span>
</span><span id=__span-0-472><a id=__codelineno-0-472 name=__codelineno-0-472></a>
</span><span id=__span-0-473><a id=__codelineno-0-473 name=__codelineno-0-473></a><span class=sd>    - When a user attribute conflict is encountered, the behavior is determined by the `on_user_attributes_conflict` option</span>
</span><span id=__span-0-474><a id=__codelineno-0-474 name=__codelineno-0-474></a><span class=sd>    - When a chunk conflict is encountered, the behavior is determined by the `on_chunk_conflict` option</span>
</span><span id=__span-0-475><a id=__codelineno-0-475 name=__codelineno-0-475></a><span class=sd>    - When an array is deleted that has been updated, `fail_on_delete_of_updated_array` will determine whether to fail the rebase operation</span>
</span><span id=__span-0-476><a id=__codelineno-0-476 name=__codelineno-0-476></a><span class=sd>    - When a group is deleted that has been updated, `fail_on_delete_of_updated_group` will determine whether to fail the rebase operation</span>
</span><span id=__span-0-477><a id=__codelineno-0-477 name=__codelineno-0-477></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-478><a id=__codelineno-0-478 name=__codelineno-0-478></a>
</span><span id=__span-0-479><a id=__codelineno-0-479 name=__codelineno-0-479></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span>
</span><span id=__span-0-480><a id=__codelineno-0-480 name=__codelineno-0-480></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-481><a id=__codelineno-0-481 name=__codelineno-0-481></a>        <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-482><a id=__codelineno-0-482 name=__codelineno-0-482></a>        <span class=n>on_user_attributes_conflict</span><span class=p>:</span> <span class=n>VersionSelection</span> <span class=o>=</span> <span class=n>VersionSelection</span><span class=o>.</span><span class=n>UseOurs</span><span class=p>,</span>
</span><span id=__span-0-483><a id=__codelineno-0-483 name=__codelineno-0-483></a>        <span class=n>on_chunk_conflict</span><span class=p>:</span> <span class=n>VersionSelection</span> <span class=o>=</span> <span class=n>VersionSelection</span><span class=o>.</span><span class=n>UseOurs</span><span class=p>,</span>
</span><span id=__span-0-484><a id=__codelineno-0-484 name=__codelineno-0-484></a>        <span class=n>fail_on_delete_of_updated_array</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
</span><span id=__span-0-485><a id=__codelineno-0-485 name=__codelineno-0-485></a>        <span class=n>fail_on_delete_of_updated_group</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
</span><span id=__span-0-486><a id=__codelineno-0-486 name=__codelineno-0-486></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-487><a id=__codelineno-0-487 name=__codelineno-0-487></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Create a BasicConflictSolver object with the given configuration options</span>
</span><span id=__span-0-488><a id=__codelineno-0-488 name=__codelineno-0-488></a><span class=sd>        Parameters:</span>
</span><span id=__span-0-489><a id=__codelineno-0-489 name=__codelineno-0-489></a><span class=sd>        on_user_attributes_conflict: VersionSelection</span>
</span><span id=__span-0-490><a id=__codelineno-0-490 name=__codelineno-0-490></a><span class=sd>            The behavior to use when a user attribute conflict is encountered, by default VersionSelection.use_ours()</span>
</span><span id=__span-0-491><a id=__codelineno-0-491 name=__codelineno-0-491></a><span class=sd>        on_chunk_conflict: VersionSelection</span>
</span><span id=__span-0-492><a id=__codelineno-0-492 name=__codelineno-0-492></a><span class=sd>            The behavior to use when a chunk conflict is encountered, by default VersionSelection.use_theirs()</span>
</span><span id=__span-0-493><a id=__codelineno-0-493 name=__codelineno-0-493></a><span class=sd>        fail_on_delete_of_updated_array: bool</span>
</span><span id=__span-0-494><a id=__codelineno-0-494 name=__codelineno-0-494></a><span class=sd>            Whether to fail when a chunk is deleted that has been updated, by default False</span>
</span><span id=__span-0-495><a id=__codelineno-0-495 name=__codelineno-0-495></a><span class=sd>        fail_on_delete_of_updated_group: bool</span>
</span><span id=__span-0-496><a id=__codelineno-0-496 name=__codelineno-0-496></a><span class=sd>            Whether to fail when a group is deleted that has been updated, by default False</span>
</span><span id=__span-0-497><a id=__codelineno-0-497 name=__codelineno-0-497></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-498><a id=__codelineno-0-498 name=__codelineno-0-498></a>        <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=icechunk.BasicConflictSolver.__init__ class="doc doc-heading"> <code class="highlight language-python"><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=p>,</span> <span class=n>on_user_attributes_conflict</span><span class=o>=</span><span class=n>VersionSelection</span><span class=o>.</span><span class=n>UseOurs</span><span class=p>,</span> <span class=n>on_chunk_conflict</span><span class=o>=</span><span class=n>VersionSelection</span><span class=o>.</span><span class=n>UseOurs</span><span class=p>,</span> <span class=n>fail_on_delete_of_updated_array</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>fail_on_delete_of_updated_group</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Create a BasicConflictSolver object with the given configuration options Parameters: on_user_attributes_conflict: VersionSelection The behavior to use when a user attribute conflict is encountered, by default VersionSelection.use_ours() on_chunk_conflict: VersionSelection The behavior to use when a chunk conflict is encountered, by default VersionSelection.use_theirs() fail_on_delete_of_updated_array: bool Whether to fail when a chunk is deleted that has been updated, by default False fail_on_delete_of_updated_group: bool Whether to fail when a group is deleted that has been updated, by default False</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-479>479</a></span>
<span class=normal><a href=#__codelineno-0-480>480</a></span>
<span class=normal><a href=#__codelineno-0-481>481</a></span>
<span class=normal><a href=#__codelineno-0-482>482</a></span>
<span class=normal><a href=#__codelineno-0-483>483</a></span>
<span class=normal><a href=#__codelineno-0-484>484</a></span>
<span class=normal><a href=#__codelineno-0-485>485</a></span>
<span class=normal><a href=#__codelineno-0-486>486</a></span>
<span class=normal><a href=#__codelineno-0-487>487</a></span>
<span class=normal><a href=#__codelineno-0-488>488</a></span>
<span class=normal><a href=#__codelineno-0-489>489</a></span>
<span class=normal><a href=#__codelineno-0-490>490</a></span>
<span class=normal><a href=#__codelineno-0-491>491</a></span>
<span class=normal><a href=#__codelineno-0-492>492</a></span>
<span class=normal><a href=#__codelineno-0-493>493</a></span>
<span class=normal><a href=#__codelineno-0-494>494</a></span>
<span class=normal><a href=#__codelineno-0-495>495</a></span>
<span class=normal><a href=#__codelineno-0-496>496</a></span>
<span class=normal><a href=#__codelineno-0-497>497</a></span>
<span class=normal><a href=#__codelineno-0-498>498</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-479><a id=__codelineno-0-479 name=__codelineno-0-479></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span>
</span><span id=__span-0-480><a id=__codelineno-0-480 name=__codelineno-0-480></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-481><a id=__codelineno-0-481 name=__codelineno-0-481></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-482><a id=__codelineno-0-482 name=__codelineno-0-482></a>    <span class=n>on_user_attributes_conflict</span><span class=p>:</span> <span class=n>VersionSelection</span> <span class=o>=</span> <span class=n>VersionSelection</span><span class=o>.</span><span class=n>UseOurs</span><span class=p>,</span>
</span><span id=__span-0-483><a id=__codelineno-0-483 name=__codelineno-0-483></a>    <span class=n>on_chunk_conflict</span><span class=p>:</span> <span class=n>VersionSelection</span> <span class=o>=</span> <span class=n>VersionSelection</span><span class=o>.</span><span class=n>UseOurs</span><span class=p>,</span>
</span><span id=__span-0-484><a id=__codelineno-0-484 name=__codelineno-0-484></a>    <span class=n>fail_on_delete_of_updated_array</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
</span><span id=__span-0-485><a id=__codelineno-0-485 name=__codelineno-0-485></a>    <span class=n>fail_on_delete_of_updated_group</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
</span><span id=__span-0-486><a id=__codelineno-0-486 name=__codelineno-0-486></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-487><a id=__codelineno-0-487 name=__codelineno-0-487></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a BasicConflictSolver object with the given configuration options</span>
</span><span id=__span-0-488><a id=__codelineno-0-488 name=__codelineno-0-488></a><span class=sd>    Parameters:</span>
</span><span id=__span-0-489><a id=__codelineno-0-489 name=__codelineno-0-489></a><span class=sd>    on_user_attributes_conflict: VersionSelection</span>
</span><span id=__span-0-490><a id=__codelineno-0-490 name=__codelineno-0-490></a><span class=sd>        The behavior to use when a user attribute conflict is encountered, by default VersionSelection.use_ours()</span>
</span><span id=__span-0-491><a id=__codelineno-0-491 name=__codelineno-0-491></a><span class=sd>    on_chunk_conflict: VersionSelection</span>
</span><span id=__span-0-492><a id=__codelineno-0-492 name=__codelineno-0-492></a><span class=sd>        The behavior to use when a chunk conflict is encountered, by default VersionSelection.use_theirs()</span>
</span><span id=__span-0-493><a id=__codelineno-0-493 name=__codelineno-0-493></a><span class=sd>    fail_on_delete_of_updated_array: bool</span>
</span><span id=__span-0-494><a id=__codelineno-0-494 name=__codelineno-0-494></a><span class=sd>        Whether to fail when a chunk is deleted that has been updated, by default False</span>
</span><span id=__span-0-495><a id=__codelineno-0-495 name=__codelineno-0-495></a><span class=sd>    fail_on_delete_of_updated_group: bool</span>
</span><span id=__span-0-496><a id=__codelineno-0-496 name=__codelineno-0-496></a><span class=sd>        Whether to fail when a group is deleted that has been updated, by default False</span>
</span><span id=__span-0-497><a id=__codelineno-0-497 name=__codelineno-0-497></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-498><a id=__codelineno-0-498 name=__codelineno-0-498></a>    <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.CachingConfig class="doc doc-heading"> <code>CachingConfig</code> </h2> <div class="doc doc-contents "> <p>Configuration for how Icechunk caches its metadata files</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span>
<span class=normal><a href=#__codelineno-0-87>87</a></span>
<span class=normal><a href=#__codelineno-0-88>88</a></span>
<span class=normal><a href=#__codelineno-0-89>89</a></span>
<span class=normal><a href=#__codelineno-0-90>90</a></span>
<span class=normal><a href=#__codelineno-0-91>91</a></span>
<span class=normal><a href=#__codelineno-0-92>92</a></span>
<span class=normal><a href=#__codelineno-0-93>93</a></span>
<span class=normal><a href=#__codelineno-0-94>94</a></span>
<span class=normal><a href=#__codelineno-0-95>95</a></span>
<span class=normal><a href=#__codelineno-0-96>96</a></span>
<span class=normal><a href=#__codelineno-0-97>97</a></span>
<span class=normal><a href=#__codelineno-0-98>98</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a><span class=k>class</span> <span class=nc>CachingConfig</span><span class=p>:</span>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Configuration for how Icechunk caches its metadata files&quot;&quot;&quot;</span>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a>    <span class=nd>@property</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a>    <span class=k>def</span> <span class=nf>snapshots_cache_size</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a>    <span class=nd>@snapshots_cache_size</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a>    <span class=k>def</span> <span class=nf>snapshots_cache_size</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a>    <span class=nd>@property</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a>    <span class=k>def</span> <span class=nf>manifests_cache_size</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a>    <span class=nd>@manifests_cache_size</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a>    <span class=k>def</span> <span class=nf>manifests_cache_size</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a>    <span class=nd>@property</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=k>def</span> <span class=nf>transactions_cache_size</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a>    <span class=nd>@transactions_cache_size</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a>    <span class=k>def</span> <span class=nf>transactions_cache_size</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a>    <span class=nd>@property</span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a>    <span class=k>def</span> <span class=nf>attributes_cache_size</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a>    <span class=nd>@attributes_cache_size</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a>    <span class=k>def</span> <span class=nf>attributes_cache_size</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a>    <span class=nd>@property</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a>    <span class=k>def</span> <span class=nf>chunks_cache_size</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a>    <span class=nd>@chunks_cache_size</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a>    <span class=k>def</span> <span class=nf>chunks_cache_size</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a>    <span class=nd>@staticmethod</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a>    <span class=k>def</span> <span class=nf>default</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>CachingConfig</span><span class=p>:</span> <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.CompressionAlgorithm class="doc doc-heading"> <code>CompressionAlgorithm</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code>Enum</code></p> <p>Enum for selecting the compression algorithm used by Icechunk to write its metadata files</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a><span class=k>class</span> <span class=nc>CompressionAlgorithm</span><span class=p>(</span><span class=n>Enum</span><span class=p>):</span>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Enum for selecting the compression algorithm used by Icechunk to write its metadata files&quot;&quot;&quot;</span>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a>    <span class=n>Zstd</span> <span class=o>=</span> <span class=mi>0</span>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a>    <span class=nd>@staticmethod</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a>    <span class=k>def</span> <span class=nf>default</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>CompressionAlgorithm</span><span class=p>:</span> <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.CompressionConfig class="doc doc-heading"> <code>CompressionConfig</code> </h2> <div class="doc doc-contents "> <p>Configuration for how Icechunk compresses its metadata files</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span>
<span class=normal><a href=#__codelineno-0-66>66</a></span>
<span class=normal><a href=#__codelineno-0-67>67</a></span>
<span class=normal><a href=#__codelineno-0-68>68</a></span>
<span class=normal><a href=#__codelineno-0-69>69</a></span>
<span class=normal><a href=#__codelineno-0-70>70</a></span>
<span class=normal><a href=#__codelineno-0-71>71</a></span>
<span class=normal><a href=#__codelineno-0-72>72</a></span>
<span class=normal><a href=#__codelineno-0-73>73</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a><span class=k>class</span> <span class=nc>CompressionConfig</span><span class=p>:</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Configuration for how Icechunk compresses its metadata files&quot;&quot;&quot;</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a>    <span class=nd>@property</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a>    <span class=k>def</span> <span class=nf>algorithm</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CompressionAlgorithm</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a>    <span class=nd>@algorithm</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a>    <span class=k>def</span> <span class=nf>algorithm</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>CompressionAlgorithm</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a>    <span class=nd>@property</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a>    <span class=k>def</span> <span class=nf>level</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a>    <span class=nd>@level</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a>    <span class=k>def</span> <span class=nf>level</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a>    <span class=nd>@staticmethod</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a>    <span class=k>def</span> <span class=nf>default</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>CompressionConfig</span><span class=p>:</span> <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.Conflict class="doc doc-heading"> <code>Conflict</code> </h2> <div class="doc doc-contents "> <p>A conflict detected between snapshots</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-563>563</a></span>
<span class=normal><a href=#__codelineno-0-564>564</a></span>
<span class=normal><a href=#__codelineno-0-565>565</a></span>
<span class=normal><a href=#__codelineno-0-566>566</a></span>
<span class=normal><a href=#__codelineno-0-567>567</a></span>
<span class=normal><a href=#__codelineno-0-568>568</a></span>
<span class=normal><a href=#__codelineno-0-569>569</a></span>
<span class=normal><a href=#__codelineno-0-570>570</a></span>
<span class=normal><a href=#__codelineno-0-571>571</a></span>
<span class=normal><a href=#__codelineno-0-572>572</a></span>
<span class=normal><a href=#__codelineno-0-573>573</a></span>
<span class=normal><a href=#__codelineno-0-574>574</a></span>
<span class=normal><a href=#__codelineno-0-575>575</a></span>
<span class=normal><a href=#__codelineno-0-576>576</a></span>
<span class=normal><a href=#__codelineno-0-577>577</a></span>
<span class=normal><a href=#__codelineno-0-578>578</a></span>
<span class=normal><a href=#__codelineno-0-579>579</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-563><a id=__codelineno-0-563 name=__codelineno-0-563></a><span class=k>class</span> <span class=nc>Conflict</span><span class=p>:</span>
</span><span id=__span-0-564><a id=__codelineno-0-564 name=__codelineno-0-564></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;A conflict detected between snapshots&quot;&quot;&quot;</span>
</span><span id=__span-0-565><a id=__codelineno-0-565 name=__codelineno-0-565></a>
</span><span id=__span-0-566><a id=__codelineno-0-566 name=__codelineno-0-566></a>    <span class=nd>@property</span>
</span><span id=__span-0-567><a id=__codelineno-0-567 name=__codelineno-0-567></a>    <span class=k>def</span> <span class=nf>conflict_type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ConflictType</span><span class=p>:</span>
</span><span id=__span-0-568><a id=__codelineno-0-568 name=__codelineno-0-568></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;The type of conflict detected&quot;&quot;&quot;</span>
</span><span id=__span-0-569><a id=__codelineno-0-569 name=__codelineno-0-569></a>        <span class=o>...</span>
</span><span id=__span-0-570><a id=__codelineno-0-570 name=__codelineno-0-570></a>
</span><span id=__span-0-571><a id=__codelineno-0-571 name=__codelineno-0-571></a>    <span class=nd>@property</span>
</span><span id=__span-0-572><a id=__codelineno-0-572 name=__codelineno-0-572></a>    <span class=k>def</span> <span class=nf>path</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-573><a id=__codelineno-0-573 name=__codelineno-0-573></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;The path of the node that caused the conflict&quot;&quot;&quot;</span>
</span><span id=__span-0-574><a id=__codelineno-0-574 name=__codelineno-0-574></a>        <span class=o>...</span>
</span><span id=__span-0-575><a id=__codelineno-0-575 name=__codelineno-0-575></a>
</span><span id=__span-0-576><a id=__codelineno-0-576 name=__codelineno-0-576></a>    <span class=nd>@property</span>
</span><span id=__span-0-577><a id=__codelineno-0-577 name=__codelineno-0-577></a>    <span class=k>def</span> <span class=nf>conflicted_chunks</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=nb>list</span><span class=p>[</span><span class=nb>int</span><span class=p>]]</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-578><a id=__codelineno-0-578 name=__codelineno-0-578></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;If the conflict is a chunk conflict, this will return the list of chunk indices that are in conflict&quot;&quot;&quot;</span>
</span><span id=__span-0-579><a id=__codelineno-0-579 name=__codelineno-0-579></a>        <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.Conflict.conflict_type class="doc doc-heading"> <code class="highlight language-python"><span class=n>conflict_type</span><span class=p>:</span> <span class=n>ConflictType</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>The type of conflict detected</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.Conflict.conflicted_chunks class="doc doc-heading"> <code class="highlight language-python"><span class=n>conflicted_chunks</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>list</span><span class=p>[</span><span class=nb>int</span><span class=p>]]</span> <span class=o>|</span> <span class=kc>None</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>If the conflict is a chunk conflict, this will return the list of chunk indices that are in conflict</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.Conflict.path class="doc doc-heading"> <code class="highlight language-python"><span class=n>path</span><span class=p>:</span> <span class=nb>str</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>The path of the node that caused the conflict</p> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.ConflictDetector class="doc doc-heading"> <code>ConflictDetector</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code>ConflictSolver</code></p> <p>A conflict solver that can be used to detect conflicts between two stores, but does not resolve them</p> <p>Where the <code>BasicConflictSolver</code> will attempt to resolve conflicts, the <code>ConflictDetector</code> will only detect them. This means that during a rebase operation the <code>ConflictDetector</code> will raise a <code>RebaseFailed</code> error if any conflicts are detected, and allow the rebase operation to be retried with a different conflict resolution strategy. Otherwise, if no conflicts are detected the rebase operation will succeed.</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-500>500</a></span>
<span class=normal><a href=#__codelineno-0-501>501</a></span>
<span class=normal><a href=#__codelineno-0-502>502</a></span>
<span class=normal><a href=#__codelineno-0-503>503</a></span>
<span class=normal><a href=#__codelineno-0-504>504</a></span>
<span class=normal><a href=#__codelineno-0-505>505</a></span>
<span class=normal><a href=#__codelineno-0-506>506</a></span>
<span class=normal><a href=#__codelineno-0-507>507</a></span>
<span class=normal><a href=#__codelineno-0-508>508</a></span>
<span class=normal><a href=#__codelineno-0-509>509</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-500><a id=__codelineno-0-500 name=__codelineno-0-500></a><span class=k>class</span> <span class=nc>ConflictDetector</span><span class=p>(</span><span class=n>ConflictSolver</span><span class=p>):</span>
</span><span id=__span-0-501><a id=__codelineno-0-501 name=__codelineno-0-501></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;A conflict solver that can be used to detect conflicts between two stores, but does not resolve them</span>
</span><span id=__span-0-502><a id=__codelineno-0-502 name=__codelineno-0-502></a>
</span><span id=__span-0-503><a id=__codelineno-0-503 name=__codelineno-0-503></a><span class=sd>    Where the `BasicConflictSolver` will attempt to resolve conflicts, the `ConflictDetector` will only detect them. This means</span>
</span><span id=__span-0-504><a id=__codelineno-0-504 name=__codelineno-0-504></a><span class=sd>    that during a rebase operation the `ConflictDetector` will raise a `RebaseFailed` error if any conflicts are detected, and</span>
</span><span id=__span-0-505><a id=__codelineno-0-505 name=__codelineno-0-505></a><span class=sd>    allow the rebase operation to be retried with a different conflict resolution strategy. Otherwise, if no conflicts are detected</span>
</span><span id=__span-0-506><a id=__codelineno-0-506 name=__codelineno-0-506></a><span class=sd>    the rebase operation will succeed.</span>
</span><span id=__span-0-507><a id=__codelineno-0-507 name=__codelineno-0-507></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-508><a id=__codelineno-0-508 name=__codelineno-0-508></a>
</span><span id=__span-0-509><a id=__codelineno-0-509 name=__codelineno-0-509></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.ConflictError class="doc doc-heading"> <code>ConflictError</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code>Exception</code></p> <p>Error raised when a commit operation fails due to a conflict.</p> <details class=quote> <summary>Source code in <code>icechunk/session.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-13>13</a></span>
<span class=normal><a href=#__codelineno-0-14>14</a></span>
<span class=normal><a href=#__codelineno-0-15>15</a></span>
<span class=normal><a href=#__codelineno-0-16>16</a></span>
<span class=normal><a href=#__codelineno-0-17>17</a></span>
<span class=normal><a href=#__codelineno-0-18>18</a></span>
<span class=normal><a href=#__codelineno-0-19>19</a></span>
<span class=normal><a href=#__codelineno-0-20>20</a></span>
<span class=normal><a href=#__codelineno-0-21>21</a></span>
<span class=normal><a href=#__codelineno-0-22>22</a></span>
<span class=normal><a href=#__codelineno-0-23>23</a></span>
<span class=normal><a href=#__codelineno-0-24>24</a></span>
<span class=normal><a href=#__codelineno-0-25>25</a></span>
<span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span>
<span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13></a><span class=k>class</span> <span class=nc>ConflictError</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Error raised when a commit operation fails due to a conflict.&quot;&quot;&quot;</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15></a>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16></a>    <span class=n>_error</span><span class=p>:</span> <span class=n>ConflictErrorData</span>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17></a>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>error</span><span class=p>:</span> <span class=n>PyConflictError</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_error</span> <span class=o>=</span> <span class=n>error</span><span class=o>.</span><span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20></a>
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21></a>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22></a>        <span class=k>return</span> <span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_error</span><span class=p>)</span>
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23></a>
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24></a>    <span class=nd>@property</span>
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25></a>    <span class=k>def</span> <span class=nf>expected_parent</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27></a><span class=sd>        The expected parent snapshot ID.</span>
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28></a>
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29></a><span class=sd>        This is the snapshot ID that the session was based on when the</span>
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30></a><span class=sd>        commit operation was called.</span>
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_error</span><span class=o>.</span><span class=n>expected_parent</span>
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33></a>
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34></a>    <span class=nd>@property</span>
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35></a>    <span class=k>def</span> <span class=nf>actual_parent</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37></a><span class=sd>        The actual parent snapshot ID of the branch that the session attempted to commit to.</span>
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38></a>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39></a><span class=sd>        When the session is based on a branch, this is the snapshot ID of the branch tip. If this</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40></a><span class=sd>        error is raised, it means the branch was modified and committed by another session after</span>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a><span class=sd>        the session was created.</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_error</span><span class=o>.</span><span class=n>actual_parent</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.ConflictError.actual_parent class="doc doc-heading"> <code class="highlight language-python"><span class=n>actual_parent</span><span class=p>:</span> <span class=nb>str</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>The actual parent snapshot ID of the branch that the session attempted to commit to.</p> <p>When the session is based on a branch, this is the snapshot ID of the branch tip. If this error is raised, it means the branch was modified and committed by another session after the session was created.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.ConflictError.expected_parent class="doc doc-heading"> <code class="highlight language-python"><span class=n>expected_parent</span><span class=p>:</span> <span class=nb>str</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>The expected parent snapshot ID.</p> <p>This is the snapshot ID that the session was based on when the commit operation was called.</p> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.ConflictErrorData class="doc doc-heading"> <code>ConflictErrorData</code> </h2> <div class="doc doc-contents "> <p>Data class for conflict errors. This describes the snapshot conflict detected when committing a session</p> <p>If this error is raised, it means the branch was modified and committed by another session after the session was created.</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-516>516</a></span>
<span class=normal><a href=#__codelineno-0-517>517</a></span>
<span class=normal><a href=#__codelineno-0-518>518</a></span>
<span class=normal><a href=#__codelineno-0-519>519</a></span>
<span class=normal><a href=#__codelineno-0-520>520</a></span>
<span class=normal><a href=#__codelineno-0-521>521</a></span>
<span class=normal><a href=#__codelineno-0-522>522</a></span>
<span class=normal><a href=#__codelineno-0-523>523</a></span>
<span class=normal><a href=#__codelineno-0-524>524</a></span>
<span class=normal><a href=#__codelineno-0-525>525</a></span>
<span class=normal><a href=#__codelineno-0-526>526</a></span>
<span class=normal><a href=#__codelineno-0-527>527</a></span>
<span class=normal><a href=#__codelineno-0-528>528</a></span>
<span class=normal><a href=#__codelineno-0-529>529</a></span>
<span class=normal><a href=#__codelineno-0-530>530</a></span>
<span class=normal><a href=#__codelineno-0-531>531</a></span>
<span class=normal><a href=#__codelineno-0-532>532</a></span>
<span class=normal><a href=#__codelineno-0-533>533</a></span>
<span class=normal><a href=#__codelineno-0-534>534</a></span>
<span class=normal><a href=#__codelineno-0-535>535</a></span>
<span class=normal><a href=#__codelineno-0-536>536</a></span>
<span class=normal><a href=#__codelineno-0-537>537</a></span>
<span class=normal><a href=#__codelineno-0-538>538</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-516><a id=__codelineno-0-516 name=__codelineno-0-516></a><span class=k>class</span> <span class=nc>ConflictErrorData</span><span class=p>:</span>
</span><span id=__span-0-517><a id=__codelineno-0-517 name=__codelineno-0-517></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Data class for conflict errors. This describes the snapshot conflict detected when committing a session</span>
</span><span id=__span-0-518><a id=__codelineno-0-518 name=__codelineno-0-518></a>
</span><span id=__span-0-519><a id=__codelineno-0-519 name=__codelineno-0-519></a><span class=sd>    If this error is raised, it means the branch was modified and committed by another session after the session was created.</span>
</span><span id=__span-0-520><a id=__codelineno-0-520 name=__codelineno-0-520></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-521><a id=__codelineno-0-521 name=__codelineno-0-521></a>    <span class=nd>@property</span>
</span><span id=__span-0-522><a id=__codelineno-0-522 name=__codelineno-0-522></a>    <span class=k>def</span> <span class=nf>expected_parent</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-523><a id=__codelineno-0-523 name=__codelineno-0-523></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;The expected parent snapshot ID.</span>
</span><span id=__span-0-524><a id=__codelineno-0-524 name=__codelineno-0-524></a>
</span><span id=__span-0-525><a id=__codelineno-0-525 name=__codelineno-0-525></a><span class=sd>        This is the snapshot ID that the session was based on when the</span>
</span><span id=__span-0-526><a id=__codelineno-0-526 name=__codelineno-0-526></a><span class=sd>        commit operation was called.</span>
</span><span id=__span-0-527><a id=__codelineno-0-527 name=__codelineno-0-527></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-528><a id=__codelineno-0-528 name=__codelineno-0-528></a>        <span class=o>...</span>
</span><span id=__span-0-529><a id=__codelineno-0-529 name=__codelineno-0-529></a>    <span class=nd>@property</span>
</span><span id=__span-0-530><a id=__codelineno-0-530 name=__codelineno-0-530></a>    <span class=k>def</span> <span class=nf>actual_parent</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-531><a id=__codelineno-0-531 name=__codelineno-0-531></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-532><a id=__codelineno-0-532 name=__codelineno-0-532></a><span class=sd>        The actual parent snapshot ID of the branch that the session attempted to commit to.</span>
</span><span id=__span-0-533><a id=__codelineno-0-533 name=__codelineno-0-533></a>
</span><span id=__span-0-534><a id=__codelineno-0-534 name=__codelineno-0-534></a><span class=sd>        When the session is based on a branch, this is the snapshot ID of the branch tip. If this</span>
</span><span id=__span-0-535><a id=__codelineno-0-535 name=__codelineno-0-535></a><span class=sd>        error is raised, it means the branch was modified and committed by another session after</span>
</span><span id=__span-0-536><a id=__codelineno-0-536 name=__codelineno-0-536></a><span class=sd>        the session was created.</span>
</span><span id=__span-0-537><a id=__codelineno-0-537 name=__codelineno-0-537></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-538><a id=__codelineno-0-538 name=__codelineno-0-538></a>        <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.ConflictErrorData.actual_parent class="doc doc-heading"> <code class="highlight language-python"><span class=n>actual_parent</span><span class=p>:</span> <span class=nb>str</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>The actual parent snapshot ID of the branch that the session attempted to commit to.</p> <p>When the session is based on a branch, this is the snapshot ID of the branch tip. If this error is raised, it means the branch was modified and committed by another session after the session was created.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.ConflictErrorData.expected_parent class="doc doc-heading"> <code class="highlight language-python"><span class=n>expected_parent</span><span class=p>:</span> <span class=nb>str</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>The expected parent snapshot ID.</p> <p>This is the snapshot ID that the session was based on when the commit operation was called.</p> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.ConflictSolver class="doc doc-heading"> <code>ConflictSolver</code> </h2> <div class="doc doc-contents "> <p>An abstract conflict solver that can be used to detect or resolve conflicts between two stores</p> <p>This should never be used directly, but should be subclassed to provide specific conflict resolution behavior</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-459>459</a></span>
<span class=normal><a href=#__codelineno-0-460>460</a></span>
<span class=normal><a href=#__codelineno-0-461>461</a></span>
<span class=normal><a href=#__codelineno-0-462>462</a></span>
<span class=normal><a href=#__codelineno-0-463>463</a></span>
<span class=normal><a href=#__codelineno-0-464>464</a></span>
<span class=normal><a href=#__codelineno-0-465>465</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-459><a id=__codelineno-0-459 name=__codelineno-0-459></a><span class=k>class</span> <span class=nc>ConflictSolver</span><span class=p>:</span>
</span><span id=__span-0-460><a id=__codelineno-0-460 name=__codelineno-0-460></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;An abstract conflict solver that can be used to detect or resolve conflicts between two stores</span>
</span><span id=__span-0-461><a id=__codelineno-0-461 name=__codelineno-0-461></a>
</span><span id=__span-0-462><a id=__codelineno-0-462 name=__codelineno-0-462></a><span class=sd>    This should never be used directly, but should be subclassed to provide specific conflict resolution behavior</span>
</span><span id=__span-0-463><a id=__codelineno-0-463 name=__codelineno-0-463></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-464><a id=__codelineno-0-464 name=__codelineno-0-464></a>
</span><span id=__span-0-465><a id=__codelineno-0-465 name=__codelineno-0-465></a>    <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.ConflictType class="doc doc-heading"> <code>ConflictType</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code>Enum</code></p> <p>Type of conflict detected</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-548>548</a></span>
<span class=normal><a href=#__codelineno-0-549>549</a></span>
<span class=normal><a href=#__codelineno-0-550>550</a></span>
<span class=normal><a href=#__codelineno-0-551>551</a></span>
<span class=normal><a href=#__codelineno-0-552>552</a></span>
<span class=normal><a href=#__codelineno-0-553>553</a></span>
<span class=normal><a href=#__codelineno-0-554>554</a></span>
<span class=normal><a href=#__codelineno-0-555>555</a></span>
<span class=normal><a href=#__codelineno-0-556>556</a></span>
<span class=normal><a href=#__codelineno-0-557>557</a></span>
<span class=normal><a href=#__codelineno-0-558>558</a></span>
<span class=normal><a href=#__codelineno-0-559>559</a></span>
<span class=normal><a href=#__codelineno-0-560>560</a></span>
<span class=normal><a href=#__codelineno-0-561>561</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-548><a id=__codelineno-0-548 name=__codelineno-0-548></a><span class=k>class</span> <span class=nc>ConflictType</span><span class=p>(</span><span class=n>Enum</span><span class=p>):</span>
</span><span id=__span-0-549><a id=__codelineno-0-549 name=__codelineno-0-549></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Type of conflict detected&quot;&quot;&quot;</span>
</span><span id=__span-0-550><a id=__codelineno-0-550 name=__codelineno-0-550></a>
</span><span id=__span-0-551><a id=__codelineno-0-551 name=__codelineno-0-551></a>    <span class=n>NewNodeConflictsWithExistingNode</span> <span class=o>=</span> <span class=mi>1</span>
</span><span id=__span-0-552><a id=__codelineno-0-552 name=__codelineno-0-552></a>    <span class=n>NewNodeInInvalidGroup</span> <span class=o>=</span> <span class=mi>2</span>
</span><span id=__span-0-553><a id=__codelineno-0-553 name=__codelineno-0-553></a>    <span class=n>ZarrMetadataDoubleUpdate</span> <span class=o>=</span> <span class=mi>3</span>
</span><span id=__span-0-554><a id=__codelineno-0-554 name=__codelineno-0-554></a>    <span class=n>ZarrMetadataUpdateOfDeletedArray</span> <span class=o>=</span> <span class=mi>4</span>
</span><span id=__span-0-555><a id=__codelineno-0-555 name=__codelineno-0-555></a>    <span class=n>UserAttributesDoubleUpdate</span> <span class=o>=</span> <span class=mi>5</span>
</span><span id=__span-0-556><a id=__codelineno-0-556 name=__codelineno-0-556></a>    <span class=n>UserAttributesUpdateOfDeletedNode</span> <span class=o>=</span> <span class=mi>6</span>
</span><span id=__span-0-557><a id=__codelineno-0-557 name=__codelineno-0-557></a>    <span class=n>ChunkDoubleUpdate</span> <span class=o>=</span> <span class=mi>7</span>
</span><span id=__span-0-558><a id=__codelineno-0-558 name=__codelineno-0-558></a>    <span class=n>ChunksUpdatedInDeletedArray</span> <span class=o>=</span> <span class=mi>8</span>
</span><span id=__span-0-559><a id=__codelineno-0-559 name=__codelineno-0-559></a>    <span class=n>ChunksUpdatedInUpdatedArray</span> <span class=o>=</span> <span class=mi>9</span>
</span><span id=__span-0-560><a id=__codelineno-0-560 name=__codelineno-0-560></a>    <span class=n>DeleteOfUpdatedArray</span> <span class=o>=</span> <span class=mi>10</span>
</span><span id=__span-0-561><a id=__codelineno-0-561 name=__codelineno-0-561></a>    <span class=n>DeleteOfUpdatedGroup</span> <span class=o>=</span> <span class=mi>11</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.IcechunkError class="doc doc-heading"> <code>IcechunkError</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code>Exception</code></p> <p>Base class for all Icechunk errors</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-511>511</a></span>
<span class=normal><a href=#__codelineno-0-512>512</a></span>
<span class=normal><a href=#__codelineno-0-513>513</a></span>
<span class=normal><a href=#__codelineno-0-514>514</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-511><a id=__codelineno-0-511 name=__codelineno-0-511></a><span class=k>class</span> <span class=nc>IcechunkError</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
</span><span id=__span-0-512><a id=__codelineno-0-512 name=__codelineno-0-512></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Base class for all Icechunk errors&quot;&quot;&quot;</span>
</span><span id=__span-0-513><a id=__codelineno-0-513 name=__codelineno-0-513></a>
</span><span id=__span-0-514><a id=__codelineno-0-514 name=__codelineno-0-514></a>    <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.IcechunkStore class="doc doc-heading"> <code>IcechunkStore</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code>Store</code>, <code>SyncMixin</code></p> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-35> 35</a></span>
<span class=normal><a href=#__codelineno-0-36> 36</a></span>
<span class=normal><a href=#__codelineno-0-37> 37</a></span>
<span class=normal><a href=#__codelineno-0-38> 38</a></span>
<span class=normal><a href=#__codelineno-0-39> 39</a></span>
<span class=normal><a href=#__codelineno-0-40> 40</a></span>
<span class=normal><a href=#__codelineno-0-41> 41</a></span>
<span class=normal><a href=#__codelineno-0-42> 42</a></span>
<span class=normal><a href=#__codelineno-0-43> 43</a></span>
<span class=normal><a href=#__codelineno-0-44> 44</a></span>
<span class=normal><a href=#__codelineno-0-45> 45</a></span>
<span class=normal><a href=#__codelineno-0-46> 46</a></span>
<span class=normal><a href=#__codelineno-0-47> 47</a></span>
<span class=normal><a href=#__codelineno-0-48> 48</a></span>
<span class=normal><a href=#__codelineno-0-49> 49</a></span>
<span class=normal><a href=#__codelineno-0-50> 50</a></span>
<span class=normal><a href=#__codelineno-0-51> 51</a></span>
<span class=normal><a href=#__codelineno-0-52> 52</a></span>
<span class=normal><a href=#__codelineno-0-53> 53</a></span>
<span class=normal><a href=#__codelineno-0-54> 54</a></span>
<span class=normal><a href=#__codelineno-0-55> 55</a></span>
<span class=normal><a href=#__codelineno-0-56> 56</a></span>
<span class=normal><a href=#__codelineno-0-57> 57</a></span>
<span class=normal><a href=#__codelineno-0-58> 58</a></span>
<span class=normal><a href=#__codelineno-0-59> 59</a></span>
<span class=normal><a href=#__codelineno-0-60> 60</a></span>
<span class=normal><a href=#__codelineno-0-61> 61</a></span>
<span class=normal><a href=#__codelineno-0-62> 62</a></span>
<span class=normal><a href=#__codelineno-0-63> 63</a></span>
<span class=normal><a href=#__codelineno-0-64> 64</a></span>
<span class=normal><a href=#__codelineno-0-65> 65</a></span>
<span class=normal><a href=#__codelineno-0-66> 66</a></span>
<span class=normal><a href=#__codelineno-0-67> 67</a></span>
<span class=normal><a href=#__codelineno-0-68> 68</a></span>
<span class=normal><a href=#__codelineno-0-69> 69</a></span>
<span class=normal><a href=#__codelineno-0-70> 70</a></span>
<span class=normal><a href=#__codelineno-0-71> 71</a></span>
<span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span>
<span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span>
<span class=normal><a href=#__codelineno-0-185>185</a></span>
<span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span>
<span class=normal><a href=#__codelineno-0-190>190</a></span>
<span class=normal><a href=#__codelineno-0-191>191</a></span>
<span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span>
<span class=normal><a href=#__codelineno-0-194>194</a></span>
<span class=normal><a href=#__codelineno-0-195>195</a></span>
<span class=normal><a href=#__codelineno-0-196>196</a></span>
<span class=normal><a href=#__codelineno-0-197>197</a></span>
<span class=normal><a href=#__codelineno-0-198>198</a></span>
<span class=normal><a href=#__codelineno-0-199>199</a></span>
<span class=normal><a href=#__codelineno-0-200>200</a></span>
<span class=normal><a href=#__codelineno-0-201>201</a></span>
<span class=normal><a href=#__codelineno-0-202>202</a></span>
<span class=normal><a href=#__codelineno-0-203>203</a></span>
<span class=normal><a href=#__codelineno-0-204>204</a></span>
<span class=normal><a href=#__codelineno-0-205>205</a></span>
<span class=normal><a href=#__codelineno-0-206>206</a></span>
<span class=normal><a href=#__codelineno-0-207>207</a></span>
<span class=normal><a href=#__codelineno-0-208>208</a></span>
<span class=normal><a href=#__codelineno-0-209>209</a></span>
<span class=normal><a href=#__codelineno-0-210>210</a></span>
<span class=normal><a href=#__codelineno-0-211>211</a></span>
<span class=normal><a href=#__codelineno-0-212>212</a></span>
<span class=normal><a href=#__codelineno-0-213>213</a></span>
<span class=normal><a href=#__codelineno-0-214>214</a></span>
<span class=normal><a href=#__codelineno-0-215>215</a></span>
<span class=normal><a href=#__codelineno-0-216>216</a></span>
<span class=normal><a href=#__codelineno-0-217>217</a></span>
<span class=normal><a href=#__codelineno-0-218>218</a></span>
<span class=normal><a href=#__codelineno-0-219>219</a></span>
<span class=normal><a href=#__codelineno-0-220>220</a></span>
<span class=normal><a href=#__codelineno-0-221>221</a></span>
<span class=normal><a href=#__codelineno-0-222>222</a></span>
<span class=normal><a href=#__codelineno-0-223>223</a></span>
<span class=normal><a href=#__codelineno-0-224>224</a></span>
<span class=normal><a href=#__codelineno-0-225>225</a></span>
<span class=normal><a href=#__codelineno-0-226>226</a></span>
<span class=normal><a href=#__codelineno-0-227>227</a></span>
<span class=normal><a href=#__codelineno-0-228>228</a></span>
<span class=normal><a href=#__codelineno-0-229>229</a></span>
<span class=normal><a href=#__codelineno-0-230>230</a></span>
<span class=normal><a href=#__codelineno-0-231>231</a></span>
<span class=normal><a href=#__codelineno-0-232>232</a></span>
<span class=normal><a href=#__codelineno-0-233>233</a></span>
<span class=normal><a href=#__codelineno-0-234>234</a></span>
<span class=normal><a href=#__codelineno-0-235>235</a></span>
<span class=normal><a href=#__codelineno-0-236>236</a></span>
<span class=normal><a href=#__codelineno-0-237>237</a></span>
<span class=normal><a href=#__codelineno-0-238>238</a></span>
<span class=normal><a href=#__codelineno-0-239>239</a></span>
<span class=normal><a href=#__codelineno-0-240>240</a></span>
<span class=normal><a href=#__codelineno-0-241>241</a></span>
<span class=normal><a href=#__codelineno-0-242>242</a></span>
<span class=normal><a href=#__codelineno-0-243>243</a></span>
<span class=normal><a href=#__codelineno-0-244>244</a></span>
<span class=normal><a href=#__codelineno-0-245>245</a></span>
<span class=normal><a href=#__codelineno-0-246>246</a></span>
<span class=normal><a href=#__codelineno-0-247>247</a></span>
<span class=normal><a href=#__codelineno-0-248>248</a></span>
<span class=normal><a href=#__codelineno-0-249>249</a></span>
<span class=normal><a href=#__codelineno-0-250>250</a></span>
<span class=normal><a href=#__codelineno-0-251>251</a></span>
<span class=normal><a href=#__codelineno-0-252>252</a></span>
<span class=normal><a href=#__codelineno-0-253>253</a></span>
<span class=normal><a href=#__codelineno-0-254>254</a></span>
<span class=normal><a href=#__codelineno-0-255>255</a></span>
<span class=normal><a href=#__codelineno-0-256>256</a></span>
<span class=normal><a href=#__codelineno-0-257>257</a></span>
<span class=normal><a href=#__codelineno-0-258>258</a></span>
<span class=normal><a href=#__codelineno-0-259>259</a></span>
<span class=normal><a href=#__codelineno-0-260>260</a></span>
<span class=normal><a href=#__codelineno-0-261>261</a></span>
<span class=normal><a href=#__codelineno-0-262>262</a></span>
<span class=normal><a href=#__codelineno-0-263>263</a></span>
<span class=normal><a href=#__codelineno-0-264>264</a></span>
<span class=normal><a href=#__codelineno-0-265>265</a></span>
<span class=normal><a href=#__codelineno-0-266>266</a></span>
<span class=normal><a href=#__codelineno-0-267>267</a></span>
<span class=normal><a href=#__codelineno-0-268>268</a></span>
<span class=normal><a href=#__codelineno-0-269>269</a></span>
<span class=normal><a href=#__codelineno-0-270>270</a></span>
<span class=normal><a href=#__codelineno-0-271>271</a></span>
<span class=normal><a href=#__codelineno-0-272>272</a></span>
<span class=normal><a href=#__codelineno-0-273>273</a></span>
<span class=normal><a href=#__codelineno-0-274>274</a></span>
<span class=normal><a href=#__codelineno-0-275>275</a></span>
<span class=normal><a href=#__codelineno-0-276>276</a></span>
<span class=normal><a href=#__codelineno-0-277>277</a></span>
<span class=normal><a href=#__codelineno-0-278>278</a></span>
<span class=normal><a href=#__codelineno-0-279>279</a></span>
<span class=normal><a href=#__codelineno-0-280>280</a></span>
<span class=normal><a href=#__codelineno-0-281>281</a></span>
<span class=normal><a href=#__codelineno-0-282>282</a></span>
<span class=normal><a href=#__codelineno-0-283>283</a></span>
<span class=normal><a href=#__codelineno-0-284>284</a></span>
<span class=normal><a href=#__codelineno-0-285>285</a></span>
<span class=normal><a href=#__codelineno-0-286>286</a></span>
<span class=normal><a href=#__codelineno-0-287>287</a></span>
<span class=normal><a href=#__codelineno-0-288>288</a></span>
<span class=normal><a href=#__codelineno-0-289>289</a></span>
<span class=normal><a href=#__codelineno-0-290>290</a></span>
<span class=normal><a href=#__codelineno-0-291>291</a></span>
<span class=normal><a href=#__codelineno-0-292>292</a></span>
<span class=normal><a href=#__codelineno-0-293>293</a></span>
<span class=normal><a href=#__codelineno-0-294>294</a></span>
<span class=normal><a href=#__codelineno-0-295>295</a></span>
<span class=normal><a href=#__codelineno-0-296>296</a></span>
<span class=normal><a href=#__codelineno-0-297>297</a></span>
<span class=normal><a href=#__codelineno-0-298>298</a></span>
<span class=normal><a href=#__codelineno-0-299>299</a></span>
<span class=normal><a href=#__codelineno-0-300>300</a></span>
<span class=normal><a href=#__codelineno-0-301>301</a></span>
<span class=normal><a href=#__codelineno-0-302>302</a></span>
<span class=normal><a href=#__codelineno-0-303>303</a></span>
<span class=normal><a href=#__codelineno-0-304>304</a></span>
<span class=normal><a href=#__codelineno-0-305>305</a></span>
<span class=normal><a href=#__codelineno-0-306>306</a></span>
<span class=normal><a href=#__codelineno-0-307>307</a></span>
<span class=normal><a href=#__codelineno-0-308>308</a></span>
<span class=normal><a href=#__codelineno-0-309>309</a></span>
<span class=normal><a href=#__codelineno-0-310>310</a></span>
<span class=normal><a href=#__codelineno-0-311>311</a></span>
<span class=normal><a href=#__codelineno-0-312>312</a></span>
<span class=normal><a href=#__codelineno-0-313>313</a></span>
<span class=normal><a href=#__codelineno-0-314>314</a></span>
<span class=normal><a href=#__codelineno-0-315>315</a></span>
<span class=normal><a href=#__codelineno-0-316>316</a></span>
<span class=normal><a href=#__codelineno-0-317>317</a></span>
<span class=normal><a href=#__codelineno-0-318>318</a></span>
<span class=normal><a href=#__codelineno-0-319>319</a></span>
<span class=normal><a href=#__codelineno-0-320>320</a></span>
<span class=normal><a href=#__codelineno-0-321>321</a></span>
<span class=normal><a href=#__codelineno-0-322>322</a></span>
<span class=normal><a href=#__codelineno-0-323>323</a></span>
<span class=normal><a href=#__codelineno-0-324>324</a></span>
<span class=normal><a href=#__codelineno-0-325>325</a></span>
<span class=normal><a href=#__codelineno-0-326>326</a></span>
<span class=normal><a href=#__codelineno-0-327>327</a></span>
<span class=normal><a href=#__codelineno-0-328>328</a></span>
<span class=normal><a href=#__codelineno-0-329>329</a></span>
<span class=normal><a href=#__codelineno-0-330>330</a></span>
<span class=normal><a href=#__codelineno-0-331>331</a></span>
<span class=normal><a href=#__codelineno-0-332>332</a></span>
<span class=normal><a href=#__codelineno-0-333>333</a></span>
<span class=normal><a href=#__codelineno-0-334>334</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35></a><span class=k>class</span> <span class=nc>IcechunkStore</span><span class=p>(</span><span class=n>Store</span><span class=p>,</span> <span class=n>SyncMixin</span><span class=p>):</span>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36></a>    <span class=n>_store</span><span class=p>:</span> <span class=n>PyStore</span>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37></a>
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40></a>        <span class=n>store</span><span class=p>:</span> <span class=n>PyStore</span><span class=p>,</span>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a>        <span class=o>*</span><span class=n>args</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a>        <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43></a>    <span class=p>):</span>
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Create a new IcechunkStore.</span>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45></a>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a><span class=sd>        This should not be called directly, instead use the `create`, `open_existing` or `open_or_create` class methods.</span>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a>        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>read_only</span><span class=o>=</span><span class=n>store</span><span class=o>.</span><span class=n>read_only</span><span class=p>)</span>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a>        <span class=k>if</span> <span class=n>store</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a>                <span class=s2>&quot;An IcechunkStore should not be created with the default constructor, instead use either the create or open_existing class methods.&quot;</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a>            <span class=p>)</span>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_store</span> <span class=o>=</span> <span class=n>store</span>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_is_open</span> <span class=o>=</span> <span class=kc>True</span>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a>    <span class=k>def</span> <span class=fm>__eq__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>object</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>IcechunkStore</span><span class=p>):</span>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a>            <span class=k>return</span> <span class=kc>False</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span> <span class=o>==</span> <span class=n>value</span><span class=o>.</span><span class=n>_store</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a>    <span class=k>def</span> <span class=nf>__getstate__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>object</span><span class=p>:</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a>        <span class=c1># we serialize the Rust store as bytes</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a>        <span class=n>d</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__dict__</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a>        <span class=n>d</span><span class=p>[</span><span class=s2>&quot;_store&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>as_bytes</span><span class=p>()</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a>        <span class=k>return</span> <span class=n>d</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a>    <span class=k>def</span> <span class=nf>__setstate__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>state</span><span class=p>:</span> <span class=n>Any</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a>        <span class=c1># we have to deserialize the bytes of the Rust store</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a>        <span class=n>store_repr</span> <span class=o>=</span> <span class=n>state</span><span class=p>[</span><span class=s2>&quot;_store&quot;</span><span class=p>]</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a>        <span class=n>state</span><span class=p>[</span><span class=s2>&quot;_store&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>PyStore</span><span class=o>.</span><span class=n>from_bytes</span><span class=p>(</span><span class=n>store_repr</span><span class=p>)</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a>        <span class=n>state</span><span class=p>[</span><span class=s2>&quot;_read_only&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>state</span><span class=p>[</span><span class=s2>&quot;_store&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>read_only</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a>        <span class=bp>self</span><span class=o>.</span><span class=vm>__dict__</span> <span class=o>=</span> <span class=n>state</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a>    <span class=nd>@property</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a>    <span class=k>def</span> <span class=nf>session</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;Session&quot;</span><span class=p>:</span>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a>        <span class=kn>from</span> <span class=nn>icechunk</span> <span class=kn>import</span> <span class=n>Session</span>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a>        <span class=k>return</span> <span class=n>Session</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>session</span><span class=p>)</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>clear</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Clear the store.</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a><span class=sd>        This will remove all contents from the current session,</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a><span class=sd>        including all groups and all arrays. But it will not modify the repository history.</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a>        <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a>    <span class=k>def</span> <span class=nf>sync_clear</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Clear the store.</span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a><span class=sd>        This will remove all contents from the current session,</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a><span class=sd>        including all groups and all arrays. But it will not modify the repository history.</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>sync_clear</span><span class=p>()</span>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>is_empty</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a><span class=sd>        Check if the directory is empty.</span>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a><span class=sd>        Parameters</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a><span class=sd>        ----------</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a><span class=sd>        prefix : str</span>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a><span class=sd>            Prefix of keys to check.</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a><span class=sd>        Returns</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a><span class=sd>        -------</span>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a><span class=sd>        bool</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a><span class=sd>            True if the store is empty, False otherwise.</span>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a>        <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>is_empty</span><span class=p>(</span><span class=n>prefix</span><span class=p>)</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>get</span><span class=p>(</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a>        <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a>        <span class=n>prototype</span><span class=p>:</span> <span class=n>BufferPrototype</span><span class=p>,</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a>        <span class=n>byte_range</span><span class=p>:</span> <span class=n>ByteRequest</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Buffer</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Retrieve the value associated with a given key.</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a><span class=sd>        Parameters</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a><span class=sd>        ----------</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a><span class=sd>        key : str</span>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a><span class=sd>        byte_range : ByteRequest, optional</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a><span class=sd>            ByteRequest may be one of the following. If not provided, all data associated with the key is retrieved.</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a><span class=sd>            - RangeByteRequest(int, int): Request a specific range of bytes in the form (start, end). The end is exclusive. If the given range is zero-length or starts after the end of the object, an error will be returned. Additionally, if the range ends after the end of the object, the entire remainder of the object will be returned. Otherwise, the exact requested range will be returned.</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a><span class=sd>            - OffsetByteRequest(int): Request all bytes starting from a given byte offset. This is equivalent to bytes={int}- as an HTTP header.</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a><span class=sd>            - SuffixByteRequest(int): Request the last int bytes. Note that here, int is the size of the request, not the byte offset. This is equivalent to bytes=-{int} as an HTTP header.</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a><span class=sd>        Returns</span>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a><span class=sd>        -------</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a><span class=sd>        Buffer</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>        <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a>            <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>_byte_request_to_tuple</span><span class=p>(</span><span class=n>byte_range</span><span class=p>))</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>        <span class=k>except</span> <span class=ne>KeyError</span> <span class=k>as</span> <span class=n>_e</span><span class=p>:</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a>            <span class=c1># Zarr python expects None to be returned if the key does not exist</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a>            <span class=c1># but an IcechunkStore returns an error if the key does not exist</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>            <span class=k>return</span> <span class=kc>None</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>        <span class=k>return</span> <span class=n>prototype</span><span class=o>.</span><span class=n>buffer</span><span class=o>.</span><span class=n>from_bytes</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>get_partial_values</span><span class=p>(</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a>        <span class=n>prototype</span><span class=p>:</span> <span class=n>BufferPrototype</span><span class=p>,</span>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a>        <span class=n>key_ranges</span><span class=p>:</span> <span class=n>Iterable</span><span class=p>[</span><span class=nb>tuple</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>ByteRequest</span> <span class=o>|</span> <span class=kc>None</span><span class=p>]],</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>Buffer</span> <span class=o>|</span> <span class=kc>None</span><span class=p>]:</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Retrieve possibly partial values from given key_ranges.</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a><span class=sd>        Parameters</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a><span class=sd>        ----------</span>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a><span class=sd>        key_ranges : Iterable[tuple[str, tuple[int | None, int | None]]]</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a><span class=sd>            Ordered set of key, range pairs, a key may occur multiple times with different ranges</span>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a><span class=sd>        Returns</span>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a><span class=sd>        -------</span>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a><span class=sd>        list of values, in the order of the key_ranges, may contain null/none for missing keys</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a>        <span class=c1># NOTE: pyo3 has not implicit conversion from an Iterable to a rust iterable. So we convert it</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a>        <span class=c1># to a list here first. Possible opportunity for optimization.</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a>        <span class=n>ranges</span> <span class=o>=</span> <span class=p>[(</span><span class=n>k</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>_byte_request_to_tuple</span><span class=p>(</span><span class=n>k</span><span class=p>[</span><span class=mi>1</span><span class=p>]))</span> <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=n>key_ranges</span><span class=p>]</span>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a>        <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>get_partial_values</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>ranges</span><span class=p>))</span>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a>        <span class=k>return</span> <span class=p>[</span><span class=n>prototype</span><span class=o>.</span><span class=n>buffer</span><span class=o>.</span><span class=n>from_bytes</span><span class=p>(</span><span class=n>r</span><span class=p>)</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>result</span><span class=p>]</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>exists</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Check if a key exists in the store.</span>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a><span class=sd>        Parameters</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a><span class=sd>        ----------</span>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a><span class=sd>        key : str</span>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a><span class=sd>        Returns</span>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a><span class=sd>        -------</span>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a><span class=sd>        bool</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a>        <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a>
</span><span id=__span-0-180><a id=__codelineno-0-180 name=__codelineno-0-180></a>    <span class=nd>@property</span>
</span><span id=__span-0-181><a id=__codelineno-0-181 name=__codelineno-0-181></a>    <span class=k>def</span> <span class=nf>supports_writes</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Does the store support writes?&quot;&quot;&quot;</span>
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>supports_writes</span>
</span><span id=__span-0-184><a id=__codelineno-0-184 name=__codelineno-0-184></a>
</span><span id=__span-0-185><a id=__codelineno-0-185 name=__codelineno-0-185></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>set</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Buffer</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-186><a id=__codelineno-0-186 name=__codelineno-0-186></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Store a (key, value) pair.</span>
</span><span id=__span-0-187><a id=__codelineno-0-187 name=__codelineno-0-187></a>
</span><span id=__span-0-188><a id=__codelineno-0-188 name=__codelineno-0-188></a><span class=sd>        Parameters</span>
</span><span id=__span-0-189><a id=__codelineno-0-189 name=__codelineno-0-189></a><span class=sd>        ----------</span>
</span><span id=__span-0-190><a id=__codelineno-0-190 name=__codelineno-0-190></a><span class=sd>        key : str</span>
</span><span id=__span-0-191><a id=__codelineno-0-191 name=__codelineno-0-191></a><span class=sd>        value : Buffer</span>
</span><span id=__span-0-192><a id=__codelineno-0-192 name=__codelineno-0-192></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-193><a id=__codelineno-0-193 name=__codelineno-0-193></a>        <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=o>.</span><span class=n>to_bytes</span><span class=p>())</span>
</span><span id=__span-0-194><a id=__codelineno-0-194 name=__codelineno-0-194></a>
</span><span id=__span-0-195><a id=__codelineno-0-195 name=__codelineno-0-195></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>set_if_not_exists</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Buffer</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-196><a id=__codelineno-0-196 name=__codelineno-0-196></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-197><a id=__codelineno-0-197 name=__codelineno-0-197></a><span class=sd>        Store a key to ``value`` if the key is not already present.</span>
</span><span id=__span-0-198><a id=__codelineno-0-198 name=__codelineno-0-198></a>
</span><span id=__span-0-199><a id=__codelineno-0-199 name=__codelineno-0-199></a><span class=sd>        Parameters</span>
</span><span id=__span-0-200><a id=__codelineno-0-200 name=__codelineno-0-200></a><span class=sd>        -----------</span>
</span><span id=__span-0-201><a id=__codelineno-0-201 name=__codelineno-0-201></a><span class=sd>        key : str</span>
</span><span id=__span-0-202><a id=__codelineno-0-202 name=__codelineno-0-202></a><span class=sd>        value : Buffer</span>
</span><span id=__span-0-203><a id=__codelineno-0-203 name=__codelineno-0-203></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-204><a id=__codelineno-0-204 name=__codelineno-0-204></a>        <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>set_if_not_exists</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=o>.</span><span class=n>to_bytes</span><span class=p>())</span>
</span><span id=__span-0-205><a id=__codelineno-0-205 name=__codelineno-0-205></a>
</span><span id=__span-0-206><a id=__codelineno-0-206 name=__codelineno-0-206></a>    <span class=k>def</span> <span class=nf>set_virtual_ref</span><span class=p>(</span>
</span><span id=__span-0-207><a id=__codelineno-0-207 name=__codelineno-0-207></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-208><a id=__codelineno-0-208 name=__codelineno-0-208></a>        <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-209><a id=__codelineno-0-209 name=__codelineno-0-209></a>        <span class=n>location</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-210><a id=__codelineno-0-210 name=__codelineno-0-210></a>        <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-211><a id=__codelineno-0-211 name=__codelineno-0-211></a>        <span class=n>offset</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>
</span><span id=__span-0-212><a id=__codelineno-0-212 name=__codelineno-0-212></a>        <span class=n>length</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>
</span><span id=__span-0-213><a id=__codelineno-0-213 name=__codelineno-0-213></a>        <span class=n>checksum</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>datetime</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-214><a id=__codelineno-0-214 name=__codelineno-0-214></a>        <span class=n>validate_container</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
</span><span id=__span-0-215><a id=__codelineno-0-215 name=__codelineno-0-215></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-216><a id=__codelineno-0-216 name=__codelineno-0-216></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Store a virtual reference to a chunk.</span>
</span><span id=__span-0-217><a id=__codelineno-0-217 name=__codelineno-0-217></a>
</span><span id=__span-0-218><a id=__codelineno-0-218 name=__codelineno-0-218></a><span class=sd>        Parameters</span>
</span><span id=__span-0-219><a id=__codelineno-0-219 name=__codelineno-0-219></a><span class=sd>        ----------</span>
</span><span id=__span-0-220><a id=__codelineno-0-220 name=__codelineno-0-220></a><span class=sd>        key : str</span>
</span><span id=__span-0-221><a id=__codelineno-0-221 name=__codelineno-0-221></a><span class=sd>            The chunk to store the reference under. This is the fully qualified zarr key eg: &#39;array/c/0/0/0&#39;</span>
</span><span id=__span-0-222><a id=__codelineno-0-222 name=__codelineno-0-222></a><span class=sd>        location : str</span>
</span><span id=__span-0-223><a id=__codelineno-0-223 name=__codelineno-0-223></a><span class=sd>            The location of the chunk in storage. This is absolute path to the chunk in storage eg: &#39;s3://bucket/path/to/file.nc&#39;</span>
</span><span id=__span-0-224><a id=__codelineno-0-224 name=__codelineno-0-224></a><span class=sd>        offset : int</span>
</span><span id=__span-0-225><a id=__codelineno-0-225 name=__codelineno-0-225></a><span class=sd>            The offset in bytes from the start of the file location in storage the chunk starts at</span>
</span><span id=__span-0-226><a id=__codelineno-0-226 name=__codelineno-0-226></a><span class=sd>        length : int</span>
</span><span id=__span-0-227><a id=__codelineno-0-227 name=__codelineno-0-227></a><span class=sd>            The length of the chunk in bytes, measured from the given offset</span>
</span><span id=__span-0-228><a id=__codelineno-0-228 name=__codelineno-0-228></a><span class=sd>        checksum : str | datetime | None</span>
</span><span id=__span-0-229><a id=__codelineno-0-229 name=__codelineno-0-229></a><span class=sd>            The etag or last_medified_at field of the object</span>
</span><span id=__span-0-230><a id=__codelineno-0-230 name=__codelineno-0-230></a><span class=sd>        validate_container: bool</span>
</span><span id=__span-0-231><a id=__codelineno-0-231 name=__codelineno-0-231></a><span class=sd>            If set to true, fail for locations that don&#39;t match any existing virtual chunk container</span>
</span><span id=__span-0-232><a id=__codelineno-0-232 name=__codelineno-0-232></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-233><a id=__codelineno-0-233 name=__codelineno-0-233></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>set_virtual_ref</span><span class=p>(</span>
</span><span id=__span-0-234><a id=__codelineno-0-234 name=__codelineno-0-234></a>            <span class=n>key</span><span class=p>,</span> <span class=n>location</span><span class=p>,</span> <span class=n>offset</span><span class=p>,</span> <span class=n>length</span><span class=p>,</span> <span class=n>checksum</span><span class=p>,</span> <span class=n>validate_container</span>
</span><span id=__span-0-235><a id=__codelineno-0-235 name=__codelineno-0-235></a>        <span class=p>)</span>
</span><span id=__span-0-236><a id=__codelineno-0-236 name=__codelineno-0-236></a>
</span><span id=__span-0-237><a id=__codelineno-0-237 name=__codelineno-0-237></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-238><a id=__codelineno-0-238 name=__codelineno-0-238></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Remove a key from the store</span>
</span><span id=__span-0-239><a id=__codelineno-0-239 name=__codelineno-0-239></a>
</span><span id=__span-0-240><a id=__codelineno-0-240 name=__codelineno-0-240></a><span class=sd>        Parameters</span>
</span><span id=__span-0-241><a id=__codelineno-0-241 name=__codelineno-0-241></a><span class=sd>        ----------</span>
</span><span id=__span-0-242><a id=__codelineno-0-242 name=__codelineno-0-242></a><span class=sd>        key : str</span>
</span><span id=__span-0-243><a id=__codelineno-0-243 name=__codelineno-0-243></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-244><a id=__codelineno-0-244 name=__codelineno-0-244></a>        <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span><span id=__span-0-245><a id=__codelineno-0-245 name=__codelineno-0-245></a>
</span><span id=__span-0-246><a id=__codelineno-0-246 name=__codelineno-0-246></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>delete_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-247><a id=__codelineno-0-247 name=__codelineno-0-247></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Delete a prefix</span>
</span><span id=__span-0-248><a id=__codelineno-0-248 name=__codelineno-0-248></a>
</span><span id=__span-0-249><a id=__codelineno-0-249 name=__codelineno-0-249></a><span class=sd>        Parameters</span>
</span><span id=__span-0-250><a id=__codelineno-0-250 name=__codelineno-0-250></a><span class=sd>        ----------</span>
</span><span id=__span-0-251><a id=__codelineno-0-251 name=__codelineno-0-251></a><span class=sd>        key : str</span>
</span><span id=__span-0-252><a id=__codelineno-0-252 name=__codelineno-0-252></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-253><a id=__codelineno-0-253 name=__codelineno-0-253></a>        <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>delete_dir</span><span class=p>(</span><span class=n>prefix</span><span class=p>)</span>
</span><span id=__span-0-254><a id=__codelineno-0-254 name=__codelineno-0-254></a>
</span><span id=__span-0-255><a id=__codelineno-0-255 name=__codelineno-0-255></a>    <span class=nd>@property</span>
</span><span id=__span-0-256><a id=__codelineno-0-256 name=__codelineno-0-256></a>    <span class=k>def</span> <span class=nf>supports_partial_writes</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-0-257><a id=__codelineno-0-257 name=__codelineno-0-257></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Does the store support partial writes?&quot;&quot;&quot;</span>
</span><span id=__span-0-258><a id=__codelineno-0-258 name=__codelineno-0-258></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>supports_partial_writes</span>
</span><span id=__span-0-259><a id=__codelineno-0-259 name=__codelineno-0-259></a>
</span><span id=__span-0-260><a id=__codelineno-0-260 name=__codelineno-0-260></a>    <span class=k>async</span> <span class=k>def</span> <span class=nf>set_partial_values</span><span class=p>(</span>
</span><span id=__span-0-261><a id=__codelineno-0-261 name=__codelineno-0-261></a>        <span class=bp>self</span><span class=p>,</span> <span class=n>key_start_values</span><span class=p>:</span> <span class=n>Iterable</span><span class=p>[</span><span class=nb>tuple</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>int</span><span class=p>,</span> <span class=n>BytesLike</span><span class=p>]]</span>
</span><span id=__span-0-262><a id=__codelineno-0-262 name=__codelineno-0-262></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-263><a id=__codelineno-0-263 name=__codelineno-0-263></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Store values at a given key, starting at byte range_start.</span>
</span><span id=__span-0-264><a id=__codelineno-0-264 name=__codelineno-0-264></a>
</span><span id=__span-0-265><a id=__codelineno-0-265 name=__codelineno-0-265></a><span class=sd>        Parameters</span>
</span><span id=__span-0-266><a id=__codelineno-0-266 name=__codelineno-0-266></a><span class=sd>        ----------</span>
</span><span id=__span-0-267><a id=__codelineno-0-267 name=__codelineno-0-267></a><span class=sd>        key_start_values : list[tuple[str, int, BytesLike]]</span>
</span><span id=__span-0-268><a id=__codelineno-0-268 name=__codelineno-0-268></a><span class=sd>            set of key, range_start, values triples, a key may occur multiple times with different</span>
</span><span id=__span-0-269><a id=__codelineno-0-269 name=__codelineno-0-269></a><span class=sd>            range_starts, range_starts (considering the length of the respective values) must not</span>
</span><span id=__span-0-270><a id=__codelineno-0-270 name=__codelineno-0-270></a><span class=sd>            specify overlapping ranges for the same key</span>
</span><span id=__span-0-271><a id=__codelineno-0-271 name=__codelineno-0-271></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-272><a id=__codelineno-0-272 name=__codelineno-0-272></a>        <span class=c1># NOTE: pyo3 does not implicit conversion from an Iterable to a rust iterable. So we convert it</span>
</span><span id=__span-0-273><a id=__codelineno-0-273 name=__codelineno-0-273></a>        <span class=c1># to a list here first. Possible opportunity for optimization.</span>
</span><span id=__span-0-274><a id=__codelineno-0-274 name=__codelineno-0-274></a>        <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>set_partial_values</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>key_start_values</span><span class=p>))</span>
</span><span id=__span-0-275><a id=__codelineno-0-275 name=__codelineno-0-275></a>
</span><span id=__span-0-276><a id=__codelineno-0-276 name=__codelineno-0-276></a>    <span class=nd>@property</span>
</span><span id=__span-0-277><a id=__codelineno-0-277 name=__codelineno-0-277></a>    <span class=k>def</span> <span class=nf>supports_listing</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-0-278><a id=__codelineno-0-278 name=__codelineno-0-278></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Does the store support listing?&quot;&quot;&quot;</span>
</span><span id=__span-0-279><a id=__codelineno-0-279 name=__codelineno-0-279></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>supports_listing</span>
</span><span id=__span-0-280><a id=__codelineno-0-280 name=__codelineno-0-280></a>
</span><span id=__span-0-281><a id=__codelineno-0-281 name=__codelineno-0-281></a>    <span class=nd>@property</span>
</span><span id=__span-0-282><a id=__codelineno-0-282 name=__codelineno-0-282></a>    <span class=k>def</span> <span class=nf>supports_deletes</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-0-283><a id=__codelineno-0-283 name=__codelineno-0-283></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>supports_deletes</span>
</span><span id=__span-0-284><a id=__codelineno-0-284 name=__codelineno-0-284></a>
</span><span id=__span-0-285><a id=__codelineno-0-285 name=__codelineno-0-285></a>    <span class=k>def</span> <span class=nf>list</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AsyncIterator</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-0-286><a id=__codelineno-0-286 name=__codelineno-0-286></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Retrieve all keys in the store.</span>
</span><span id=__span-0-287><a id=__codelineno-0-287 name=__codelineno-0-287></a>
</span><span id=__span-0-288><a id=__codelineno-0-288 name=__codelineno-0-288></a><span class=sd>        Returns</span>
</span><span id=__span-0-289><a id=__codelineno-0-289 name=__codelineno-0-289></a><span class=sd>        -------</span>
</span><span id=__span-0-290><a id=__codelineno-0-290 name=__codelineno-0-290></a><span class=sd>        AsyncIterator[str, None]</span>
</span><span id=__span-0-291><a id=__codelineno-0-291 name=__codelineno-0-291></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-292><a id=__codelineno-0-292 name=__codelineno-0-292></a>        <span class=c1># This method should be async, like overridden methods in child classes.</span>
</span><span id=__span-0-293><a id=__codelineno-0-293 name=__codelineno-0-293></a>        <span class=c1># However, that&#39;s not straightforward:</span>
</span><span id=__span-0-294><a id=__codelineno-0-294 name=__codelineno-0-294></a>        <span class=c1># https://stackoverflow.com/questions/68905848</span>
</span><span id=__span-0-295><a id=__codelineno-0-295 name=__codelineno-0-295></a>
</span><span id=__span-0-296><a id=__codelineno-0-296 name=__codelineno-0-296></a>        <span class=c1># The zarr spec specefies that that this and other</span>
</span><span id=__span-0-297><a id=__codelineno-0-297 name=__codelineno-0-297></a>        <span class=c1># listing methods should not be async, so we need to</span>
</span><span id=__span-0-298><a id=__codelineno-0-298 name=__codelineno-0-298></a>        <span class=c1># wrap the async method in a sync method.</span>
</span><span id=__span-0-299><a id=__codelineno-0-299 name=__codelineno-0-299></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>list</span><span class=p>()</span>
</span><span id=__span-0-300><a id=__codelineno-0-300 name=__codelineno-0-300></a>
</span><span id=__span-0-301><a id=__codelineno-0-301 name=__codelineno-0-301></a>    <span class=k>def</span> <span class=nf>list_prefix</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AsyncIterator</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-0-302><a id=__codelineno-0-302 name=__codelineno-0-302></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Retrieve all keys in the store that begin with a given prefix. Keys are returned relative</span>
</span><span id=__span-0-303><a id=__codelineno-0-303 name=__codelineno-0-303></a><span class=sd>        to the root of the store.</span>
</span><span id=__span-0-304><a id=__codelineno-0-304 name=__codelineno-0-304></a>
</span><span id=__span-0-305><a id=__codelineno-0-305 name=__codelineno-0-305></a><span class=sd>        Parameters</span>
</span><span id=__span-0-306><a id=__codelineno-0-306 name=__codelineno-0-306></a><span class=sd>        ----------</span>
</span><span id=__span-0-307><a id=__codelineno-0-307 name=__codelineno-0-307></a><span class=sd>        prefix : str</span>
</span><span id=__span-0-308><a id=__codelineno-0-308 name=__codelineno-0-308></a>
</span><span id=__span-0-309><a id=__codelineno-0-309 name=__codelineno-0-309></a><span class=sd>        Returns</span>
</span><span id=__span-0-310><a id=__codelineno-0-310 name=__codelineno-0-310></a><span class=sd>        -------</span>
</span><span id=__span-0-311><a id=__codelineno-0-311 name=__codelineno-0-311></a><span class=sd>        AsyncIterator[str, None]</span>
</span><span id=__span-0-312><a id=__codelineno-0-312 name=__codelineno-0-312></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-313><a id=__codelineno-0-313 name=__codelineno-0-313></a>        <span class=c1># The zarr spec specefies that that this and other</span>
</span><span id=__span-0-314><a id=__codelineno-0-314 name=__codelineno-0-314></a>        <span class=c1># listing methods should not be async, so we need to</span>
</span><span id=__span-0-315><a id=__codelineno-0-315 name=__codelineno-0-315></a>        <span class=c1># wrap the async method in a sync method.</span>
</span><span id=__span-0-316><a id=__codelineno-0-316 name=__codelineno-0-316></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>list_prefix</span><span class=p>(</span><span class=n>prefix</span><span class=p>)</span>
</span><span id=__span-0-317><a id=__codelineno-0-317 name=__codelineno-0-317></a>
</span><span id=__span-0-318><a id=__codelineno-0-318 name=__codelineno-0-318></a>    <span class=k>def</span> <span class=nf>list_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AsyncIterator</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-0-319><a id=__codelineno-0-319 name=__codelineno-0-319></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-320><a id=__codelineno-0-320 name=__codelineno-0-320></a><span class=sd>        Retrieve all keys and prefixes with a given prefix and which do not contain the character</span>
</span><span id=__span-0-321><a id=__codelineno-0-321 name=__codelineno-0-321></a><span class=sd>        / after the given prefix.</span>
</span><span id=__span-0-322><a id=__codelineno-0-322 name=__codelineno-0-322></a>
</span><span id=__span-0-323><a id=__codelineno-0-323 name=__codelineno-0-323></a><span class=sd>        Parameters</span>
</span><span id=__span-0-324><a id=__codelineno-0-324 name=__codelineno-0-324></a><span class=sd>        ----------</span>
</span><span id=__span-0-325><a id=__codelineno-0-325 name=__codelineno-0-325></a><span class=sd>        prefix : str</span>
</span><span id=__span-0-326><a id=__codelineno-0-326 name=__codelineno-0-326></a>
</span><span id=__span-0-327><a id=__codelineno-0-327 name=__codelineno-0-327></a><span class=sd>        Returns</span>
</span><span id=__span-0-328><a id=__codelineno-0-328 name=__codelineno-0-328></a><span class=sd>        -------</span>
</span><span id=__span-0-329><a id=__codelineno-0-329 name=__codelineno-0-329></a><span class=sd>        AsyncIterator[str, None]</span>
</span><span id=__span-0-330><a id=__codelineno-0-330 name=__codelineno-0-330></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-331><a id=__codelineno-0-331 name=__codelineno-0-331></a>        <span class=c1># The zarr spec specefies that that this and other</span>
</span><span id=__span-0-332><a id=__codelineno-0-332 name=__codelineno-0-332></a>        <span class=c1># listing methods should not be async, so we need to</span>
</span><span id=__span-0-333><a id=__codelineno-0-333 name=__codelineno-0-333></a>        <span class=c1># wrap the async method in a sync method.</span>
</span><span id=__span-0-334><a id=__codelineno-0-334 name=__codelineno-0-334></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>list_dir</span><span class=p>(</span><span class=n>prefix</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.IcechunkStore.supports_listing class="doc doc-heading"> <code class="highlight language-python"><span class=n>supports_listing</span><span class=p>:</span> <span class=nb>bool</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Does the store support listing?</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.IcechunkStore.supports_partial_writes class="doc doc-heading"> <code class="highlight language-python"><span class=n>supports_partial_writes</span><span class=p>:</span> <span class=nb>bool</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Does the store support partial writes?</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.IcechunkStore.supports_writes class="doc doc-heading"> <code class="highlight language-python"><span class=n>supports_writes</span><span class=p>:</span> <span class=nb>bool</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Does the store support writes?</p> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.__init__ class="doc doc-heading"> <code class="highlight language-python"><span class=fm>__init__</span><span class=p>(</span><span class=n>store</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Create a new IcechunkStore.</p> <p>This should not be called directly, instead use the <code>create</code>, <code>open_existing</code> or <code>open_or_create</code> class methods.</p> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38></a><span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40></a>    <span class=n>store</span><span class=p>:</span> <span class=n>PyStore</span><span class=p>,</span>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a>    <span class=o>*</span><span class=n>args</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43></a><span class=p>):</span>
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a new IcechunkStore.</span>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45></a>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a><span class=sd>    This should not be called directly, instead use the `create`, `open_existing` or `open_or_create` class methods.</span>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a>    <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>read_only</span><span class=o>=</span><span class=n>store</span><span class=o>.</span><span class=n>read_only</span><span class=p>)</span>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a>    <span class=k>if</span> <span class=n>store</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a>            <span class=s2>&quot;An IcechunkStore should not be created with the default constructor, instead use either the create or open_existing class methods.&quot;</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a>        <span class=p>)</span>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_store</span> <span class=o>=</span> <span class=n>store</span>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_is_open</span> <span class=o>=</span> <span class=kc>True</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.clear class="doc doc-heading"> <code class="highlight language-python"><span class=n>clear</span><span class=p>()</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> </h3> <div class="doc doc-contents "> <p>Clear the store.</p> <p>This will remove all contents from the current session, including all groups and all arrays. But it will not modify the repository history.</p> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a><span class=k>async</span> <span class=k>def</span> <span class=nf>clear</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Clear the store.</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a><span class=sd>    This will remove all contents from the current session,</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a><span class=sd>    including all groups and all arrays. But it will not modify the repository history.</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.delete class="doc doc-heading"> <code class="highlight language-python"><span class=n>delete</span><span class=p>(</span><span class=n>key</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> </h3> <div class="doc doc-contents "> <p>Remove a key from the store</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-237>237</a></span>
<span class=normal><a href=#__codelineno-0-238>238</a></span>
<span class=normal><a href=#__codelineno-0-239>239</a></span>
<span class=normal><a href=#__codelineno-0-240>240</a></span>
<span class=normal><a href=#__codelineno-0-241>241</a></span>
<span class=normal><a href=#__codelineno-0-242>242</a></span>
<span class=normal><a href=#__codelineno-0-243>243</a></span>
<span class=normal><a href=#__codelineno-0-244>244</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-237><a id=__codelineno-0-237 name=__codelineno-0-237></a><span class=k>async</span> <span class=k>def</span> <span class=nf>delete</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-238><a id=__codelineno-0-238 name=__codelineno-0-238></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Remove a key from the store</span>
</span><span id=__span-0-239><a id=__codelineno-0-239 name=__codelineno-0-239></a>
</span><span id=__span-0-240><a id=__codelineno-0-240 name=__codelineno-0-240></a><span class=sd>    Parameters</span>
</span><span id=__span-0-241><a id=__codelineno-0-241 name=__codelineno-0-241></a><span class=sd>    ----------</span>
</span><span id=__span-0-242><a id=__codelineno-0-242 name=__codelineno-0-242></a><span class=sd>    key : str</span>
</span><span id=__span-0-243><a id=__codelineno-0-243 name=__codelineno-0-243></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-244><a id=__codelineno-0-244 name=__codelineno-0-244></a>    <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>delete</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.delete_dir class="doc doc-heading"> <code class="highlight language-python"><span class=n>delete_dir</span><span class=p>(</span><span class=n>prefix</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> </h3> <div class="doc doc-contents "> <p>Delete a prefix</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-246>246</a></span>
<span class=normal><a href=#__codelineno-0-247>247</a></span>
<span class=normal><a href=#__codelineno-0-248>248</a></span>
<span class=normal><a href=#__codelineno-0-249>249</a></span>
<span class=normal><a href=#__codelineno-0-250>250</a></span>
<span class=normal><a href=#__codelineno-0-251>251</a></span>
<span class=normal><a href=#__codelineno-0-252>252</a></span>
<span class=normal><a href=#__codelineno-0-253>253</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-246><a id=__codelineno-0-246 name=__codelineno-0-246></a><span class=k>async</span> <span class=k>def</span> <span class=nf>delete_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-247><a id=__codelineno-0-247 name=__codelineno-0-247></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Delete a prefix</span>
</span><span id=__span-0-248><a id=__codelineno-0-248 name=__codelineno-0-248></a>
</span><span id=__span-0-249><a id=__codelineno-0-249 name=__codelineno-0-249></a><span class=sd>    Parameters</span>
</span><span id=__span-0-250><a id=__codelineno-0-250 name=__codelineno-0-250></a><span class=sd>    ----------</span>
</span><span id=__span-0-251><a id=__codelineno-0-251 name=__codelineno-0-251></a><span class=sd>    key : str</span>
</span><span id=__span-0-252><a id=__codelineno-0-252 name=__codelineno-0-252></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-253><a id=__codelineno-0-253 name=__codelineno-0-253></a>    <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>delete_dir</span><span class=p>(</span><span class=n>prefix</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.exists class="doc doc-heading"> <code class="highlight language-python"><span class=n>exists</span><span class=p>(</span><span class=n>key</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> </h3> <div class="doc doc-contents "> <p>Check if a key exists in the store.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>bool</code> </td> <td> <div class=doc-md-description> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a><span class=k>async</span> <span class=k>def</span> <span class=nf>exists</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Check if a key exists in the store.</span>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a><span class=sd>    Parameters</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a><span class=sd>    ----------</span>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a><span class=sd>    key : str</span>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a><span class=sd>    Returns</span>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a><span class=sd>    -------</span>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a><span class=sd>    bool</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a>    <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>key</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.get class="doc doc-heading"> <code class="highlight language-python"><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>prototype</span><span class=p>,</span> <span class=n>byte_range</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> </h3> <div class="doc doc-contents "> <p>Retrieve the value associated with a given key.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>byte_range</code> </td> <td> <code>ByteRequest</code> </td> <td> <div class=doc-md-description> <p>ByteRequest may be one of the following. If not provided, all data associated with the key is retrieved.</p> <ul> <li>RangeByteRequest(int, int): Request a specific range of bytes in the form (start, end). The end is exclusive. If the given range is zero-length or starts after the end of the object, an error will be returned. Additionally, if the range ends after the end of the object, the entire remainder of the object will be returned. Otherwise, the exact requested range will be returned.</li> <li>OffsetByteRequest(int): Request all bytes starting from a given byte offset. This is equivalent to bytes={int}- as an HTTP header.</li> <li>SuffixByteRequest(int): Request the last int bytes. Note that here, int is the size of the request, not the byte offset. This is equivalent to bytes=-{int} as an HTTP header.</li> </ul> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>Buffer</code> </td> <td> <div class=doc-md-description> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a><span class=k>async</span> <span class=k>def</span> <span class=nf>get</span><span class=p>(</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a>    <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a>    <span class=n>prototype</span><span class=p>:</span> <span class=n>BufferPrototype</span><span class=p>,</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a>    <span class=n>byte_range</span><span class=p>:</span> <span class=n>ByteRequest</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Buffer</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Retrieve the value associated with a given key.</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a><span class=sd>    Parameters</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a><span class=sd>    ----------</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a><span class=sd>    key : str</span>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a><span class=sd>    byte_range : ByteRequest, optional</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a><span class=sd>        ByteRequest may be one of the following. If not provided, all data associated with the key is retrieved.</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a><span class=sd>        - RangeByteRequest(int, int): Request a specific range of bytes in the form (start, end). The end is exclusive. If the given range is zero-length or starts after the end of the object, an error will be returned. Additionally, if the range ends after the end of the object, the entire remainder of the object will be returned. Otherwise, the exact requested range will be returned.</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a><span class=sd>        - OffsetByteRequest(int): Request all bytes starting from a given byte offset. This is equivalent to bytes={int}- as an HTTP header.</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a><span class=sd>        - SuffixByteRequest(int): Request the last int bytes. Note that here, int is the size of the request, not the byte offset. This is equivalent to bytes=-{int} as an HTTP header.</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a><span class=sd>    Returns</span>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a><span class=sd>    -------</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a><span class=sd>    Buffer</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a>        <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>_byte_request_to_tuple</span><span class=p>(</span><span class=n>byte_range</span><span class=p>))</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>    <span class=k>except</span> <span class=ne>KeyError</span> <span class=k>as</span> <span class=n>_e</span><span class=p>:</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a>        <span class=c1># Zarr python expects None to be returned if the key does not exist</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a>        <span class=c1># but an IcechunkStore returns an error if the key does not exist</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>        <span class=k>return</span> <span class=kc>None</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>    <span class=k>return</span> <span class=n>prototype</span><span class=o>.</span><span class=n>buffer</span><span class=o>.</span><span class=n>from_bytes</span><span class=p>(</span><span class=n>result</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.get_partial_values class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_partial_values</span><span class=p>(</span><span class=n>prototype</span><span class=p>,</span> <span class=n>key_ranges</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> </h3> <div class="doc doc-contents "> <p>Retrieve possibly partial values from given key_ranges.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key_ranges</code> </td> <td> <code>Iterable[tuple[str, tuple[int | None, int | None]]]</code> </td> <td> <div class=doc-md-description> <p>Ordered set of key, range pairs, a key may occur multiple times with different ranges</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>list of values, in the order of the key_ranges, may contain null/none for missing keys</code> </td> <td> <div class=doc-md-description> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a><span class=k>async</span> <span class=k>def</span> <span class=nf>get_partial_values</span><span class=p>(</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a>    <span class=n>prototype</span><span class=p>:</span> <span class=n>BufferPrototype</span><span class=p>,</span>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a>    <span class=n>key_ranges</span><span class=p>:</span> <span class=n>Iterable</span><span class=p>[</span><span class=nb>tuple</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>ByteRequest</span> <span class=o>|</span> <span class=kc>None</span><span class=p>]],</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>Buffer</span> <span class=o>|</span> <span class=kc>None</span><span class=p>]:</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Retrieve possibly partial values from given key_ranges.</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a><span class=sd>    Parameters</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a><span class=sd>    ----------</span>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a><span class=sd>    key_ranges : Iterable[tuple[str, tuple[int | None, int | None]]]</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a><span class=sd>        Ordered set of key, range pairs, a key may occur multiple times with different ranges</span>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a><span class=sd>    Returns</span>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a><span class=sd>    -------</span>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a><span class=sd>    list of values, in the order of the key_ranges, may contain null/none for missing keys</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a>    <span class=c1># NOTE: pyo3 has not implicit conversion from an Iterable to a rust iterable. So we convert it</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a>    <span class=c1># to a list here first. Possible opportunity for optimization.</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a>    <span class=n>ranges</span> <span class=o>=</span> <span class=p>[(</span><span class=n>k</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>_byte_request_to_tuple</span><span class=p>(</span><span class=n>k</span><span class=p>[</span><span class=mi>1</span><span class=p>]))</span> <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=n>key_ranges</span><span class=p>]</span>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a>    <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>get_partial_values</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>ranges</span><span class=p>))</span>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a>    <span class=k>return</span> <span class=p>[</span><span class=n>prototype</span><span class=o>.</span><span class=n>buffer</span><span class=o>.</span><span class=n>from_bytes</span><span class=p>(</span><span class=n>r</span><span class=p>)</span> <span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>result</span><span class=p>]</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.is_empty class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_empty</span><span class=p>(</span><span class=n>prefix</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> </h3> <div class="doc doc-contents "> <p>Check if the directory is empty.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>prefix</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> <p>Prefix of keys to check.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>bool</code> </td> <td> <div class=doc-md-description> <p>True if the store is empty, False otherwise.</p> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a><span class=k>async</span> <span class=k>def</span> <span class=nf>is_empty</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a><span class=sd>    Check if the directory is empty.</span>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a><span class=sd>    Parameters</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a><span class=sd>    ----------</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a><span class=sd>    prefix : str</span>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a><span class=sd>        Prefix of keys to check.</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a><span class=sd>    Returns</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a><span class=sd>    -------</span>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a><span class=sd>    bool</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a><span class=sd>        True if the store is empty, False otherwise.</span>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a>    <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>is_empty</span><span class=p>(</span><span class=n>prefix</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.list class="doc doc-heading"> <code class="highlight language-python"><span class=nb>list</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Retrieve all keys in the store.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>AsyncIterator[str, None]</code> </td> <td> <div class=doc-md-description> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-285>285</a></span>
<span class=normal><a href=#__codelineno-0-286>286</a></span>
<span class=normal><a href=#__codelineno-0-287>287</a></span>
<span class=normal><a href=#__codelineno-0-288>288</a></span>
<span class=normal><a href=#__codelineno-0-289>289</a></span>
<span class=normal><a href=#__codelineno-0-290>290</a></span>
<span class=normal><a href=#__codelineno-0-291>291</a></span>
<span class=normal><a href=#__codelineno-0-292>292</a></span>
<span class=normal><a href=#__codelineno-0-293>293</a></span>
<span class=normal><a href=#__codelineno-0-294>294</a></span>
<span class=normal><a href=#__codelineno-0-295>295</a></span>
<span class=normal><a href=#__codelineno-0-296>296</a></span>
<span class=normal><a href=#__codelineno-0-297>297</a></span>
<span class=normal><a href=#__codelineno-0-298>298</a></span>
<span class=normal><a href=#__codelineno-0-299>299</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-285><a id=__codelineno-0-285 name=__codelineno-0-285></a><span class=k>def</span> <span class=nf>list</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AsyncIterator</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-0-286><a id=__codelineno-0-286 name=__codelineno-0-286></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Retrieve all keys in the store.</span>
</span><span id=__span-0-287><a id=__codelineno-0-287 name=__codelineno-0-287></a>
</span><span id=__span-0-288><a id=__codelineno-0-288 name=__codelineno-0-288></a><span class=sd>    Returns</span>
</span><span id=__span-0-289><a id=__codelineno-0-289 name=__codelineno-0-289></a><span class=sd>    -------</span>
</span><span id=__span-0-290><a id=__codelineno-0-290 name=__codelineno-0-290></a><span class=sd>    AsyncIterator[str, None]</span>
</span><span id=__span-0-291><a id=__codelineno-0-291 name=__codelineno-0-291></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-292><a id=__codelineno-0-292 name=__codelineno-0-292></a>    <span class=c1># This method should be async, like overridden methods in child classes.</span>
</span><span id=__span-0-293><a id=__codelineno-0-293 name=__codelineno-0-293></a>    <span class=c1># However, that&#39;s not straightforward:</span>
</span><span id=__span-0-294><a id=__codelineno-0-294 name=__codelineno-0-294></a>    <span class=c1># https://stackoverflow.com/questions/68905848</span>
</span><span id=__span-0-295><a id=__codelineno-0-295 name=__codelineno-0-295></a>
</span><span id=__span-0-296><a id=__codelineno-0-296 name=__codelineno-0-296></a>    <span class=c1># The zarr spec specefies that that this and other</span>
</span><span id=__span-0-297><a id=__codelineno-0-297 name=__codelineno-0-297></a>    <span class=c1># listing methods should not be async, so we need to</span>
</span><span id=__span-0-298><a id=__codelineno-0-298 name=__codelineno-0-298></a>    <span class=c1># wrap the async method in a sync method.</span>
</span><span id=__span-0-299><a id=__codelineno-0-299 name=__codelineno-0-299></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>list</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.list_dir class="doc doc-heading"> <code class="highlight language-python"><span class=n>list_dir</span><span class=p>(</span><span class=n>prefix</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Retrieve all keys and prefixes with a given prefix and which do not contain the character / after the given prefix.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>prefix</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>AsyncIterator[str, None]</code> </td> <td> <div class=doc-md-description> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-318>318</a></span>
<span class=normal><a href=#__codelineno-0-319>319</a></span>
<span class=normal><a href=#__codelineno-0-320>320</a></span>
<span class=normal><a href=#__codelineno-0-321>321</a></span>
<span class=normal><a href=#__codelineno-0-322>322</a></span>
<span class=normal><a href=#__codelineno-0-323>323</a></span>
<span class=normal><a href=#__codelineno-0-324>324</a></span>
<span class=normal><a href=#__codelineno-0-325>325</a></span>
<span class=normal><a href=#__codelineno-0-326>326</a></span>
<span class=normal><a href=#__codelineno-0-327>327</a></span>
<span class=normal><a href=#__codelineno-0-328>328</a></span>
<span class=normal><a href=#__codelineno-0-329>329</a></span>
<span class=normal><a href=#__codelineno-0-330>330</a></span>
<span class=normal><a href=#__codelineno-0-331>331</a></span>
<span class=normal><a href=#__codelineno-0-332>332</a></span>
<span class=normal><a href=#__codelineno-0-333>333</a></span>
<span class=normal><a href=#__codelineno-0-334>334</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-318><a id=__codelineno-0-318 name=__codelineno-0-318></a><span class=k>def</span> <span class=nf>list_dir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AsyncIterator</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-0-319><a id=__codelineno-0-319 name=__codelineno-0-319></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-320><a id=__codelineno-0-320 name=__codelineno-0-320></a><span class=sd>    Retrieve all keys and prefixes with a given prefix and which do not contain the character</span>
</span><span id=__span-0-321><a id=__codelineno-0-321 name=__codelineno-0-321></a><span class=sd>    / after the given prefix.</span>
</span><span id=__span-0-322><a id=__codelineno-0-322 name=__codelineno-0-322></a>
</span><span id=__span-0-323><a id=__codelineno-0-323 name=__codelineno-0-323></a><span class=sd>    Parameters</span>
</span><span id=__span-0-324><a id=__codelineno-0-324 name=__codelineno-0-324></a><span class=sd>    ----------</span>
</span><span id=__span-0-325><a id=__codelineno-0-325 name=__codelineno-0-325></a><span class=sd>    prefix : str</span>
</span><span id=__span-0-326><a id=__codelineno-0-326 name=__codelineno-0-326></a>
</span><span id=__span-0-327><a id=__codelineno-0-327 name=__codelineno-0-327></a><span class=sd>    Returns</span>
</span><span id=__span-0-328><a id=__codelineno-0-328 name=__codelineno-0-328></a><span class=sd>    -------</span>
</span><span id=__span-0-329><a id=__codelineno-0-329 name=__codelineno-0-329></a><span class=sd>    AsyncIterator[str, None]</span>
</span><span id=__span-0-330><a id=__codelineno-0-330 name=__codelineno-0-330></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-331><a id=__codelineno-0-331 name=__codelineno-0-331></a>    <span class=c1># The zarr spec specefies that that this and other</span>
</span><span id=__span-0-332><a id=__codelineno-0-332 name=__codelineno-0-332></a>    <span class=c1># listing methods should not be async, so we need to</span>
</span><span id=__span-0-333><a id=__codelineno-0-333 name=__codelineno-0-333></a>    <span class=c1># wrap the async method in a sync method.</span>
</span><span id=__span-0-334><a id=__codelineno-0-334 name=__codelineno-0-334></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>list_dir</span><span class=p>(</span><span class=n>prefix</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.list_prefix class="doc doc-heading"> <code class="highlight language-python"><span class=n>list_prefix</span><span class=p>(</span><span class=n>prefix</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Retrieve all keys in the store that begin with a given prefix. Keys are returned relative to the root of the store.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>prefix</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>AsyncIterator[str, None]</code> </td> <td> <div class=doc-md-description> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-301>301</a></span>
<span class=normal><a href=#__codelineno-0-302>302</a></span>
<span class=normal><a href=#__codelineno-0-303>303</a></span>
<span class=normal><a href=#__codelineno-0-304>304</a></span>
<span class=normal><a href=#__codelineno-0-305>305</a></span>
<span class=normal><a href=#__codelineno-0-306>306</a></span>
<span class=normal><a href=#__codelineno-0-307>307</a></span>
<span class=normal><a href=#__codelineno-0-308>308</a></span>
<span class=normal><a href=#__codelineno-0-309>309</a></span>
<span class=normal><a href=#__codelineno-0-310>310</a></span>
<span class=normal><a href=#__codelineno-0-311>311</a></span>
<span class=normal><a href=#__codelineno-0-312>312</a></span>
<span class=normal><a href=#__codelineno-0-313>313</a></span>
<span class=normal><a href=#__codelineno-0-314>314</a></span>
<span class=normal><a href=#__codelineno-0-315>315</a></span>
<span class=normal><a href=#__codelineno-0-316>316</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-301><a id=__codelineno-0-301 name=__codelineno-0-301></a><span class=k>def</span> <span class=nf>list_prefix</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AsyncIterator</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-0-302><a id=__codelineno-0-302 name=__codelineno-0-302></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Retrieve all keys in the store that begin with a given prefix. Keys are returned relative</span>
</span><span id=__span-0-303><a id=__codelineno-0-303 name=__codelineno-0-303></a><span class=sd>    to the root of the store.</span>
</span><span id=__span-0-304><a id=__codelineno-0-304 name=__codelineno-0-304></a>
</span><span id=__span-0-305><a id=__codelineno-0-305 name=__codelineno-0-305></a><span class=sd>    Parameters</span>
</span><span id=__span-0-306><a id=__codelineno-0-306 name=__codelineno-0-306></a><span class=sd>    ----------</span>
</span><span id=__span-0-307><a id=__codelineno-0-307 name=__codelineno-0-307></a><span class=sd>    prefix : str</span>
</span><span id=__span-0-308><a id=__codelineno-0-308 name=__codelineno-0-308></a>
</span><span id=__span-0-309><a id=__codelineno-0-309 name=__codelineno-0-309></a><span class=sd>    Returns</span>
</span><span id=__span-0-310><a id=__codelineno-0-310 name=__codelineno-0-310></a><span class=sd>    -------</span>
</span><span id=__span-0-311><a id=__codelineno-0-311 name=__codelineno-0-311></a><span class=sd>    AsyncIterator[str, None]</span>
</span><span id=__span-0-312><a id=__codelineno-0-312 name=__codelineno-0-312></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-313><a id=__codelineno-0-313 name=__codelineno-0-313></a>    <span class=c1># The zarr spec specefies that that this and other</span>
</span><span id=__span-0-314><a id=__codelineno-0-314 name=__codelineno-0-314></a>    <span class=c1># listing methods should not be async, so we need to</span>
</span><span id=__span-0-315><a id=__codelineno-0-315 name=__codelineno-0-315></a>    <span class=c1># wrap the async method in a sync method.</span>
</span><span id=__span-0-316><a id=__codelineno-0-316 name=__codelineno-0-316></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>list_prefix</span><span class=p>(</span><span class=n>prefix</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.set class="doc doc-heading"> <code class="highlight language-python"><span class=nb>set</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> </h3> <div class="doc doc-contents "> <p>Store a (key, value) pair.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code>Buffer</code> </td> <td> <div class=doc-md-description> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-185>185</a></span>
<span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span>
<span class=normal><a href=#__codelineno-0-190>190</a></span>
<span class=normal><a href=#__codelineno-0-191>191</a></span>
<span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-185><a id=__codelineno-0-185 name=__codelineno-0-185></a><span class=k>async</span> <span class=k>def</span> <span class=nf>set</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Buffer</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-186><a id=__codelineno-0-186 name=__codelineno-0-186></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Store a (key, value) pair.</span>
</span><span id=__span-0-187><a id=__codelineno-0-187 name=__codelineno-0-187></a>
</span><span id=__span-0-188><a id=__codelineno-0-188 name=__codelineno-0-188></a><span class=sd>    Parameters</span>
</span><span id=__span-0-189><a id=__codelineno-0-189 name=__codelineno-0-189></a><span class=sd>    ----------</span>
</span><span id=__span-0-190><a id=__codelineno-0-190 name=__codelineno-0-190></a><span class=sd>    key : str</span>
</span><span id=__span-0-191><a id=__codelineno-0-191 name=__codelineno-0-191></a><span class=sd>    value : Buffer</span>
</span><span id=__span-0-192><a id=__codelineno-0-192 name=__codelineno-0-192></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-193><a id=__codelineno-0-193 name=__codelineno-0-193></a>    <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>set</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=o>.</span><span class=n>to_bytes</span><span class=p>())</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.set_if_not_exists class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_if_not_exists</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> </h3> <div class="doc doc-contents "> <p>Store a key to <code>value</code> if the key is not already present.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>value</code> </td> <td> <code>Buffer</code> </td> <td> <div class=doc-md-description> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-195>195</a></span>
<span class=normal><a href=#__codelineno-0-196>196</a></span>
<span class=normal><a href=#__codelineno-0-197>197</a></span>
<span class=normal><a href=#__codelineno-0-198>198</a></span>
<span class=normal><a href=#__codelineno-0-199>199</a></span>
<span class=normal><a href=#__codelineno-0-200>200</a></span>
<span class=normal><a href=#__codelineno-0-201>201</a></span>
<span class=normal><a href=#__codelineno-0-202>202</a></span>
<span class=normal><a href=#__codelineno-0-203>203</a></span>
<span class=normal><a href=#__codelineno-0-204>204</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-195><a id=__codelineno-0-195 name=__codelineno-0-195></a><span class=k>async</span> <span class=k>def</span> <span class=nf>set_if_not_exists</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Buffer</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-196><a id=__codelineno-0-196 name=__codelineno-0-196></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-197><a id=__codelineno-0-197 name=__codelineno-0-197></a><span class=sd>    Store a key to ``value`` if the key is not already present.</span>
</span><span id=__span-0-198><a id=__codelineno-0-198 name=__codelineno-0-198></a>
</span><span id=__span-0-199><a id=__codelineno-0-199 name=__codelineno-0-199></a><span class=sd>    Parameters</span>
</span><span id=__span-0-200><a id=__codelineno-0-200 name=__codelineno-0-200></a><span class=sd>    -----------</span>
</span><span id=__span-0-201><a id=__codelineno-0-201 name=__codelineno-0-201></a><span class=sd>    key : str</span>
</span><span id=__span-0-202><a id=__codelineno-0-202 name=__codelineno-0-202></a><span class=sd>    value : Buffer</span>
</span><span id=__span-0-203><a id=__codelineno-0-203 name=__codelineno-0-203></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-204><a id=__codelineno-0-204 name=__codelineno-0-204></a>    <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>set_if_not_exists</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>value</span><span class=o>.</span><span class=n>to_bytes</span><span class=p>())</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.set_partial_values class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_partial_values</span><span class=p>(</span><span class=n>key_start_values</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-async"><code>async</code></small> </span> </h3> <div class="doc doc-contents "> <p>Store values at a given key, starting at byte range_start.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key_start_values</code> </td> <td> <code>list[tuple[str, int, BytesLike]]</code> </td> <td> <div class=doc-md-description> <p>set of key, range_start, values triples, a key may occur multiple times with different range_starts, range_starts (considering the length of the respective values) must not specify overlapping ranges for the same key</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-260>260</a></span>
<span class=normal><a href=#__codelineno-0-261>261</a></span>
<span class=normal><a href=#__codelineno-0-262>262</a></span>
<span class=normal><a href=#__codelineno-0-263>263</a></span>
<span class=normal><a href=#__codelineno-0-264>264</a></span>
<span class=normal><a href=#__codelineno-0-265>265</a></span>
<span class=normal><a href=#__codelineno-0-266>266</a></span>
<span class=normal><a href=#__codelineno-0-267>267</a></span>
<span class=normal><a href=#__codelineno-0-268>268</a></span>
<span class=normal><a href=#__codelineno-0-269>269</a></span>
<span class=normal><a href=#__codelineno-0-270>270</a></span>
<span class=normal><a href=#__codelineno-0-271>271</a></span>
<span class=normal><a href=#__codelineno-0-272>272</a></span>
<span class=normal><a href=#__codelineno-0-273>273</a></span>
<span class=normal><a href=#__codelineno-0-274>274</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-260><a id=__codelineno-0-260 name=__codelineno-0-260></a><span class=k>async</span> <span class=k>def</span> <span class=nf>set_partial_values</span><span class=p>(</span>
</span><span id=__span-0-261><a id=__codelineno-0-261 name=__codelineno-0-261></a>    <span class=bp>self</span><span class=p>,</span> <span class=n>key_start_values</span><span class=p>:</span> <span class=n>Iterable</span><span class=p>[</span><span class=nb>tuple</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>int</span><span class=p>,</span> <span class=n>BytesLike</span><span class=p>]]</span>
</span><span id=__span-0-262><a id=__codelineno-0-262 name=__codelineno-0-262></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-263><a id=__codelineno-0-263 name=__codelineno-0-263></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Store values at a given key, starting at byte range_start.</span>
</span><span id=__span-0-264><a id=__codelineno-0-264 name=__codelineno-0-264></a>
</span><span id=__span-0-265><a id=__codelineno-0-265 name=__codelineno-0-265></a><span class=sd>    Parameters</span>
</span><span id=__span-0-266><a id=__codelineno-0-266 name=__codelineno-0-266></a><span class=sd>    ----------</span>
</span><span id=__span-0-267><a id=__codelineno-0-267 name=__codelineno-0-267></a><span class=sd>    key_start_values : list[tuple[str, int, BytesLike]]</span>
</span><span id=__span-0-268><a id=__codelineno-0-268 name=__codelineno-0-268></a><span class=sd>        set of key, range_start, values triples, a key may occur multiple times with different</span>
</span><span id=__span-0-269><a id=__codelineno-0-269 name=__codelineno-0-269></a><span class=sd>        range_starts, range_starts (considering the length of the respective values) must not</span>
</span><span id=__span-0-270><a id=__codelineno-0-270 name=__codelineno-0-270></a><span class=sd>        specify overlapping ranges for the same key</span>
</span><span id=__span-0-271><a id=__codelineno-0-271 name=__codelineno-0-271></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-272><a id=__codelineno-0-272 name=__codelineno-0-272></a>    <span class=c1># NOTE: pyo3 does not implicit conversion from an Iterable to a rust iterable. So we convert it</span>
</span><span id=__span-0-273><a id=__codelineno-0-273 name=__codelineno-0-273></a>    <span class=c1># to a list here first. Possible opportunity for optimization.</span>
</span><span id=__span-0-274><a id=__codelineno-0-274 name=__codelineno-0-274></a>    <span class=k>return</span> <span class=k>await</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>set_partial_values</span><span class=p>(</span><span class=nb>list</span><span class=p>(</span><span class=n>key_start_values</span><span class=p>))</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.set_virtual_ref class="doc doc-heading"> <code class="highlight language-python"><span class=n>set_virtual_ref</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=n>location</span><span class=p>,</span> <span class=o>*</span><span class=p>,</span> <span class=n>offset</span><span class=p>,</span> <span class=n>length</span><span class=p>,</span> <span class=n>checksum</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>validate_container</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Store a virtual reference to a chunk.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>key</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> <p>The chunk to store the reference under. This is the fully qualified zarr key eg: 'array/c/0/0/0'</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>location</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> <p>The location of the chunk in storage. This is absolute path to the chunk in storage eg: 's3://bucket/path/to/file.nc'</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>offset</code> </td> <td> <code>int</code> </td> <td> <div class=doc-md-description> <p>The offset in bytes from the start of the file location in storage the chunk starts at</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>length</code> </td> <td> <code>int</code> </td> <td> <div class=doc-md-description> <p>The length of the chunk in bytes, measured from the given offset</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>checksum</code> </td> <td> <code>str | datetime | None</code> </td> <td> <div class=doc-md-description> <p>The etag or last_medified_at field of the object</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>validate_container</code> </td> <td> <code>bool</code> </td> <td> <div class=doc-md-description> <p>If set to true, fail for locations that don't match any existing virtual chunk container</p> </div> </td> <td> <code>False</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-206>206</a></span>
<span class=normal><a href=#__codelineno-0-207>207</a></span>
<span class=normal><a href=#__codelineno-0-208>208</a></span>
<span class=normal><a href=#__codelineno-0-209>209</a></span>
<span class=normal><a href=#__codelineno-0-210>210</a></span>
<span class=normal><a href=#__codelineno-0-211>211</a></span>
<span class=normal><a href=#__codelineno-0-212>212</a></span>
<span class=normal><a href=#__codelineno-0-213>213</a></span>
<span class=normal><a href=#__codelineno-0-214>214</a></span>
<span class=normal><a href=#__codelineno-0-215>215</a></span>
<span class=normal><a href=#__codelineno-0-216>216</a></span>
<span class=normal><a href=#__codelineno-0-217>217</a></span>
<span class=normal><a href=#__codelineno-0-218>218</a></span>
<span class=normal><a href=#__codelineno-0-219>219</a></span>
<span class=normal><a href=#__codelineno-0-220>220</a></span>
<span class=normal><a href=#__codelineno-0-221>221</a></span>
<span class=normal><a href=#__codelineno-0-222>222</a></span>
<span class=normal><a href=#__codelineno-0-223>223</a></span>
<span class=normal><a href=#__codelineno-0-224>224</a></span>
<span class=normal><a href=#__codelineno-0-225>225</a></span>
<span class=normal><a href=#__codelineno-0-226>226</a></span>
<span class=normal><a href=#__codelineno-0-227>227</a></span>
<span class=normal><a href=#__codelineno-0-228>228</a></span>
<span class=normal><a href=#__codelineno-0-229>229</a></span>
<span class=normal><a href=#__codelineno-0-230>230</a></span>
<span class=normal><a href=#__codelineno-0-231>231</a></span>
<span class=normal><a href=#__codelineno-0-232>232</a></span>
<span class=normal><a href=#__codelineno-0-233>233</a></span>
<span class=normal><a href=#__codelineno-0-234>234</a></span>
<span class=normal><a href=#__codelineno-0-235>235</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-206><a id=__codelineno-0-206 name=__codelineno-0-206></a><span class=k>def</span> <span class=nf>set_virtual_ref</span><span class=p>(</span>
</span><span id=__span-0-207><a id=__codelineno-0-207 name=__codelineno-0-207></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-208><a id=__codelineno-0-208 name=__codelineno-0-208></a>    <span class=n>key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-209><a id=__codelineno-0-209 name=__codelineno-0-209></a>    <span class=n>location</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-210><a id=__codelineno-0-210 name=__codelineno-0-210></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-211><a id=__codelineno-0-211 name=__codelineno-0-211></a>    <span class=n>offset</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>
</span><span id=__span-0-212><a id=__codelineno-0-212 name=__codelineno-0-212></a>    <span class=n>length</span><span class=p>:</span> <span class=nb>int</span><span class=p>,</span>
</span><span id=__span-0-213><a id=__codelineno-0-213 name=__codelineno-0-213></a>    <span class=n>checksum</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>datetime</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-214><a id=__codelineno-0-214 name=__codelineno-0-214></a>    <span class=n>validate_container</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
</span><span id=__span-0-215><a id=__codelineno-0-215 name=__codelineno-0-215></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-216><a id=__codelineno-0-216 name=__codelineno-0-216></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Store a virtual reference to a chunk.</span>
</span><span id=__span-0-217><a id=__codelineno-0-217 name=__codelineno-0-217></a>
</span><span id=__span-0-218><a id=__codelineno-0-218 name=__codelineno-0-218></a><span class=sd>    Parameters</span>
</span><span id=__span-0-219><a id=__codelineno-0-219 name=__codelineno-0-219></a><span class=sd>    ----------</span>
</span><span id=__span-0-220><a id=__codelineno-0-220 name=__codelineno-0-220></a><span class=sd>    key : str</span>
</span><span id=__span-0-221><a id=__codelineno-0-221 name=__codelineno-0-221></a><span class=sd>        The chunk to store the reference under. This is the fully qualified zarr key eg: &#39;array/c/0/0/0&#39;</span>
</span><span id=__span-0-222><a id=__codelineno-0-222 name=__codelineno-0-222></a><span class=sd>    location : str</span>
</span><span id=__span-0-223><a id=__codelineno-0-223 name=__codelineno-0-223></a><span class=sd>        The location of the chunk in storage. This is absolute path to the chunk in storage eg: &#39;s3://bucket/path/to/file.nc&#39;</span>
</span><span id=__span-0-224><a id=__codelineno-0-224 name=__codelineno-0-224></a><span class=sd>    offset : int</span>
</span><span id=__span-0-225><a id=__codelineno-0-225 name=__codelineno-0-225></a><span class=sd>        The offset in bytes from the start of the file location in storage the chunk starts at</span>
</span><span id=__span-0-226><a id=__codelineno-0-226 name=__codelineno-0-226></a><span class=sd>    length : int</span>
</span><span id=__span-0-227><a id=__codelineno-0-227 name=__codelineno-0-227></a><span class=sd>        The length of the chunk in bytes, measured from the given offset</span>
</span><span id=__span-0-228><a id=__codelineno-0-228 name=__codelineno-0-228></a><span class=sd>    checksum : str | datetime | None</span>
</span><span id=__span-0-229><a id=__codelineno-0-229 name=__codelineno-0-229></a><span class=sd>        The etag or last_medified_at field of the object</span>
</span><span id=__span-0-230><a id=__codelineno-0-230 name=__codelineno-0-230></a><span class=sd>    validate_container: bool</span>
</span><span id=__span-0-231><a id=__codelineno-0-231 name=__codelineno-0-231></a><span class=sd>        If set to true, fail for locations that don&#39;t match any existing virtual chunk container</span>
</span><span id=__span-0-232><a id=__codelineno-0-232 name=__codelineno-0-232></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-233><a id=__codelineno-0-233 name=__codelineno-0-233></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>set_virtual_ref</span><span class=p>(</span>
</span><span id=__span-0-234><a id=__codelineno-0-234 name=__codelineno-0-234></a>        <span class=n>key</span><span class=p>,</span> <span class=n>location</span><span class=p>,</span> <span class=n>offset</span><span class=p>,</span> <span class=n>length</span><span class=p>,</span> <span class=n>checksum</span><span class=p>,</span> <span class=n>validate_container</span>
</span><span id=__span-0-235><a id=__codelineno-0-235 name=__codelineno-0-235></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.IcechunkStore.sync_clear class="doc doc-heading"> <code class="highlight language-python"><span class=n>sync_clear</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Clear the store.</p> <p>This will remove all contents from the current session, including all groups and all arrays. But it will not modify the repository history.</p> <details class=quote> <summary>Source code in <code>icechunk/store.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-88>88</a></span>
<span class=normal><a href=#__codelineno-0-89>89</a></span>
<span class=normal><a href=#__codelineno-0-90>90</a></span>
<span class=normal><a href=#__codelineno-0-91>91</a></span>
<span class=normal><a href=#__codelineno-0-92>92</a></span>
<span class=normal><a href=#__codelineno-0-93>93</a></span>
<span class=normal><a href=#__codelineno-0-94>94</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a><span class=k>def</span> <span class=nf>sync_clear</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Clear the store.</span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a><span class=sd>    This will remove all contents from the current session,</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a><span class=sd>    including all groups and all arrays. But it will not modify the repository history.</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_store</span><span class=o>.</span><span class=n>sync_clear</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.RebaseFailedData class="doc doc-heading"> <code>RebaseFailedData</code> </h2> <div class="doc doc-contents "> <p>Data class for rebase failed errors. This describes the error that occurred when rebasing a session</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-581>581</a></span>
<span class=normal><a href=#__codelineno-0-582>582</a></span>
<span class=normal><a href=#__codelineno-0-583>583</a></span>
<span class=normal><a href=#__codelineno-0-584>584</a></span>
<span class=normal><a href=#__codelineno-0-585>585</a></span>
<span class=normal><a href=#__codelineno-0-586>586</a></span>
<span class=normal><a href=#__codelineno-0-587>587</a></span>
<span class=normal><a href=#__codelineno-0-588>588</a></span>
<span class=normal><a href=#__codelineno-0-589>589</a></span>
<span class=normal><a href=#__codelineno-0-590>590</a></span>
<span class=normal><a href=#__codelineno-0-591>591</a></span>
<span class=normal><a href=#__codelineno-0-592>592</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-581><a id=__codelineno-0-581 name=__codelineno-0-581></a><span class=k>class</span> <span class=nc>RebaseFailedData</span><span class=p>:</span>
</span><span id=__span-0-582><a id=__codelineno-0-582 name=__codelineno-0-582></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Data class for rebase failed errors. This describes the error that occurred when rebasing a session&quot;&quot;&quot;</span>
</span><span id=__span-0-583><a id=__codelineno-0-583 name=__codelineno-0-583></a>
</span><span id=__span-0-584><a id=__codelineno-0-584 name=__codelineno-0-584></a>    <span class=nd>@property</span>
</span><span id=__span-0-585><a id=__codelineno-0-585 name=__codelineno-0-585></a>    <span class=k>def</span> <span class=nf>snapshot</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-586><a id=__codelineno-0-586 name=__codelineno-0-586></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;The snapshot ID that the session was rebased to&quot;&quot;&quot;</span>
</span><span id=__span-0-587><a id=__codelineno-0-587 name=__codelineno-0-587></a>        <span class=o>...</span>
</span><span id=__span-0-588><a id=__codelineno-0-588 name=__codelineno-0-588></a>
</span><span id=__span-0-589><a id=__codelineno-0-589 name=__codelineno-0-589></a>    <span class=nd>@property</span>
</span><span id=__span-0-590><a id=__codelineno-0-590 name=__codelineno-0-590></a>    <span class=k>def</span> <span class=nf>conflicts</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>Conflict</span><span class=p>]:</span>
</span><span id=__span-0-591><a id=__codelineno-0-591 name=__codelineno-0-591></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;The conflicts that occurred during the rebase operation&quot;&quot;&quot;</span>
</span><span id=__span-0-592><a id=__codelineno-0-592 name=__codelineno-0-592></a>        <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.RebaseFailedData.conflicts class="doc doc-heading"> <code class="highlight language-python"><span class=n>conflicts</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>Conflict</span><span class=p>]</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>The conflicts that occurred during the rebase operation</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.RebaseFailedData.snapshot class="doc doc-heading"> <code class="highlight language-python"><span class=n>snapshot</span><span class=p>:</span> <span class=nb>str</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>The snapshot ID that the session was rebased to</p> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.RebaseFailedError class="doc doc-heading"> <code>RebaseFailedError</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code>Exception</code></p> <p>Error raised when a rebase operation fails.</p> <details class=quote> <summary>Source code in <code>icechunk/session.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span>
<span class=normal><a href=#__codelineno-0-66>66</a></span>
<span class=normal><a href=#__codelineno-0-67>67</a></span>
<span class=normal><a href=#__codelineno-0-68>68</a></span>
<span class=normal><a href=#__codelineno-0-69>69</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a><span class=k>class</span> <span class=nc>RebaseFailedError</span><span class=p>(</span><span class=ne>Exception</span><span class=p>):</span>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Error raised when a rebase operation fails.&quot;&quot;&quot;</span>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a>    <span class=n>_error</span><span class=p>:</span> <span class=n>RebaseFailedData</span>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>error</span><span class=p>:</span> <span class=n>PyRebaseFailedError</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_error</span> <span class=o>=</span> <span class=n>error</span><span class=o>.</span><span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a>    <span class=k>def</span> <span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a>        <span class=k>return</span> <span class=nb>str</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_error</span><span class=p>)</span>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a>    <span class=nd>@property</span>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a>    <span class=k>def</span> <span class=nf>snapshot_id</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a><span class=sd>        The snapshot ID that the rebase operation failed on.</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_error</span><span class=o>.</span><span class=n>snapshot</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a>    <span class=nd>@property</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a>    <span class=k>def</span> <span class=nf>conflicts</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>Conflict</span><span class=p>]:</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a><span class=sd>        List of conflicts that occurred during the rebase operation.</span>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_error</span><span class=o>.</span><span class=n>conflicts</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.RebaseFailedError.conflicts class="doc doc-heading"> <code class="highlight language-python"><span class=n>conflicts</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>Conflict</span><span class=p>]</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>List of conflicts that occurred during the rebase operation.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.RebaseFailedError.snapshot_id class="doc doc-heading"> <code class="highlight language-python"><span class=n>snapshot_id</span><span class=p>:</span> <span class=nb>str</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>The snapshot ID that the rebase operation failed on.</p> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.Repository class="doc doc-heading"> <code>Repository</code> </h2> <div class="doc doc-contents "> <p>An Icechunk repository.</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-13> 13</a></span>
<span class=normal><a href=#__codelineno-0-14> 14</a></span>
<span class=normal><a href=#__codelineno-0-15> 15</a></span>
<span class=normal><a href=#__codelineno-0-16> 16</a></span>
<span class=normal><a href=#__codelineno-0-17> 17</a></span>
<span class=normal><a href=#__codelineno-0-18> 18</a></span>
<span class=normal><a href=#__codelineno-0-19> 19</a></span>
<span class=normal><a href=#__codelineno-0-20> 20</a></span>
<span class=normal><a href=#__codelineno-0-21> 21</a></span>
<span class=normal><a href=#__codelineno-0-22> 22</a></span>
<span class=normal><a href=#__codelineno-0-23> 23</a></span>
<span class=normal><a href=#__codelineno-0-24> 24</a></span>
<span class=normal><a href=#__codelineno-0-25> 25</a></span>
<span class=normal><a href=#__codelineno-0-26> 26</a></span>
<span class=normal><a href=#__codelineno-0-27> 27</a></span>
<span class=normal><a href=#__codelineno-0-28> 28</a></span>
<span class=normal><a href=#__codelineno-0-29> 29</a></span>
<span class=normal><a href=#__codelineno-0-30> 30</a></span>
<span class=normal><a href=#__codelineno-0-31> 31</a></span>
<span class=normal><a href=#__codelineno-0-32> 32</a></span>
<span class=normal><a href=#__codelineno-0-33> 33</a></span>
<span class=normal><a href=#__codelineno-0-34> 34</a></span>
<span class=normal><a href=#__codelineno-0-35> 35</a></span>
<span class=normal><a href=#__codelineno-0-36> 36</a></span>
<span class=normal><a href=#__codelineno-0-37> 37</a></span>
<span class=normal><a href=#__codelineno-0-38> 38</a></span>
<span class=normal><a href=#__codelineno-0-39> 39</a></span>
<span class=normal><a href=#__codelineno-0-40> 40</a></span>
<span class=normal><a href=#__codelineno-0-41> 41</a></span>
<span class=normal><a href=#__codelineno-0-42> 42</a></span>
<span class=normal><a href=#__codelineno-0-43> 43</a></span>
<span class=normal><a href=#__codelineno-0-44> 44</a></span>
<span class=normal><a href=#__codelineno-0-45> 45</a></span>
<span class=normal><a href=#__codelineno-0-46> 46</a></span>
<span class=normal><a href=#__codelineno-0-47> 47</a></span>
<span class=normal><a href=#__codelineno-0-48> 48</a></span>
<span class=normal><a href=#__codelineno-0-49> 49</a></span>
<span class=normal><a href=#__codelineno-0-50> 50</a></span>
<span class=normal><a href=#__codelineno-0-51> 51</a></span>
<span class=normal><a href=#__codelineno-0-52> 52</a></span>
<span class=normal><a href=#__codelineno-0-53> 53</a></span>
<span class=normal><a href=#__codelineno-0-54> 54</a></span>
<span class=normal><a href=#__codelineno-0-55> 55</a></span>
<span class=normal><a href=#__codelineno-0-56> 56</a></span>
<span class=normal><a href=#__codelineno-0-57> 57</a></span>
<span class=normal><a href=#__codelineno-0-58> 58</a></span>
<span class=normal><a href=#__codelineno-0-59> 59</a></span>
<span class=normal><a href=#__codelineno-0-60> 60</a></span>
<span class=normal><a href=#__codelineno-0-61> 61</a></span>
<span class=normal><a href=#__codelineno-0-62> 62</a></span>
<span class=normal><a href=#__codelineno-0-63> 63</a></span>
<span class=normal><a href=#__codelineno-0-64> 64</a></span>
<span class=normal><a href=#__codelineno-0-65> 65</a></span>
<span class=normal><a href=#__codelineno-0-66> 66</a></span>
<span class=normal><a href=#__codelineno-0-67> 67</a></span>
<span class=normal><a href=#__codelineno-0-68> 68</a></span>
<span class=normal><a href=#__codelineno-0-69> 69</a></span>
<span class=normal><a href=#__codelineno-0-70> 70</a></span>
<span class=normal><a href=#__codelineno-0-71> 71</a></span>
<span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span>
<span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span>
<span class=normal><a href=#__codelineno-0-185>185</a></span>
<span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span>
<span class=normal><a href=#__codelineno-0-190>190</a></span>
<span class=normal><a href=#__codelineno-0-191>191</a></span>
<span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span>
<span class=normal><a href=#__codelineno-0-194>194</a></span>
<span class=normal><a href=#__codelineno-0-195>195</a></span>
<span class=normal><a href=#__codelineno-0-196>196</a></span>
<span class=normal><a href=#__codelineno-0-197>197</a></span>
<span class=normal><a href=#__codelineno-0-198>198</a></span>
<span class=normal><a href=#__codelineno-0-199>199</a></span>
<span class=normal><a href=#__codelineno-0-200>200</a></span>
<span class=normal><a href=#__codelineno-0-201>201</a></span>
<span class=normal><a href=#__codelineno-0-202>202</a></span>
<span class=normal><a href=#__codelineno-0-203>203</a></span>
<span class=normal><a href=#__codelineno-0-204>204</a></span>
<span class=normal><a href=#__codelineno-0-205>205</a></span>
<span class=normal><a href=#__codelineno-0-206>206</a></span>
<span class=normal><a href=#__codelineno-0-207>207</a></span>
<span class=normal><a href=#__codelineno-0-208>208</a></span>
<span class=normal><a href=#__codelineno-0-209>209</a></span>
<span class=normal><a href=#__codelineno-0-210>210</a></span>
<span class=normal><a href=#__codelineno-0-211>211</a></span>
<span class=normal><a href=#__codelineno-0-212>212</a></span>
<span class=normal><a href=#__codelineno-0-213>213</a></span>
<span class=normal><a href=#__codelineno-0-214>214</a></span>
<span class=normal><a href=#__codelineno-0-215>215</a></span>
<span class=normal><a href=#__codelineno-0-216>216</a></span>
<span class=normal><a href=#__codelineno-0-217>217</a></span>
<span class=normal><a href=#__codelineno-0-218>218</a></span>
<span class=normal><a href=#__codelineno-0-219>219</a></span>
<span class=normal><a href=#__codelineno-0-220>220</a></span>
<span class=normal><a href=#__codelineno-0-221>221</a></span>
<span class=normal><a href=#__codelineno-0-222>222</a></span>
<span class=normal><a href=#__codelineno-0-223>223</a></span>
<span class=normal><a href=#__codelineno-0-224>224</a></span>
<span class=normal><a href=#__codelineno-0-225>225</a></span>
<span class=normal><a href=#__codelineno-0-226>226</a></span>
<span class=normal><a href=#__codelineno-0-227>227</a></span>
<span class=normal><a href=#__codelineno-0-228>228</a></span>
<span class=normal><a href=#__codelineno-0-229>229</a></span>
<span class=normal><a href=#__codelineno-0-230>230</a></span>
<span class=normal><a href=#__codelineno-0-231>231</a></span>
<span class=normal><a href=#__codelineno-0-232>232</a></span>
<span class=normal><a href=#__codelineno-0-233>233</a></span>
<span class=normal><a href=#__codelineno-0-234>234</a></span>
<span class=normal><a href=#__codelineno-0-235>235</a></span>
<span class=normal><a href=#__codelineno-0-236>236</a></span>
<span class=normal><a href=#__codelineno-0-237>237</a></span>
<span class=normal><a href=#__codelineno-0-238>238</a></span>
<span class=normal><a href=#__codelineno-0-239>239</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13></a><span class=k>class</span> <span class=nc>Repository</span><span class=p>:</span>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;An Icechunk repository.&quot;&quot;&quot;</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15></a>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16></a>    <span class=n>_repository</span><span class=p>:</span> <span class=n>PyRepository</span>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17></a>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>repository</span><span class=p>:</span> <span class=n>PyRepository</span><span class=p>):</span>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span> <span class=o>=</span> <span class=n>repository</span>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20></a>
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21></a>    <span class=nd>@classmethod</span>
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22></a>    <span class=k>def</span> <span class=nf>create</span><span class=p>(</span>
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23></a>        <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24></a>        <span class=n>storage</span><span class=p>:</span> <span class=n>Storage</span><span class=p>,</span>
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25></a>        <span class=n>config</span><span class=p>:</span> <span class=n>RepositoryConfig</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26></a>        <span class=n>virtual_chunk_credentials</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>AnyCredential</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Self</span><span class=p>:</span>
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Create a new Icechunk repository.</span>
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29></a>
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30></a><span class=sd>        If one already exists at the given store location, an error will be raised.</span>
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31></a>
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32></a><span class=sd>        Args:</span>
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33></a><span class=sd>            storage: The storage configuration for the repository.</span>
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34></a><span class=sd>            config: The repository configuration. If not provided, a default configuration will be used.</span>
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36></a>        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37></a>            <span class=n>PyRepository</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38></a>                <span class=n>storage</span><span class=p>,</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39></a>                <span class=n>config</span><span class=o>=</span><span class=n>config</span><span class=p>,</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40></a>                <span class=n>virtual_chunk_credentials</span><span class=o>=</span><span class=n>virtual_chunk_credentials</span><span class=p>,</span>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a>            <span class=p>)</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a>        <span class=p>)</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43></a>
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44></a>    <span class=nd>@classmethod</span>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45></a>    <span class=k>def</span> <span class=nf>open</span><span class=p>(</span>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a>        <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a>        <span class=n>storage</span><span class=p>:</span> <span class=n>Storage</span><span class=p>,</span>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a>        <span class=n>config</span><span class=p>:</span> <span class=n>RepositoryConfig</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a>        <span class=n>virtual_chunk_credentials</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>AnyCredential</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Self</span><span class=p>:</span>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Open an existing Icechunk repository.</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a><span class=sd>        If no repository exists at the given storage location, an error will be raised.</span>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a><span class=sd>        Args:</span>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a><span class=sd>            storage: The storage configuration for the repository.</span>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a><span class=sd>            config: The repository settings. If not provided, a default configuration will be</span>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a><span class=sd>            loaded from the repository</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a>        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a>            <span class=n>PyRepository</span><span class=o>.</span><span class=n>open</span><span class=p>(</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a>                <span class=n>storage</span><span class=p>,</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a>                <span class=n>config</span><span class=o>=</span><span class=n>config</span><span class=p>,</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a>                <span class=n>virtual_chunk_credentials</span><span class=o>=</span><span class=n>virtual_chunk_credentials</span><span class=p>,</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a>            <span class=p>)</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a>        <span class=p>)</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a>    <span class=nd>@classmethod</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a>    <span class=k>def</span> <span class=nf>open_or_create</span><span class=p>(</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a>        <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a>        <span class=n>storage</span><span class=p>:</span> <span class=n>Storage</span><span class=p>,</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a>        <span class=n>config</span><span class=p>:</span> <span class=n>RepositoryConfig</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a>        <span class=n>virtual_chunk_credentials</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>AnyCredential</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Self</span><span class=p>:</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Open an existing Icechunk repository or create a new one if it does not exist.</span>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a><span class=sd>        Args:</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a><span class=sd>            storage: The storage configuration for the repository.</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a><span class=sd>            config: The repository settings. If not provided, a default configuration will be</span>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a><span class=sd>            loaded from the repository</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a>        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a>            <span class=n>PyRepository</span><span class=o>.</span><span class=n>open_or_create</span><span class=p>(</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a>                <span class=n>storage</span><span class=p>,</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a>                <span class=n>config</span><span class=o>=</span><span class=n>config</span><span class=p>,</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a>                <span class=n>virtual_chunk_credentials</span><span class=o>=</span><span class=n>virtual_chunk_credentials</span><span class=p>,</span>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a>            <span class=p>)</span>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a>        <span class=p>)</span>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a>    <span class=nd>@staticmethod</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a>    <span class=k>def</span> <span class=nf>exists</span><span class=p>(</span><span class=n>storage</span><span class=p>:</span> <span class=n>Storage</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Check if a repository exists at the given storage location.</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a><span class=sd>        Args:</span>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a><span class=sd>            storage: The storage configuration for the repository.</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a>        <span class=k>return</span> <span class=n>PyRepository</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>storage</span><span class=p>)</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a>    <span class=nd>@staticmethod</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a>    <span class=k>def</span> <span class=nf>fetch_config</span><span class=p>(</span><span class=n>storage</span><span class=p>:</span> <span class=n>Storage</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>RepositoryConfig</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Fetch the configuration for the repository saved in storage&quot;&quot;&quot;</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a>        <span class=k>return</span> <span class=n>PyRepository</span><span class=o>.</span><span class=n>fetch_config</span><span class=p>(</span><span class=n>storage</span><span class=p>)</span>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a>    <span class=k>def</span> <span class=nf>save_config</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Save the repository configuration to storage, this configuration will be used in future calls to Repository.open.&quot;&quot;&quot;</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>save_config</span><span class=p>()</span>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a>    <span class=k>def</span> <span class=nf>ancestry</span><span class=p>(</span>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a>        <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a>        <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a>        <span class=n>tag</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a>        <span class=n>snapshot</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>SnapshotMetadata</span><span class=p>]:</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Get the ancestry of a snapshot.</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a><span class=sd>        Args:</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a><span class=sd>            branch: The branch to get the ancestry of.</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a><span class=sd>            tag: The tag to get the ancestry of.</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a><span class=sd>            snapshot: The snapshot ID to get the ancestry of.</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a><span class=sd>        Returns:</span>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a><span class=sd>            list[SnapshotMetadata]: The ancestry of the snapshot, listing out the snapshots and their metadata</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a><span class=sd>        Only one of the arguments can be specified.</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>ancestry</span><span class=p>(</span><span class=n>branch</span><span class=o>=</span><span class=n>branch</span><span class=p>,</span> <span class=n>tag</span><span class=o>=</span><span class=n>tag</span><span class=p>,</span> <span class=n>snapshot</span><span class=o>=</span><span class=n>snapshot</span><span class=p>)</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a>    <span class=k>def</span> <span class=nf>create_branch</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Create a new branch at the given snapshot.</span>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a><span class=sd>        Args:</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a><span class=sd>            branch: The name of the branch to create.</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a><span class=sd>            snapshot_id: The snapshot ID to create the branch at.</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>create_branch</span><span class=p>(</span><span class=n>branch</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>)</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>    <span class=k>def</span> <span class=nf>list_branches</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>set</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;List the branches in the repository.&quot;&quot;&quot;</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>list_branches</span><span class=p>()</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>    <span class=k>def</span> <span class=nf>lookup_branch</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Get the tip snapshot ID of a branch.</span>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a><span class=sd>        Args:</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a><span class=sd>            branch: The branch to get the tip of.</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a><span class=sd>        Returns:</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a><span class=sd>            str: The snapshot ID of the tip of the branch</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>lookup_branch</span><span class=p>(</span><span class=n>branch</span><span class=p>)</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a>    <span class=k>def</span> <span class=nf>reset_branch</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Reset a branch to a specific snapshot.</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a><span class=sd>        This will permanently alter the history of the branch such that the tip of</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a><span class=sd>        the branch is the specified snapshot.</span>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a><span class=sd>        Args:</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a><span class=sd>            branch: The branch to reset.</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a><span class=sd>            snapshot_id: The snapshot ID to reset the branch to.</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>reset_branch</span><span class=p>(</span><span class=n>branch</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>)</span>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a>    <span class=k>def</span> <span class=nf>delete_branch</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Delete a branch.</span>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a><span class=sd>        Args:</span>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a><span class=sd>            branch: The branch to delete.</span>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>delete_branch</span><span class=p>(</span><span class=n>branch</span><span class=p>)</span>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a>    <span class=k>def</span> <span class=nf>create_tag</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tag</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Create a new tag at the given snapshot.</span>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a><span class=sd>        Args:</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a><span class=sd>            tag: The name of the tag to create.</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a><span class=sd>            snapshot_id: The snapshot ID to create the tag at.</span>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-180><a id=__codelineno-0-180 name=__codelineno-0-180></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>create_tag</span><span class=p>(</span><span class=n>tag</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>)</span>
</span><span id=__span-0-181><a id=__codelineno-0-181 name=__codelineno-0-181></a>
</span><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182></a>    <span class=k>def</span> <span class=nf>list_tags</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>set</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;List the tags in the repository.&quot;&quot;&quot;</span>
</span><span id=__span-0-184><a id=__codelineno-0-184 name=__codelineno-0-184></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>list_tags</span><span class=p>()</span>
</span><span id=__span-0-185><a id=__codelineno-0-185 name=__codelineno-0-185></a>
</span><span id=__span-0-186><a id=__codelineno-0-186 name=__codelineno-0-186></a>    <span class=k>def</span> <span class=nf>lookup_tag</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tag</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-187><a id=__codelineno-0-187 name=__codelineno-0-187></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Get the snapshot ID of a tag.</span>
</span><span id=__span-0-188><a id=__codelineno-0-188 name=__codelineno-0-188></a>
</span><span id=__span-0-189><a id=__codelineno-0-189 name=__codelineno-0-189></a><span class=sd>        Args:</span>
</span><span id=__span-0-190><a id=__codelineno-0-190 name=__codelineno-0-190></a><span class=sd>            tag: The tag to get the snapshot ID of.</span>
</span><span id=__span-0-191><a id=__codelineno-0-191 name=__codelineno-0-191></a>
</span><span id=__span-0-192><a id=__codelineno-0-192 name=__codelineno-0-192></a><span class=sd>        Returns:</span>
</span><span id=__span-0-193><a id=__codelineno-0-193 name=__codelineno-0-193></a><span class=sd>            str: The snapshot ID of the tag.</span>
</span><span id=__span-0-194><a id=__codelineno-0-194 name=__codelineno-0-194></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-195><a id=__codelineno-0-195 name=__codelineno-0-195></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>lookup_tag</span><span class=p>(</span><span class=n>tag</span><span class=p>)</span>
</span><span id=__span-0-196><a id=__codelineno-0-196 name=__codelineno-0-196></a>
</span><span id=__span-0-197><a id=__codelineno-0-197 name=__codelineno-0-197></a>    <span class=k>def</span> <span class=nf>readonly_session</span><span class=p>(</span>
</span><span id=__span-0-198><a id=__codelineno-0-198 name=__codelineno-0-198></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-199><a id=__codelineno-0-199 name=__codelineno-0-199></a>        <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-200><a id=__codelineno-0-200 name=__codelineno-0-200></a>        <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-201><a id=__codelineno-0-201 name=__codelineno-0-201></a>        <span class=n>tag</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-202><a id=__codelineno-0-202 name=__codelineno-0-202></a>        <span class=n>snapshot</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-203><a id=__codelineno-0-203 name=__codelineno-0-203></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Session</span><span class=p>:</span>
</span><span id=__span-0-204><a id=__codelineno-0-204 name=__codelineno-0-204></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Create a read-only session.</span>
</span><span id=__span-0-205><a id=__codelineno-0-205 name=__codelineno-0-205></a>
</span><span id=__span-0-206><a id=__codelineno-0-206 name=__codelineno-0-206></a><span class=sd>        This can be thought of as a read-only checkout of the repository at a given snapshot.</span>
</span><span id=__span-0-207><a id=__codelineno-0-207 name=__codelineno-0-207></a><span class=sd>        When branch or tag are provided, the session will be based on the tip of the branch or</span>
</span><span id=__span-0-208><a id=__codelineno-0-208 name=__codelineno-0-208></a><span class=sd>        the snapshot ID of the tag.</span>
</span><span id=__span-0-209><a id=__codelineno-0-209 name=__codelineno-0-209></a>
</span><span id=__span-0-210><a id=__codelineno-0-210 name=__codelineno-0-210></a><span class=sd>        Args:</span>
</span><span id=__span-0-211><a id=__codelineno-0-211 name=__codelineno-0-211></a><span class=sd>            branch: If provided, the branch to create the session on.</span>
</span><span id=__span-0-212><a id=__codelineno-0-212 name=__codelineno-0-212></a><span class=sd>            tag: If provided, the tag to create the session on.</span>
</span><span id=__span-0-213><a id=__codelineno-0-213 name=__codelineno-0-213></a><span class=sd>            snapshot: If provided, the snapshot ID to create the session on.</span>
</span><span id=__span-0-214><a id=__codelineno-0-214 name=__codelineno-0-214></a>
</span><span id=__span-0-215><a id=__codelineno-0-215 name=__codelineno-0-215></a><span class=sd>        Returns:</span>
</span><span id=__span-0-216><a id=__codelineno-0-216 name=__codelineno-0-216></a><span class=sd>            Session: The read-only session, pointing to the specified snapshot, tag, or branch.</span>
</span><span id=__span-0-217><a id=__codelineno-0-217 name=__codelineno-0-217></a>
</span><span id=__span-0-218><a id=__codelineno-0-218 name=__codelineno-0-218></a><span class=sd>        Only one of the arguments can be specified.</span>
</span><span id=__span-0-219><a id=__codelineno-0-219 name=__codelineno-0-219></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-220><a id=__codelineno-0-220 name=__codelineno-0-220></a>        <span class=k>return</span> <span class=n>Session</span><span class=p>(</span>
</span><span id=__span-0-221><a id=__codelineno-0-221 name=__codelineno-0-221></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>readonly_session</span><span class=p>(</span><span class=n>branch</span><span class=o>=</span><span class=n>branch</span><span class=p>,</span> <span class=n>tag</span><span class=o>=</span><span class=n>tag</span><span class=p>,</span> <span class=n>snapshot</span><span class=o>=</span><span class=n>snapshot</span><span class=p>)</span>
</span><span id=__span-0-222><a id=__codelineno-0-222 name=__codelineno-0-222></a>        <span class=p>)</span>
</span><span id=__span-0-223><a id=__codelineno-0-223 name=__codelineno-0-223></a>
</span><span id=__span-0-224><a id=__codelineno-0-224 name=__codelineno-0-224></a>    <span class=k>def</span> <span class=nf>writable_session</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Session</span><span class=p>:</span>
</span><span id=__span-0-225><a id=__codelineno-0-225 name=__codelineno-0-225></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Create a writable session on a branch</span>
</span><span id=__span-0-226><a id=__codelineno-0-226 name=__codelineno-0-226></a>
</span><span id=__span-0-227><a id=__codelineno-0-227 name=__codelineno-0-227></a><span class=sd>        Like the read-only session, this can be thought of as a checkout of the repository at the</span>
</span><span id=__span-0-228><a id=__codelineno-0-228 name=__codelineno-0-228></a><span class=sd>        tip of the branch. However, this session is writable and can be used to make changes to the</span>
</span><span id=__span-0-229><a id=__codelineno-0-229 name=__codelineno-0-229></a><span class=sd>        repository. When ready, the changes can be committed to the branch, after which the session will</span>
</span><span id=__span-0-230><a id=__codelineno-0-230 name=__codelineno-0-230></a><span class=sd>        become a read-only session on the new snapshot.</span>
</span><span id=__span-0-231><a id=__codelineno-0-231 name=__codelineno-0-231></a>
</span><span id=__span-0-232><a id=__codelineno-0-232 name=__codelineno-0-232></a><span class=sd>        Args:</span>
</span><span id=__span-0-233><a id=__codelineno-0-233 name=__codelineno-0-233></a><span class=sd>            branch: The branch to create the session on.</span>
</span><span id=__span-0-234><a id=__codelineno-0-234 name=__codelineno-0-234></a>
</span><span id=__span-0-235><a id=__codelineno-0-235 name=__codelineno-0-235></a><span class=sd>        Returns:</span>
</span><span id=__span-0-236><a id=__codelineno-0-236 name=__codelineno-0-236></a><span class=sd>            Session: The writable session on the branch.</span>
</span><span id=__span-0-237><a id=__codelineno-0-237 name=__codelineno-0-237></a>
</span><span id=__span-0-238><a id=__codelineno-0-238 name=__codelineno-0-238></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-239><a id=__codelineno-0-239 name=__codelineno-0-239></a>        <span class=k>return</span> <span class=n>Session</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>writable_session</span><span class=p>(</span><span class=n>branch</span><span class=p>))</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.ancestry class="doc doc-heading"> <code class="highlight language-python"><span class=n>ancestry</span><span class=p>(</span><span class=o>*</span><span class=p>,</span> <span class=n>branch</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>tag</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>snapshot</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get the ancestry of a snapshot.</p> <p>Args: branch: The branch to get the ancestry of. tag: The tag to get the ancestry of. snapshot: The snapshot ID to get the ancestry of.</p> <p>Returns: list[SnapshotMetadata]: The ancestry of the snapshot, listing out the snapshots and their metadata</p> <p>Only one of the arguments can be specified.</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a><span class=k>def</span> <span class=nf>ancestry</span><span class=p>(</span>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a>    <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a>    <span class=n>tag</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a>    <span class=n>snapshot</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=n>SnapshotMetadata</span><span class=p>]:</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get the ancestry of a snapshot.</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a><span class=sd>    Args:</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a><span class=sd>        branch: The branch to get the ancestry of.</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a><span class=sd>        tag: The tag to get the ancestry of.</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a><span class=sd>        snapshot: The snapshot ID to get the ancestry of.</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a><span class=sd>    Returns:</span>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a><span class=sd>        list[SnapshotMetadata]: The ancestry of the snapshot, listing out the snapshots and their metadata</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a><span class=sd>    Only one of the arguments can be specified.</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>ancestry</span><span class=p>(</span><span class=n>branch</span><span class=o>=</span><span class=n>branch</span><span class=p>,</span> <span class=n>tag</span><span class=o>=</span><span class=n>tag</span><span class=p>,</span> <span class=n>snapshot</span><span class=o>=</span><span class=n>snapshot</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.create class="doc doc-heading"> <code class="highlight language-python"><span class=n>create</span><span class=p>(</span><span class=n>storage</span><span class=p>,</span> <span class=n>config</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>virtual_chunk_credentials</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Create a new Icechunk repository.</p> <p>If one already exists at the given store location, an error will be raised.</p> <p>Args: storage: The storage configuration for the repository. config: The repository configuration. If not provided, a default configuration will be used.</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-21>21</a></span>
<span class=normal><a href=#__codelineno-0-22>22</a></span>
<span class=normal><a href=#__codelineno-0-23>23</a></span>
<span class=normal><a href=#__codelineno-0-24>24</a></span>
<span class=normal><a href=#__codelineno-0-25>25</a></span>
<span class=normal><a href=#__codelineno-0-26>26</a></span>
<span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span>
<span class=normal><a href=#__codelineno-0-32>32</a></span>
<span class=normal><a href=#__codelineno-0-33>33</a></span>
<span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span>
<span class=normal><a href=#__codelineno-0-40>40</a></span>
<span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21></a><span class=nd>@classmethod</span>
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22></a><span class=k>def</span> <span class=nf>create</span><span class=p>(</span>
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23></a>    <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24></a>    <span class=n>storage</span><span class=p>:</span> <span class=n>Storage</span><span class=p>,</span>
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25></a>    <span class=n>config</span><span class=p>:</span> <span class=n>RepositoryConfig</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26></a>    <span class=n>virtual_chunk_credentials</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>AnyCredential</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Self</span><span class=p>:</span>
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a new Icechunk repository.</span>
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29></a>
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30></a><span class=sd>    If one already exists at the given store location, an error will be raised.</span>
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31></a>
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32></a><span class=sd>    Args:</span>
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33></a><span class=sd>        storage: The storage configuration for the repository.</span>
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34></a><span class=sd>        config: The repository configuration. If not provided, a default configuration will be used.</span>
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36></a>    <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37></a>        <span class=n>PyRepository</span><span class=o>.</span><span class=n>create</span><span class=p>(</span>
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38></a>            <span class=n>storage</span><span class=p>,</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39></a>            <span class=n>config</span><span class=o>=</span><span class=n>config</span><span class=p>,</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40></a>            <span class=n>virtual_chunk_credentials</span><span class=o>=</span><span class=n>virtual_chunk_credentials</span><span class=p>,</span>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a>        <span class=p>)</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.create_branch class="doc doc-heading"> <code class="highlight language-python"><span class=n>create_branch</span><span class=p>(</span><span class=n>branch</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Create a new branch at the given snapshot.</p> <p>Args: branch: The name of the branch to create. snapshot_id: The snapshot ID to create the branch at.</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a><span class=k>def</span> <span class=nf>create_branch</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a new branch at the given snapshot.</span>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a><span class=sd>    Args:</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a><span class=sd>        branch: The name of the branch to create.</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a><span class=sd>        snapshot_id: The snapshot ID to create the branch at.</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>create_branch</span><span class=p>(</span><span class=n>branch</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.create_tag class="doc doc-heading"> <code class="highlight language-python"><span class=n>create_tag</span><span class=p>(</span><span class=n>tag</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Create a new tag at the given snapshot.</p> <p>Args: tag: The name of the tag to create. snapshot_id: The snapshot ID to create the tag at.</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a><span class=k>def</span> <span class=nf>create_tag</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tag</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a new tag at the given snapshot.</span>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a><span class=sd>    Args:</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a><span class=sd>        tag: The name of the tag to create.</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a><span class=sd>        snapshot_id: The snapshot ID to create the tag at.</span>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-180><a id=__codelineno-0-180 name=__codelineno-0-180></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>create_tag</span><span class=p>(</span><span class=n>tag</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.delete_branch class="doc doc-heading"> <code class="highlight language-python"><span class=n>delete_branch</span><span class=p>(</span><span class=n>branch</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Delete a branch.</p> <p>Args: branch: The branch to delete.</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a><span class=k>def</span> <span class=nf>delete_branch</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Delete a branch.</span>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a><span class=sd>    Args:</span>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a><span class=sd>        branch: The branch to delete.</span>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>delete_branch</span><span class=p>(</span><span class=n>branch</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.exists class="doc doc-heading"> <code class="highlight language-python"><span class=n>exists</span><span class=p>(</span><span class=n>storage</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Check if a repository exists at the given storage location.</p> <p>Args: storage: The storage configuration for the repository.</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-90>90</a></span>
<span class=normal><a href=#__codelineno-0-91>91</a></span>
<span class=normal><a href=#__codelineno-0-92>92</a></span>
<span class=normal><a href=#__codelineno-0-93>93</a></span>
<span class=normal><a href=#__codelineno-0-94>94</a></span>
<span class=normal><a href=#__codelineno-0-95>95</a></span>
<span class=normal><a href=#__codelineno-0-96>96</a></span>
<span class=normal><a href=#__codelineno-0-97>97</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a><span class=nd>@staticmethod</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a><span class=k>def</span> <span class=nf>exists</span><span class=p>(</span><span class=n>storage</span><span class=p>:</span> <span class=n>Storage</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Check if a repository exists at the given storage location.</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a><span class=sd>    Args:</span>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a><span class=sd>        storage: The storage configuration for the repository.</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a>    <span class=k>return</span> <span class=n>PyRepository</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>storage</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.fetch_config class="doc doc-heading"> <code class="highlight language-python"><span class=n>fetch_config</span><span class=p>(</span><span class=n>storage</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Fetch the configuration for the repository saved in storage</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a><span class=nd>@staticmethod</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a><span class=k>def</span> <span class=nf>fetch_config</span><span class=p>(</span><span class=n>storage</span><span class=p>:</span> <span class=n>Storage</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>RepositoryConfig</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Fetch the configuration for the repository saved in storage&quot;&quot;&quot;</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a>    <span class=k>return</span> <span class=n>PyRepository</span><span class=o>.</span><span class=n>fetch_config</span><span class=p>(</span><span class=n>storage</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.list_branches class="doc doc-heading"> <code class="highlight language-python"><span class=n>list_branches</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>List the branches in the repository.</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a><span class=k>def</span> <span class=nf>list_branches</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>set</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;List the branches in the repository.&quot;&quot;&quot;</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>list_branches</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.list_tags class="doc doc-heading"> <code class="highlight language-python"><span class=n>list_tags</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>List the tags in the repository.</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182></a><span class=k>def</span> <span class=nf>list_tags</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>set</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;List the tags in the repository.&quot;&quot;&quot;</span>
</span><span id=__span-0-184><a id=__codelineno-0-184 name=__codelineno-0-184></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>list_tags</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.lookup_branch class="doc doc-heading"> <code class="highlight language-python"><span class=n>lookup_branch</span><span class=p>(</span><span class=n>branch</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get the tip snapshot ID of a branch.</p> <p>Args: branch: The branch to get the tip of.</p> <p>Returns: str: The snapshot ID of the tip of the branch</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a><span class=k>def</span> <span class=nf>lookup_branch</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get the tip snapshot ID of a branch.</span>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a><span class=sd>    Args:</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a><span class=sd>        branch: The branch to get the tip of.</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a><span class=sd>    Returns:</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a><span class=sd>        str: The snapshot ID of the tip of the branch</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>lookup_branch</span><span class=p>(</span><span class=n>branch</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.lookup_tag class="doc doc-heading"> <code class="highlight language-python"><span class=n>lookup_tag</span><span class=p>(</span><span class=n>tag</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get the snapshot ID of a tag.</p> <p>Args: tag: The tag to get the snapshot ID of.</p> <p>Returns: str: The snapshot ID of the tag.</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span>
<span class=normal><a href=#__codelineno-0-190>190</a></span>
<span class=normal><a href=#__codelineno-0-191>191</a></span>
<span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span>
<span class=normal><a href=#__codelineno-0-194>194</a></span>
<span class=normal><a href=#__codelineno-0-195>195</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-186><a id=__codelineno-0-186 name=__codelineno-0-186></a><span class=k>def</span> <span class=nf>lookup_tag</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tag</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-187><a id=__codelineno-0-187 name=__codelineno-0-187></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get the snapshot ID of a tag.</span>
</span><span id=__span-0-188><a id=__codelineno-0-188 name=__codelineno-0-188></a>
</span><span id=__span-0-189><a id=__codelineno-0-189 name=__codelineno-0-189></a><span class=sd>    Args:</span>
</span><span id=__span-0-190><a id=__codelineno-0-190 name=__codelineno-0-190></a><span class=sd>        tag: The tag to get the snapshot ID of.</span>
</span><span id=__span-0-191><a id=__codelineno-0-191 name=__codelineno-0-191></a>
</span><span id=__span-0-192><a id=__codelineno-0-192 name=__codelineno-0-192></a><span class=sd>    Returns:</span>
</span><span id=__span-0-193><a id=__codelineno-0-193 name=__codelineno-0-193></a><span class=sd>        str: The snapshot ID of the tag.</span>
</span><span id=__span-0-194><a id=__codelineno-0-194 name=__codelineno-0-194></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-195><a id=__codelineno-0-195 name=__codelineno-0-195></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>lookup_tag</span><span class=p>(</span><span class=n>tag</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.open class="doc doc-heading"> <code class="highlight language-python"><span class=nb>open</span><span class=p>(</span><span class=n>storage</span><span class=p>,</span> <span class=n>config</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>virtual_chunk_credentials</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Open an existing Icechunk repository.</p> <p>If no repository exists at the given storage location, an error will be raised.</p> <p>Args: storage: The storage configuration for the repository. config: The repository settings. If not provided, a default configuration will be loaded from the repository</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span>
<span class=normal><a href=#__codelineno-0-66>66</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44></a><span class=nd>@classmethod</span>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45></a><span class=k>def</span> <span class=nf>open</span><span class=p>(</span>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a>    <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a>    <span class=n>storage</span><span class=p>:</span> <span class=n>Storage</span><span class=p>,</span>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a>    <span class=n>config</span><span class=p>:</span> <span class=n>RepositoryConfig</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a>    <span class=n>virtual_chunk_credentials</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>AnyCredential</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Self</span><span class=p>:</span>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Open an existing Icechunk repository.</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a><span class=sd>    If no repository exists at the given storage location, an error will be raised.</span>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a><span class=sd>    Args:</span>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a><span class=sd>        storage: The storage configuration for the repository.</span>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a><span class=sd>        config: The repository settings. If not provided, a default configuration will be</span>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a><span class=sd>        loaded from the repository</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a>    <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a>        <span class=n>PyRepository</span><span class=o>.</span><span class=n>open</span><span class=p>(</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a>            <span class=n>storage</span><span class=p>,</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a>            <span class=n>config</span><span class=o>=</span><span class=n>config</span><span class=p>,</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a>            <span class=n>virtual_chunk_credentials</span><span class=o>=</span><span class=n>virtual_chunk_credentials</span><span class=p>,</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a>        <span class=p>)</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.open_or_create class="doc doc-heading"> <code class="highlight language-python"><span class=n>open_or_create</span><span class=p>(</span><span class=n>storage</span><span class=p>,</span> <span class=n>config</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>virtual_chunk_credentials</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Open an existing Icechunk repository or create a new one if it does not exist.</p> <p>Args: storage: The storage configuration for the repository. config: The repository settings. If not provided, a default configuration will be loaded from the repository</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-68>68</a></span>
<span class=normal><a href=#__codelineno-0-69>69</a></span>
<span class=normal><a href=#__codelineno-0-70>70</a></span>
<span class=normal><a href=#__codelineno-0-71>71</a></span>
<span class=normal><a href=#__codelineno-0-72>72</a></span>
<span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span>
<span class=normal><a href=#__codelineno-0-83>83</a></span>
<span class=normal><a href=#__codelineno-0-84>84</a></span>
<span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span>
<span class=normal><a href=#__codelineno-0-87>87</a></span>
<span class=normal><a href=#__codelineno-0-88>88</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a><span class=nd>@classmethod</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a><span class=k>def</span> <span class=nf>open_or_create</span><span class=p>(</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a>    <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a>    <span class=n>storage</span><span class=p>:</span> <span class=n>Storage</span><span class=p>,</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a>    <span class=n>config</span><span class=p>:</span> <span class=n>RepositoryConfig</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a>    <span class=n>virtual_chunk_credentials</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>AnyCredential</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Self</span><span class=p>:</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Open an existing Icechunk repository or create a new one if it does not exist.</span>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a><span class=sd>    Args:</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a><span class=sd>        storage: The storage configuration for the repository.</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a><span class=sd>        config: The repository settings. If not provided, a default configuration will be</span>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a><span class=sd>        loaded from the repository</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a>    <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a>        <span class=n>PyRepository</span><span class=o>.</span><span class=n>open_or_create</span><span class=p>(</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a>            <span class=n>storage</span><span class=p>,</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a>            <span class=n>config</span><span class=o>=</span><span class=n>config</span><span class=p>,</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a>            <span class=n>virtual_chunk_credentials</span><span class=o>=</span><span class=n>virtual_chunk_credentials</span><span class=p>,</span>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a>        <span class=p>)</span>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.readonly_session class="doc doc-heading"> <code class="highlight language-python"><span class=n>readonly_session</span><span class=p>(</span><span class=o>*</span><span class=p>,</span> <span class=n>branch</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>tag</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>snapshot</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Create a read-only session.</p> <p>This can be thought of as a read-only checkout of the repository at a given snapshot. When branch or tag are provided, the session will be based on the tip of the branch or the snapshot ID of the tag.</p> <p>Args: branch: If provided, the branch to create the session on. tag: If provided, the tag to create the session on. snapshot: If provided, the snapshot ID to create the session on.</p> <p>Returns: Session: The read-only session, pointing to the specified snapshot, tag, or branch.</p> <p>Only one of the arguments can be specified.</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-197>197</a></span>
<span class=normal><a href=#__codelineno-0-198>198</a></span>
<span class=normal><a href=#__codelineno-0-199>199</a></span>
<span class=normal><a href=#__codelineno-0-200>200</a></span>
<span class=normal><a href=#__codelineno-0-201>201</a></span>
<span class=normal><a href=#__codelineno-0-202>202</a></span>
<span class=normal><a href=#__codelineno-0-203>203</a></span>
<span class=normal><a href=#__codelineno-0-204>204</a></span>
<span class=normal><a href=#__codelineno-0-205>205</a></span>
<span class=normal><a href=#__codelineno-0-206>206</a></span>
<span class=normal><a href=#__codelineno-0-207>207</a></span>
<span class=normal><a href=#__codelineno-0-208>208</a></span>
<span class=normal><a href=#__codelineno-0-209>209</a></span>
<span class=normal><a href=#__codelineno-0-210>210</a></span>
<span class=normal><a href=#__codelineno-0-211>211</a></span>
<span class=normal><a href=#__codelineno-0-212>212</a></span>
<span class=normal><a href=#__codelineno-0-213>213</a></span>
<span class=normal><a href=#__codelineno-0-214>214</a></span>
<span class=normal><a href=#__codelineno-0-215>215</a></span>
<span class=normal><a href=#__codelineno-0-216>216</a></span>
<span class=normal><a href=#__codelineno-0-217>217</a></span>
<span class=normal><a href=#__codelineno-0-218>218</a></span>
<span class=normal><a href=#__codelineno-0-219>219</a></span>
<span class=normal><a href=#__codelineno-0-220>220</a></span>
<span class=normal><a href=#__codelineno-0-221>221</a></span>
<span class=normal><a href=#__codelineno-0-222>222</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-197><a id=__codelineno-0-197 name=__codelineno-0-197></a><span class=k>def</span> <span class=nf>readonly_session</span><span class=p>(</span>
</span><span id=__span-0-198><a id=__codelineno-0-198 name=__codelineno-0-198></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-199><a id=__codelineno-0-199 name=__codelineno-0-199></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-200><a id=__codelineno-0-200 name=__codelineno-0-200></a>    <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-201><a id=__codelineno-0-201 name=__codelineno-0-201></a>    <span class=n>tag</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-202><a id=__codelineno-0-202 name=__codelineno-0-202></a>    <span class=n>snapshot</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-203><a id=__codelineno-0-203 name=__codelineno-0-203></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Session</span><span class=p>:</span>
</span><span id=__span-0-204><a id=__codelineno-0-204 name=__codelineno-0-204></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a read-only session.</span>
</span><span id=__span-0-205><a id=__codelineno-0-205 name=__codelineno-0-205></a>
</span><span id=__span-0-206><a id=__codelineno-0-206 name=__codelineno-0-206></a><span class=sd>    This can be thought of as a read-only checkout of the repository at a given snapshot.</span>
</span><span id=__span-0-207><a id=__codelineno-0-207 name=__codelineno-0-207></a><span class=sd>    When branch or tag are provided, the session will be based on the tip of the branch or</span>
</span><span id=__span-0-208><a id=__codelineno-0-208 name=__codelineno-0-208></a><span class=sd>    the snapshot ID of the tag.</span>
</span><span id=__span-0-209><a id=__codelineno-0-209 name=__codelineno-0-209></a>
</span><span id=__span-0-210><a id=__codelineno-0-210 name=__codelineno-0-210></a><span class=sd>    Args:</span>
</span><span id=__span-0-211><a id=__codelineno-0-211 name=__codelineno-0-211></a><span class=sd>        branch: If provided, the branch to create the session on.</span>
</span><span id=__span-0-212><a id=__codelineno-0-212 name=__codelineno-0-212></a><span class=sd>        tag: If provided, the tag to create the session on.</span>
</span><span id=__span-0-213><a id=__codelineno-0-213 name=__codelineno-0-213></a><span class=sd>        snapshot: If provided, the snapshot ID to create the session on.</span>
</span><span id=__span-0-214><a id=__codelineno-0-214 name=__codelineno-0-214></a>
</span><span id=__span-0-215><a id=__codelineno-0-215 name=__codelineno-0-215></a><span class=sd>    Returns:</span>
</span><span id=__span-0-216><a id=__codelineno-0-216 name=__codelineno-0-216></a><span class=sd>        Session: The read-only session, pointing to the specified snapshot, tag, or branch.</span>
</span><span id=__span-0-217><a id=__codelineno-0-217 name=__codelineno-0-217></a>
</span><span id=__span-0-218><a id=__codelineno-0-218 name=__codelineno-0-218></a><span class=sd>    Only one of the arguments can be specified.</span>
</span><span id=__span-0-219><a id=__codelineno-0-219 name=__codelineno-0-219></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-220><a id=__codelineno-0-220 name=__codelineno-0-220></a>    <span class=k>return</span> <span class=n>Session</span><span class=p>(</span>
</span><span id=__span-0-221><a id=__codelineno-0-221 name=__codelineno-0-221></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>readonly_session</span><span class=p>(</span><span class=n>branch</span><span class=o>=</span><span class=n>branch</span><span class=p>,</span> <span class=n>tag</span><span class=o>=</span><span class=n>tag</span><span class=p>,</span> <span class=n>snapshot</span><span class=o>=</span><span class=n>snapshot</span><span class=p>)</span>
</span><span id=__span-0-222><a id=__codelineno-0-222 name=__codelineno-0-222></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.reset_branch class="doc doc-heading"> <code class="highlight language-python"><span class=n>reset_branch</span><span class=p>(</span><span class=n>branch</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Reset a branch to a specific snapshot.</p> <p>This will permanently alter the history of the branch such that the tip of the branch is the specified snapshot.</p> <p>Args: branch: The branch to reset. snapshot_id: The snapshot ID to reset the branch to.</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a><span class=k>def</span> <span class=nf>reset_branch</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Reset a branch to a specific snapshot.</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a><span class=sd>    This will permanently alter the history of the branch such that the tip of</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a><span class=sd>    the branch is the specified snapshot.</span>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a><span class=sd>    Args:</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a><span class=sd>        branch: The branch to reset.</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a><span class=sd>        snapshot_id: The snapshot ID to reset the branch to.</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>reset_branch</span><span class=p>(</span><span class=n>branch</span><span class=p>,</span> <span class=n>snapshot_id</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.save_config class="doc doc-heading"> <code class="highlight language-python"><span class=n>save_config</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Save the repository configuration to storage, this configuration will be used in future calls to Repository.open.</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a><span class=k>def</span> <span class=nf>save_config</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Save the repository configuration to storage, this configuration will be used in future calls to Repository.open.&quot;&quot;&quot;</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>save_config</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Repository.writable_session class="doc doc-heading"> <code class="highlight language-python"><span class=n>writable_session</span><span class=p>(</span><span class=n>branch</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Create a writable session on a branch</p> <p>Like the read-only session, this can be thought of as a checkout of the repository at the tip of the branch. However, this session is writable and can be used to make changes to the repository. When ready, the changes can be committed to the branch, after which the session will become a read-only session on the new snapshot.</p> <p>Args: branch: The branch to create the session on.</p> <p>Returns: Session: The writable session on the branch.</p> <details class=quote> <summary>Source code in <code>icechunk/repository.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-224>224</a></span>
<span class=normal><a href=#__codelineno-0-225>225</a></span>
<span class=normal><a href=#__codelineno-0-226>226</a></span>
<span class=normal><a href=#__codelineno-0-227>227</a></span>
<span class=normal><a href=#__codelineno-0-228>228</a></span>
<span class=normal><a href=#__codelineno-0-229>229</a></span>
<span class=normal><a href=#__codelineno-0-230>230</a></span>
<span class=normal><a href=#__codelineno-0-231>231</a></span>
<span class=normal><a href=#__codelineno-0-232>232</a></span>
<span class=normal><a href=#__codelineno-0-233>233</a></span>
<span class=normal><a href=#__codelineno-0-234>234</a></span>
<span class=normal><a href=#__codelineno-0-235>235</a></span>
<span class=normal><a href=#__codelineno-0-236>236</a></span>
<span class=normal><a href=#__codelineno-0-237>237</a></span>
<span class=normal><a href=#__codelineno-0-238>238</a></span>
<span class=normal><a href=#__codelineno-0-239>239</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-224><a id=__codelineno-0-224 name=__codelineno-0-224></a><span class=k>def</span> <span class=nf>writable_session</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>branch</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Session</span><span class=p>:</span>
</span><span id=__span-0-225><a id=__codelineno-0-225 name=__codelineno-0-225></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a writable session on a branch</span>
</span><span id=__span-0-226><a id=__codelineno-0-226 name=__codelineno-0-226></a>
</span><span id=__span-0-227><a id=__codelineno-0-227 name=__codelineno-0-227></a><span class=sd>    Like the read-only session, this can be thought of as a checkout of the repository at the</span>
</span><span id=__span-0-228><a id=__codelineno-0-228 name=__codelineno-0-228></a><span class=sd>    tip of the branch. However, this session is writable and can be used to make changes to the</span>
</span><span id=__span-0-229><a id=__codelineno-0-229 name=__codelineno-0-229></a><span class=sd>    repository. When ready, the changes can be committed to the branch, after which the session will</span>
</span><span id=__span-0-230><a id=__codelineno-0-230 name=__codelineno-0-230></a><span class=sd>    become a read-only session on the new snapshot.</span>
</span><span id=__span-0-231><a id=__codelineno-0-231 name=__codelineno-0-231></a>
</span><span id=__span-0-232><a id=__codelineno-0-232 name=__codelineno-0-232></a><span class=sd>    Args:</span>
</span><span id=__span-0-233><a id=__codelineno-0-233 name=__codelineno-0-233></a><span class=sd>        branch: The branch to create the session on.</span>
</span><span id=__span-0-234><a id=__codelineno-0-234 name=__codelineno-0-234></a>
</span><span id=__span-0-235><a id=__codelineno-0-235 name=__codelineno-0-235></a><span class=sd>    Returns:</span>
</span><span id=__span-0-236><a id=__codelineno-0-236 name=__codelineno-0-236></a><span class=sd>        Session: The writable session on the branch.</span>
</span><span id=__span-0-237><a id=__codelineno-0-237 name=__codelineno-0-237></a>
</span><span id=__span-0-238><a id=__codelineno-0-238 name=__codelineno-0-238></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-239><a id=__codelineno-0-239 name=__codelineno-0-239></a>    <span class=k>return</span> <span class=n>Session</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_repository</span><span class=o>.</span><span class=n>writable_session</span><span class=p>(</span><span class=n>branch</span><span class=p>))</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.RepositoryConfig class="doc doc-heading"> <code>RepositoryConfig</code> </h2> <div class="doc doc-contents "> <p>Configuration for an Icechunk repository</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a><span class=k>class</span> <span class=nc>RepositoryConfig</span><span class=p>:</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Configuration for an Icechunk repository&quot;&quot;&quot;</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a>    <span class=nd>@staticmethod</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>    <span class=k>def</span> <span class=nf>default</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>RepositoryConfig</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a>    <span class=nd>@property</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>    <span class=k>def</span> <span class=nf>inline_chunk_threshold_bytes</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>    <span class=nd>@inline_chunk_threshold_bytes</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a>    <span class=k>def</span> <span class=nf>inline_chunk_threshold_bytes</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a>    <span class=nd>@property</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a>    <span class=k>def</span> <span class=nf>unsafe_overwrite_refs</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a>    <span class=nd>@unsafe_overwrite_refs</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a>    <span class=k>def</span> <span class=nf>unsafe_overwrite_refs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>bool</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a>    <span class=nd>@property</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a>    <span class=k>def</span> <span class=nf>get_partial_values_concurrency</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>    <span class=nd>@get_partial_values_concurrency</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>    <span class=k>def</span> <span class=nf>get_partial_values_concurrency</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a>    <span class=nd>@property</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>    <span class=k>def</span> <span class=nf>compression</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CompressionConfig</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a>    <span class=nd>@compression</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a>    <span class=k>def</span> <span class=nf>compression</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>CompressionConfig</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>    <span class=nd>@property</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>    <span class=k>def</span> <span class=nf>caching</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>CachingConfig</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>    <span class=nd>@caching</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>    <span class=k>def</span> <span class=nf>caching</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>CachingConfig</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a>    <span class=nd>@property</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a>    <span class=k>def</span> <span class=nf>storage</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Storage</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a>    <span class=nd>@storage</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a>    <span class=k>def</span> <span class=nf>storage</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>Storage</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a>    <span class=nd>@property</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a>    <span class=k>def</span> <span class=nf>virtual_chunk_containers</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>VirtualChunkContainer</span><span class=p>]:</span> <span class=o>...</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a>    <span class=nd>@virtual_chunk_containers</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a>    <span class=k>def</span> <span class=nf>virtual_chunk_containers</span><span class=p>(</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a>        <span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>VirtualChunkContainer</span><span class=p>]</span>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a>    <span class=k>def</span> <span class=nf>set_virtual_chunk_container</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cont</span><span class=p>:</span> <span class=n>VirtualChunkContainer</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a>    <span class=k>def</span> <span class=nf>clear_virtual_chunk_containers</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.Session class="doc doc-heading"> <code>Session</code> </h2> <div class="doc doc-contents "> <p>A session object that allows for reading and writing data from an Icechunk repository.</p> <details class=quote> <summary>Source code in <code>icechunk/session.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a><span class=k>class</span> <span class=nc>Session</span><span class=p>:</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;A session object that allows for reading and writing data from an Icechunk repository.&quot;&quot;&quot;</span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a>    <span class=n>_session</span><span class=p>:</span> <span class=n>PySession</span>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>session</span><span class=p>:</span> <span class=n>PySession</span><span class=p>):</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_session</span> <span class=o>=</span> <span class=n>session</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_allow_distributed_write</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a>    <span class=k>def</span> <span class=fm>__eq__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>object</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=n>Session</span><span class=p>):</span>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a>            <span class=k>return</span> <span class=kc>False</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span> <span class=o>==</span> <span class=n>value</span><span class=o>.</span><span class=n>_session</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a>    <span class=k>def</span> <span class=nf>__getstate__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>object</span><span class=p>:</span>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a>        <span class=n>state</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a>            <span class=s2>&quot;_session&quot;</span><span class=p>:</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>as_bytes</span><span class=p>(),</span>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a>        <span class=p>}</span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a>        <span class=k>return</span> <span class=n>state</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a>    <span class=k>def</span> <span class=nf>__setstate__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>state</span><span class=p>:</span> <span class=nb>object</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>state</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Invalid state&quot;</span><span class=p>)</span>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_session</span> <span class=o>=</span> <span class=n>PySession</span><span class=o>.</span><span class=n>from_bytes</span><span class=p>(</span><span class=n>state</span><span class=p>[</span><span class=s2>&quot;_session&quot;</span><span class=p>])</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a>    <span class=nd>@property</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a>    <span class=k>def</span> <span class=nf>read_only</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Whether the session is read-only.&quot;&quot;&quot;</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>read_only</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a>    <span class=nd>@property</span>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a>    <span class=k>def</span> <span class=nf>snapshot_id</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;The base snapshot ID of the session&quot;&quot;&quot;</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>snapshot_id</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a>    <span class=nd>@property</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a>    <span class=k>def</span> <span class=nf>branch</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;The branch that the session is based on. This is only set if the</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a><span class=sd>        session is writable&quot;&quot;&quot;</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>branch</span>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a>    <span class=nd>@property</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a>    <span class=k>def</span> <span class=nf>has_uncommitted_changes</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Whether the session has uncommitted changes. This is only possibly</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a><span class=sd>        true if the session is writable&quot;&quot;&quot;</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>has_uncommitted_changes</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a>    <span class=k>def</span> <span class=nf>discard_changes</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;When the session is writable, discard any uncommitted changes&quot;&quot;&quot;</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>discard_changes</span><span class=p>()</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a>    <span class=nd>@property</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>    <span class=k>def</span> <span class=nf>store</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>IcechunkStore</span><span class=p>:</span>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Get a zarr Store object for reading and writing data from the repository using zarr python&quot;&quot;&quot;</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>        <span class=k>return</span> <span class=n>IcechunkStore</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>store</span><span class=p>)</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a>    <span class=k>def</span> <span class=nf>all_virtual_chunk_locations</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Return the location URLs of all virtual chunks&quot;&quot;&quot;</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>all_virtual_chunk_locations</span><span class=p>()</span>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a>    <span class=k>def</span> <span class=nf>merge</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=n>Self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Merge the changes for this session with the changes from another session&quot;&quot;&quot;</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>other</span><span class=o>.</span><span class=n>_session</span><span class=p>)</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>    <span class=k>def</span> <span class=nf>commit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>message</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Commit the changes in the session to the repository</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a><span class=sd>        When successful, the writable session is completed and the session is now read-only</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a><span class=sd>        and based on the new commit. The snapshot ID of the new commit is returned.</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a><span class=sd>        If the session is out of date, this will raise a ConflictError exception depicting</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a><span class=sd>        the conflict that occurred. The session will need to be rebased before committing.</span>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a><span class=sd>        Args:</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a><span class=sd>            message (str): The message to write with the commit</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a><span class=sd>        Returns:</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a><span class=sd>            str: The snapshot ID of the new commit</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a>        <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a>            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>commit</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a>        <span class=k>except</span> <span class=n>PyConflictError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a>            <span class=k>raise</span> <span class=n>ConflictError</span><span class=p>(</span><span class=n>e</span><span class=p>)</span> <span class=kn>from</span> <span class=kc>None</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a>    <span class=k>def</span> <span class=nf>rebase</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>solver</span><span class=p>:</span> <span class=n>ConflictSolver</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Rebase the session to the latest ancestry of the branch.</span>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a><span class=sd>        This method will iteratively crawl the ancestry of the branch and apply the changes</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a><span class=sd>        from the branch to the session. If a conflict is detected, the conflict solver will</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a><span class=sd>        be used to optionally resolve the conflict. When complete, the session will be based</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a><span class=sd>        on the latest commit of the branch and the session will be ready to attempt another</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a><span class=sd>        commit.</span>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a><span class=sd>        When a conflict is detected and a resolution is not possible with the proivided</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a><span class=sd>        solver, a RebaseFailed exception will be raised. This exception will contain the</span>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a><span class=sd>        snapshot ID that the rebase failed on and a list of conflicts that occurred.</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a><span class=sd>        Args:</span>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a><span class=sd>            solver (ConflictSolver): The conflict solver to use when a conflict is detected</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a><span class=sd>        Raises:</span>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a><span class=sd>            RebaseFailed: When a conflict is detected and the solver fails to resolve it</span>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a>        <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>rebase</span><span class=p>(</span><span class=n>solver</span><span class=p>)</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a>        <span class=k>except</span> <span class=n>PyRebaseFailedError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a>            <span class=k>raise</span> <span class=n>RebaseFailedError</span><span class=p>(</span><span class=n>e</span><span class=p>)</span> <span class=kn>from</span> <span class=kc>None</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.Session.branch class="doc doc-heading"> <code class="highlight language-python"><span class=n>branch</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>The branch that the session is based on. This is only set if the session is writable</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.Session.has_uncommitted_changes class="doc doc-heading"> <code class="highlight language-python"><span class=n>has_uncommitted_changes</span><span class=p>:</span> <span class=nb>bool</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Whether the session has uncommitted changes. This is only possibly true if the session is writable</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.Session.read_only class="doc doc-heading"> <code class="highlight language-python"><span class=n>read_only</span><span class=p>:</span> <span class=nb>bool</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Whether the session is read-only.</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.Session.snapshot_id class="doc doc-heading"> <code class="highlight language-python"><span class=n>snapshot_id</span><span class=p>:</span> <span class=nb>str</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>The base snapshot ID of the session</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.Session.store class="doc doc-heading"> <code class="highlight language-python"><span class=n>store</span><span class=p>:</span> <span class=n>IcechunkStore</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get a zarr Store object for reading and writing data from the repository using zarr python</p> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Session.all_virtual_chunk_locations class="doc doc-heading"> <code class="highlight language-python"><span class=n>all_virtual_chunk_locations</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Return the location URLs of all virtual chunks</p> <details class=quote> <summary>Source code in <code>icechunk/session.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a><span class=k>def</span> <span class=nf>all_virtual_chunk_locations</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Return the location URLs of all virtual chunks&quot;&quot;&quot;</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>all_virtual_chunk_locations</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Session.commit class="doc doc-heading"> <code class="highlight language-python"><span class=n>commit</span><span class=p>(</span><span class=n>message</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Commit the changes in the session to the repository</p> <p>When successful, the writable session is completed and the session is now read-only and based on the new commit. The snapshot ID of the new commit is returned.</p> <p>If the session is out of date, this will raise a ConflictError exception depicting the conflict that occurred. The session will need to be rebased before committing.</p> <p>Args: message (str): The message to write with the commit</p> <p>Returns: str: The snapshot ID of the new commit</p> <details class=quote> <summary>Source code in <code>icechunk/session.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a><span class=k>def</span> <span class=nf>commit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>message</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Commit the changes in the session to the repository</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a><span class=sd>    When successful, the writable session is completed and the session is now read-only</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a><span class=sd>    and based on the new commit. The snapshot ID of the new commit is returned.</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a><span class=sd>    If the session is out of date, this will raise a ConflictError exception depicting</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a><span class=sd>    the conflict that occurred. The session will need to be rebased before committing.</span>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a><span class=sd>    Args:</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a><span class=sd>        message (str): The message to write with the commit</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a><span class=sd>    Returns:</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a><span class=sd>        str: The snapshot ID of the new commit</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>commit</span><span class=p>(</span><span class=n>message</span><span class=p>)</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a>    <span class=k>except</span> <span class=n>PyConflictError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a>        <span class=k>raise</span> <span class=n>ConflictError</span><span class=p>(</span><span class=n>e</span><span class=p>)</span> <span class=kn>from</span> <span class=kc>None</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Session.discard_changes class="doc doc-heading"> <code class="highlight language-python"><span class=n>discard_changes</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>When the session is writable, discard any uncommitted changes</p> <details class=quote> <summary>Source code in <code>icechunk/session.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a><span class=k>def</span> <span class=nf>discard_changes</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;When the session is writable, discard any uncommitted changes&quot;&quot;&quot;</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>discard_changes</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Session.merge class="doc doc-heading"> <code class="highlight language-python"><span class=n>merge</span><span class=p>(</span><span class=n>other</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Merge the changes for this session with the changes from another session</p> <details class=quote> <summary>Source code in <code>icechunk/session.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a><span class=k>def</span> <span class=nf>merge</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>:</span> <span class=n>Self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Merge the changes for this session with the changes from another session&quot;&quot;&quot;</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>other</span><span class=o>.</span><span class=n>_session</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.Session.rebase class="doc doc-heading"> <code class="highlight language-python"><span class=n>rebase</span><span class=p>(</span><span class=n>solver</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Rebase the session to the latest ancestry of the branch.</p> <p>This method will iteratively crawl the ancestry of the branch and apply the changes from the branch to the session. If a conflict is detected, the conflict solver will be used to optionally resolve the conflict. When complete, the session will be based on the latest commit of the branch and the session will be ready to attempt another commit.</p> <p>When a conflict is detected and a resolution is not possible with the proivided solver, a RebaseFailed exception will be raised. This exception will contain the snapshot ID that the rebase failed on and a list of conflicts that occurred.</p> <p>Args: solver (ConflictSolver): The conflict solver to use when a conflict is detected</p> <p>Raises: RebaseFailed: When a conflict is detected and the solver fails to resolve it</p> <details class=quote> <summary>Source code in <code>icechunk/session.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a><span class=k>def</span> <span class=nf>rebase</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>solver</span><span class=p>:</span> <span class=n>ConflictSolver</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Rebase the session to the latest ancestry of the branch.</span>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a><span class=sd>    This method will iteratively crawl the ancestry of the branch and apply the changes</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a><span class=sd>    from the branch to the session. If a conflict is detected, the conflict solver will</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a><span class=sd>    be used to optionally resolve the conflict. When complete, the session will be based</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a><span class=sd>    on the latest commit of the branch and the session will be ready to attempt another</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a><span class=sd>    commit.</span>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a><span class=sd>    When a conflict is detected and a resolution is not possible with the proivided</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a><span class=sd>    solver, a RebaseFailed exception will be raised. This exception will contain the</span>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a><span class=sd>    snapshot ID that the rebase failed on and a list of conflicts that occurred.</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a><span class=sd>    Args:</span>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a><span class=sd>        solver (ConflictSolver): The conflict solver to use when a conflict is detected</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a><span class=sd>    Raises:</span>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a><span class=sd>        RebaseFailed: When a conflict is detected and the solver fails to resolve it</span>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_session</span><span class=o>.</span><span class=n>rebase</span><span class=p>(</span><span class=n>solver</span><span class=p>)</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a>    <span class=k>except</span> <span class=n>PyRebaseFailedError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a>        <span class=k>raise</span> <span class=n>RebaseFailedError</span><span class=p>(</span><span class=n>e</span><span class=p>)</span> <span class=kn>from</span> <span class=kc>None</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.SnapshotMetadata class="doc doc-heading"> <code>SnapshotMetadata</code> </h2> <div class="doc doc-contents "> <p>Metadata for a snapshot</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-284>284</a></span>
<span class=normal><a href=#__codelineno-0-285>285</a></span>
<span class=normal><a href=#__codelineno-0-286>286</a></span>
<span class=normal><a href=#__codelineno-0-287>287</a></span>
<span class=normal><a href=#__codelineno-0-288>288</a></span>
<span class=normal><a href=#__codelineno-0-289>289</a></span>
<span class=normal><a href=#__codelineno-0-290>290</a></span>
<span class=normal><a href=#__codelineno-0-291>291</a></span>
<span class=normal><a href=#__codelineno-0-292>292</a></span>
<span class=normal><a href=#__codelineno-0-293>293</a></span>
<span class=normal><a href=#__codelineno-0-294>294</a></span>
<span class=normal><a href=#__codelineno-0-295>295</a></span>
<span class=normal><a href=#__codelineno-0-296>296</a></span>
<span class=normal><a href=#__codelineno-0-297>297</a></span>
<span class=normal><a href=#__codelineno-0-298>298</a></span>
<span class=normal><a href=#__codelineno-0-299>299</a></span>
<span class=normal><a href=#__codelineno-0-300>300</a></span>
<span class=normal><a href=#__codelineno-0-301>301</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-284><a id=__codelineno-0-284 name=__codelineno-0-284></a><span class=k>class</span> <span class=nc>SnapshotMetadata</span><span class=p>:</span>
</span><span id=__span-0-285><a id=__codelineno-0-285 name=__codelineno-0-285></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Metadata for a snapshot&quot;&quot;&quot;</span>
</span><span id=__span-0-286><a id=__codelineno-0-286 name=__codelineno-0-286></a>    <span class=nd>@property</span>
</span><span id=__span-0-287><a id=__codelineno-0-287 name=__codelineno-0-287></a>    <span class=k>def</span> <span class=nf>id</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-288><a id=__codelineno-0-288 name=__codelineno-0-288></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;The snapshot ID&quot;&quot;&quot;</span>
</span><span id=__span-0-289><a id=__codelineno-0-289 name=__codelineno-0-289></a>        <span class=o>...</span>
</span><span id=__span-0-290><a id=__codelineno-0-290 name=__codelineno-0-290></a>    <span class=nd>@property</span>
</span><span id=__span-0-291><a id=__codelineno-0-291 name=__codelineno-0-291></a>    <span class=k>def</span> <span class=nf>written_at</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span><span class=p>:</span>
</span><span id=__span-0-292><a id=__codelineno-0-292 name=__codelineno-0-292></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-293><a id=__codelineno-0-293 name=__codelineno-0-293></a><span class=sd>        The timestamp when the snapshot was written</span>
</span><span id=__span-0-294><a id=__codelineno-0-294 name=__codelineno-0-294></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-295><a id=__codelineno-0-295 name=__codelineno-0-295></a>        <span class=o>...</span>
</span><span id=__span-0-296><a id=__codelineno-0-296 name=__codelineno-0-296></a>    <span class=nd>@property</span>
</span><span id=__span-0-297><a id=__codelineno-0-297 name=__codelineno-0-297></a>    <span class=k>def</span> <span class=nf>message</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-0-298><a id=__codelineno-0-298 name=__codelineno-0-298></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-299><a id=__codelineno-0-299 name=__codelineno-0-299></a><span class=sd>        The commit message of the snapshot</span>
</span><span id=__span-0-300><a id=__codelineno-0-300 name=__codelineno-0-300></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-301><a id=__codelineno-0-301 name=__codelineno-0-301></a>        <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.SnapshotMetadata.id class="doc doc-heading"> <code class="highlight language-python"><span class=nb>id</span><span class=p>:</span> <span class=nb>str</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>The snapshot ID</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.SnapshotMetadata.message class="doc doc-heading"> <code class="highlight language-python"><span class=n>message</span><span class=p>:</span> <span class=nb>str</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>The commit message of the snapshot</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=icechunk.SnapshotMetadata.written_at class="doc doc-heading"> <code class="highlight language-python"><span class=n>written_at</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>datetime</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>The timestamp when the snapshot was written</p> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.Storage class="doc doc-heading"> <code>Storage</code> </h2> <div class="doc doc-contents "> <p>Storage configuration for an IcechunkStore</p> <p>Currently supports memory, filesystem, and S3 storage backends. Use the class methods to create a StorageConfig object with the desired backend.</p> <p>Ex: <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>storage_config = StorageConfig.memory(&quot;prefix&quot;)
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>storage_config = StorageConfig.filesystem(&quot;/path/to/root&quot;)
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>storage_config = StorageConfig.object_store(&quot;s3://bucket/prefix&quot;, vec![&quot;my&quot;, &quot;options&quot;])
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>storage_config = StorageConfig.s3_from_env(&quot;bucket&quot;, &quot;prefix&quot;)
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>storage_config = StorageConfig.s3_from_config(&quot;bucket&quot;, &quot;prefix&quot;, ...)
</span></code></pre></div></p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-405>405</a></span>
<span class=normal><a href=#__codelineno-0-406>406</a></span>
<span class=normal><a href=#__codelineno-0-407>407</a></span>
<span class=normal><a href=#__codelineno-0-408>408</a></span>
<span class=normal><a href=#__codelineno-0-409>409</a></span>
<span class=normal><a href=#__codelineno-0-410>410</a></span>
<span class=normal><a href=#__codelineno-0-411>411</a></span>
<span class=normal><a href=#__codelineno-0-412>412</a></span>
<span class=normal><a href=#__codelineno-0-413>413</a></span>
<span class=normal><a href=#__codelineno-0-414>414</a></span>
<span class=normal><a href=#__codelineno-0-415>415</a></span>
<span class=normal><a href=#__codelineno-0-416>416</a></span>
<span class=normal><a href=#__codelineno-0-417>417</a></span>
<span class=normal><a href=#__codelineno-0-418>418</a></span>
<span class=normal><a href=#__codelineno-0-419>419</a></span>
<span class=normal><a href=#__codelineno-0-420>420</a></span>
<span class=normal><a href=#__codelineno-0-421>421</a></span>
<span class=normal><a href=#__codelineno-0-422>422</a></span>
<span class=normal><a href=#__codelineno-0-423>423</a></span>
<span class=normal><a href=#__codelineno-0-424>424</a></span>
<span class=normal><a href=#__codelineno-0-425>425</a></span>
<span class=normal><a href=#__codelineno-0-426>426</a></span>
<span class=normal><a href=#__codelineno-0-427>427</a></span>
<span class=normal><a href=#__codelineno-0-428>428</a></span>
<span class=normal><a href=#__codelineno-0-429>429</a></span>
<span class=normal><a href=#__codelineno-0-430>430</a></span>
<span class=normal><a href=#__codelineno-0-431>431</a></span>
<span class=normal><a href=#__codelineno-0-432>432</a></span>
<span class=normal><a href=#__codelineno-0-433>433</a></span>
<span class=normal><a href=#__codelineno-0-434>434</a></span>
<span class=normal><a href=#__codelineno-0-435>435</a></span>
<span class=normal><a href=#__codelineno-0-436>436</a></span>
<span class=normal><a href=#__codelineno-0-437>437</a></span>
<span class=normal><a href=#__codelineno-0-438>438</a></span>
<span class=normal><a href=#__codelineno-0-439>439</a></span>
<span class=normal><a href=#__codelineno-0-440>440</a></span>
<span class=normal><a href=#__codelineno-0-441>441</a></span>
<span class=normal><a href=#__codelineno-0-442>442</a></span>
<span class=normal><a href=#__codelineno-0-443>443</a></span>
<span class=normal><a href=#__codelineno-0-444>444</a></span>
<span class=normal><a href=#__codelineno-0-445>445</a></span>
<span class=normal><a href=#__codelineno-0-446>446</a></span>
<span class=normal><a href=#__codelineno-0-447>447</a></span>
<span class=normal><a href=#__codelineno-0-448>448</a></span>
<span class=normal><a href=#__codelineno-0-449>449</a></span>
<span class=normal><a href=#__codelineno-0-450>450</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-405><a id=__codelineno-0-405 name=__codelineno-0-405></a><span class=k>class</span> <span class=nc>Storage</span><span class=p>:</span>
</span><span id=__span-0-406><a id=__codelineno-0-406 name=__codelineno-0-406></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Storage configuration for an IcechunkStore</span>
</span><span id=__span-0-407><a id=__codelineno-0-407 name=__codelineno-0-407></a>
</span><span id=__span-0-408><a id=__codelineno-0-408 name=__codelineno-0-408></a><span class=sd>    Currently supports memory, filesystem, and S3 storage backends.</span>
</span><span id=__span-0-409><a id=__codelineno-0-409 name=__codelineno-0-409></a><span class=sd>    Use the class methods to create a StorageConfig object with the desired backend.</span>
</span><span id=__span-0-410><a id=__codelineno-0-410 name=__codelineno-0-410></a>
</span><span id=__span-0-411><a id=__codelineno-0-411 name=__codelineno-0-411></a><span class=sd>    Ex:</span>
</span><span id=__span-0-412><a id=__codelineno-0-412 name=__codelineno-0-412></a><span class=sd>    ```</span>
</span><span id=__span-0-413><a id=__codelineno-0-413 name=__codelineno-0-413></a><span class=sd>    storage_config = StorageConfig.memory(&quot;prefix&quot;)</span>
</span><span id=__span-0-414><a id=__codelineno-0-414 name=__codelineno-0-414></a><span class=sd>    storage_config = StorageConfig.filesystem(&quot;/path/to/root&quot;)</span>
</span><span id=__span-0-415><a id=__codelineno-0-415 name=__codelineno-0-415></a><span class=sd>    storage_config = StorageConfig.object_store(&quot;s3://bucket/prefix&quot;, vec![&quot;my&quot;, &quot;options&quot;])</span>
</span><span id=__span-0-416><a id=__codelineno-0-416 name=__codelineno-0-416></a><span class=sd>    storage_config = StorageConfig.s3_from_env(&quot;bucket&quot;, &quot;prefix&quot;)</span>
</span><span id=__span-0-417><a id=__codelineno-0-417 name=__codelineno-0-417></a><span class=sd>    storage_config = StorageConfig.s3_from_config(&quot;bucket&quot;, &quot;prefix&quot;, ...)</span>
</span><span id=__span-0-418><a id=__codelineno-0-418 name=__codelineno-0-418></a><span class=sd>    ```</span>
</span><span id=__span-0-419><a id=__codelineno-0-419 name=__codelineno-0-419></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-420><a id=__codelineno-0-420 name=__codelineno-0-420></a>
</span><span id=__span-0-421><a id=__codelineno-0-421 name=__codelineno-0-421></a>    <span class=nd>@classmethod</span>
</span><span id=__span-0-422><a id=__codelineno-0-422 name=__codelineno-0-422></a>    <span class=k>def</span> <span class=nf>new_s3</span><span class=p>(</span>
</span><span id=__span-0-423><a id=__codelineno-0-423 name=__codelineno-0-423></a>        <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-424><a id=__codelineno-0-424 name=__codelineno-0-424></a>        <span class=n>config</span><span class=p>:</span> <span class=n>S3Options</span><span class=p>,</span>
</span><span id=__span-0-425><a id=__codelineno-0-425 name=__codelineno-0-425></a>        <span class=n>bucket</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-426><a id=__codelineno-0-426 name=__codelineno-0-426></a>        <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-427><a id=__codelineno-0-427 name=__codelineno-0-427></a>        <span class=n>credentials</span><span class=p>:</span> <span class=n>AnyS3Credential</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-428><a id=__codelineno-0-428 name=__codelineno-0-428></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Storage</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-429><a id=__codelineno-0-429 name=__codelineno-0-429></a>    <span class=nd>@classmethod</span>
</span><span id=__span-0-430><a id=__codelineno-0-430 name=__codelineno-0-430></a>    <span class=k>def</span> <span class=nf>new_in_memory</span><span class=p>(</span><span class=bp>cls</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Storage</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-431><a id=__codelineno-0-431 name=__codelineno-0-431></a>    <span class=nd>@classmethod</span>
</span><span id=__span-0-432><a id=__codelineno-0-432 name=__codelineno-0-432></a>    <span class=k>def</span> <span class=nf>new_local_filesystem</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>path</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Storage</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-433><a id=__codelineno-0-433 name=__codelineno-0-433></a>    <span class=nd>@classmethod</span>
</span><span id=__span-0-434><a id=__codelineno-0-434 name=__codelineno-0-434></a>    <span class=k>def</span> <span class=nf>new_gcs</span><span class=p>(</span>
</span><span id=__span-0-435><a id=__codelineno-0-435 name=__codelineno-0-435></a>        <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-436><a id=__codelineno-0-436 name=__codelineno-0-436></a>        <span class=n>bucket</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-437><a id=__codelineno-0-437 name=__codelineno-0-437></a>        <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-438><a id=__codelineno-0-438 name=__codelineno-0-438></a>        <span class=n>credentials</span><span class=p>:</span> <span class=n>AnyGcsCredential</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-439><a id=__codelineno-0-439 name=__codelineno-0-439></a>        <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-440><a id=__codelineno-0-440 name=__codelineno-0-440></a>        <span class=n>config</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-441><a id=__codelineno-0-441 name=__codelineno-0-441></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Storage</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-442><a id=__codelineno-0-442 name=__codelineno-0-442></a>    <span class=nd>@classmethod</span>
</span><span id=__span-0-443><a id=__codelineno-0-443 name=__codelineno-0-443></a>    <span class=k>def</span> <span class=nf>new_azure_blob</span><span class=p>(</span>
</span><span id=__span-0-444><a id=__codelineno-0-444 name=__codelineno-0-444></a>        <span class=bp>cls</span><span class=p>,</span>
</span><span id=__span-0-445><a id=__codelineno-0-445 name=__codelineno-0-445></a>        <span class=n>container</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-446><a id=__codelineno-0-446 name=__codelineno-0-446></a>        <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-447><a id=__codelineno-0-447 name=__codelineno-0-447></a>        <span class=n>credentials</span><span class=p>:</span> <span class=n>AnyAzureCredential</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-448><a id=__codelineno-0-448 name=__codelineno-0-448></a>        <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-449><a id=__codelineno-0-449 name=__codelineno-0-449></a>        <span class=n>config</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-450><a id=__codelineno-0-450 name=__codelineno-0-450></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Storage</span><span class=p>:</span> <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.StorageConcurrencySettings class="doc doc-heading"> <code>StorageConcurrencySettings</code> </h2> <div class="doc doc-contents "> <p>Configuration for how Icechunk uses its Storage instance</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a><span class=k>class</span> <span class=nc>StorageConcurrencySettings</span><span class=p>:</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Configuration for how Icechunk uses its Storage instance&quot;&quot;&quot;</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a>    <span class=nd>@property</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a>    <span class=k>def</span> <span class=nf>max_concurrent_requests_for_object</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a>    <span class=nd>@max_concurrent_requests_for_object</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a>    <span class=k>def</span> <span class=nf>max_concurrent_requests_for_object</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a>    <span class=nd>@property</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a>    <span class=k>def</span> <span class=nf>ideal_concurrent_request_size</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>int</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a>    <span class=nd>@ideal_concurrent_request_size</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a>    <span class=k>def</span> <span class=nf>ideal_concurrent_request_size</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.StorageSettings class="doc doc-heading"> <code>StorageSettings</code> </h2> <div class="doc doc-contents "> <p>Configuration for how Icechunk uses its Storage instance</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a><span class=k>class</span> <span class=nc>StorageSettings</span><span class=p>:</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Configuration for how Icechunk uses its Storage instance&quot;&quot;&quot;</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a>    <span class=nd>@property</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a>    <span class=k>def</span> <span class=nf>concurrency</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>StorageConcurrencySettings</span><span class=p>:</span> <span class=o>...</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a>    <span class=nd>@concurrency</span><span class=o>.</span><span class=n>setter</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a>    <span class=k>def</span> <span class=nf>concurrency</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>value</span><span class=p>:</span> <span class=n>StorageConcurrencySettings</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=icechunk.VersionSelection class="doc doc-heading"> <code>VersionSelection</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code>Enum</code></p> <p>Enum for selecting the which version of a conflict</p> <details class=quote> <summary>Source code in <code>icechunk/_icechunk_python.pyi</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-452>452</a></span>
<span class=normal><a href=#__codelineno-0-453>453</a></span>
<span class=normal><a href=#__codelineno-0-454>454</a></span>
<span class=normal><a href=#__codelineno-0-455>455</a></span>
<span class=normal><a href=#__codelineno-0-456>456</a></span>
<span class=normal><a href=#__codelineno-0-457>457</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-452><a id=__codelineno-0-452 name=__codelineno-0-452></a><span class=k>class</span> <span class=nc>VersionSelection</span><span class=p>(</span><span class=n>Enum</span><span class=p>):</span>
</span><span id=__span-0-453><a id=__codelineno-0-453 name=__codelineno-0-453></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Enum for selecting the which version of a conflict&quot;&quot;&quot;</span>
</span><span id=__span-0-454><a id=__codelineno-0-454 name=__codelineno-0-454></a>
</span><span id=__span-0-455><a id=__codelineno-0-455 name=__codelineno-0-455></a>    <span class=n>Fail</span> <span class=o>=</span> <span class=mi>0</span>
</span><span id=__span-0-456><a id=__codelineno-0-456 name=__codelineno-0-456></a>    <span class=n>UseOurs</span> <span class=o>=</span> <span class=mi>1</span>
</span><span id=__span-0-457><a id=__codelineno-0-457 name=__codelineno-0-457></a>    <span class=n>UseTheirs</span> <span class=o>=</span> <span class=mi>2</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.azure_credentials class="doc doc-heading"> <code class="highlight language-python"><span class=n>azure_credentials</span><span class=p>(</span><span class=o>*</span><span class=p>,</span> <span class=n>access_key</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>sas_token</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>bearer_token</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>from_env</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Create credentials Azure Blob Storage object store.</p> <p>If all arguments are None, credentials are fetched from the operative system environment.</p> <details class=quote> <summary>Source code in <code>icechunk/credentials.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-256>256</a></span>
<span class=normal><a href=#__codelineno-0-257>257</a></span>
<span class=normal><a href=#__codelineno-0-258>258</a></span>
<span class=normal><a href=#__codelineno-0-259>259</a></span>
<span class=normal><a href=#__codelineno-0-260>260</a></span>
<span class=normal><a href=#__codelineno-0-261>261</a></span>
<span class=normal><a href=#__codelineno-0-262>262</a></span>
<span class=normal><a href=#__codelineno-0-263>263</a></span>
<span class=normal><a href=#__codelineno-0-264>264</a></span>
<span class=normal><a href=#__codelineno-0-265>265</a></span>
<span class=normal><a href=#__codelineno-0-266>266</a></span>
<span class=normal><a href=#__codelineno-0-267>267</a></span>
<span class=normal><a href=#__codelineno-0-268>268</a></span>
<span class=normal><a href=#__codelineno-0-269>269</a></span>
<span class=normal><a href=#__codelineno-0-270>270</a></span>
<span class=normal><a href=#__codelineno-0-271>271</a></span>
<span class=normal><a href=#__codelineno-0-272>272</a></span>
<span class=normal><a href=#__codelineno-0-273>273</a></span>
<span class=normal><a href=#__codelineno-0-274>274</a></span>
<span class=normal><a href=#__codelineno-0-275>275</a></span>
<span class=normal><a href=#__codelineno-0-276>276</a></span>
<span class=normal><a href=#__codelineno-0-277>277</a></span>
<span class=normal><a href=#__codelineno-0-278>278</a></span>
<span class=normal><a href=#__codelineno-0-279>279</a></span>
<span class=normal><a href=#__codelineno-0-280>280</a></span>
<span class=normal><a href=#__codelineno-0-281>281</a></span>
<span class=normal><a href=#__codelineno-0-282>282</a></span>
<span class=normal><a href=#__codelineno-0-283>283</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-256><a id=__codelineno-0-256 name=__codelineno-0-256></a><span class=k>def</span> <span class=nf>azure_credentials</span><span class=p>(</span>
</span><span id=__span-0-257><a id=__codelineno-0-257 name=__codelineno-0-257></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-258><a id=__codelineno-0-258 name=__codelineno-0-258></a>    <span class=n>access_key</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-259><a id=__codelineno-0-259 name=__codelineno-0-259></a>    <span class=n>sas_token</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-260><a id=__codelineno-0-260 name=__codelineno-0-260></a>    <span class=n>bearer_token</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-261><a id=__codelineno-0-261 name=__codelineno-0-261></a>    <span class=n>from_env</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-262><a id=__codelineno-0-262 name=__codelineno-0-262></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AnyAzureCredential</span><span class=p>:</span>
</span><span id=__span-0-263><a id=__codelineno-0-263 name=__codelineno-0-263></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create credentials Azure Blob Storage object store.</span>
</span><span id=__span-0-264><a id=__codelineno-0-264 name=__codelineno-0-264></a>
</span><span id=__span-0-265><a id=__codelineno-0-265 name=__codelineno-0-265></a><span class=sd>    If all arguments are None, credentials are fetched from the operative system environment.</span>
</span><span id=__span-0-266><a id=__codelineno-0-266 name=__codelineno-0-266></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-267><a id=__codelineno-0-267 name=__codelineno-0-267></a>    <span class=k>if</span> <span class=p>(</span><span class=n>from_env</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=n>from_env</span><span class=p>)</span> <span class=ow>and</span> <span class=p>(</span>
</span><span id=__span-0-268><a id=__codelineno-0-268 name=__codelineno-0-268></a>        <span class=n>access_key</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>sas_token</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>and</span> <span class=n>bearer_token</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-269><a id=__codelineno-0-269 name=__codelineno-0-269></a>    <span class=p>):</span>
</span><span id=__span-0-270><a id=__codelineno-0-270 name=__codelineno-0-270></a>        <span class=k>return</span> <span class=n>azure_from_env_credentials</span><span class=p>()</span>
</span><span id=__span-0-271><a id=__codelineno-0-271 name=__codelineno-0-271></a>
</span><span id=__span-0-272><a id=__codelineno-0-272 name=__codelineno-0-272></a>    <span class=k>if</span> <span class=p>(</span><span class=n>access_key</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>or</span> <span class=n>sas_token</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>or</span> <span class=n>bearer_token</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>)</span> <span class=ow>and</span> <span class=p>(</span>
</span><span id=__span-0-273><a id=__codelineno-0-273 name=__codelineno-0-273></a>        <span class=n>from_env</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>from_env</span>
</span><span id=__span-0-274><a id=__codelineno-0-274 name=__codelineno-0-274></a>    <span class=p>):</span>
</span><span id=__span-0-275><a id=__codelineno-0-275 name=__codelineno-0-275></a>        <span class=k>return</span> <span class=n>AzureCredentials</span><span class=o>.</span><span class=n>Static</span><span class=p>(</span>
</span><span id=__span-0-276><a id=__codelineno-0-276 name=__codelineno-0-276></a>            <span class=n>azure_static_credentials</span><span class=p>(</span>
</span><span id=__span-0-277><a id=__codelineno-0-277 name=__codelineno-0-277></a>                <span class=n>access_key</span><span class=o>=</span><span class=n>access_key</span><span class=p>,</span>
</span><span id=__span-0-278><a id=__codelineno-0-278 name=__codelineno-0-278></a>                <span class=n>sas_token</span><span class=o>=</span><span class=n>sas_token</span><span class=p>,</span>
</span><span id=__span-0-279><a id=__codelineno-0-279 name=__codelineno-0-279></a>                <span class=n>bearer_token</span><span class=o>=</span><span class=n>bearer_token</span><span class=p>,</span>
</span><span id=__span-0-280><a id=__codelineno-0-280 name=__codelineno-0-280></a>            <span class=p>)</span>
</span><span id=__span-0-281><a id=__codelineno-0-281 name=__codelineno-0-281></a>        <span class=p>)</span>
</span><span id=__span-0-282><a id=__codelineno-0-282 name=__codelineno-0-282></a>
</span><span id=__span-0-283><a id=__codelineno-0-283 name=__codelineno-0-283></a>    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Conflicting arguments to azure_credentials function&quot;</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.azure_from_env_credentials class="doc doc-heading"> <code class="highlight language-python"><span class=n>azure_from_env_credentials</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Instruct Azure Blob Storage object store to fetch credentials from the operative system environment.</p> <details class=quote> <summary>Source code in <code>icechunk/credentials.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-251>251</a></span>
<span class=normal><a href=#__codelineno-0-252>252</a></span>
<span class=normal><a href=#__codelineno-0-253>253</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-251><a id=__codelineno-0-251 name=__codelineno-0-251></a><span class=k>def</span> <span class=nf>azure_from_env_credentials</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>AzureCredentials</span><span class=o>.</span><span class=n>FromEnv</span><span class=p>:</span>
</span><span id=__span-0-252><a id=__codelineno-0-252 name=__codelineno-0-252></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Instruct Azure Blob Storage object store to fetch credentials from the operative system environment.&quot;&quot;&quot;</span>
</span><span id=__span-0-253><a id=__codelineno-0-253 name=__codelineno-0-253></a>    <span class=k>return</span> <span class=n>AzureCredentials</span><span class=o>.</span><span class=n>FromEnv</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.azure_static_credentials class="doc doc-heading"> <code class="highlight language-python"><span class=n>azure_static_credentials</span><span class=p>(</span><span class=o>*</span><span class=p>,</span> <span class=n>access_key</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>sas_token</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>bearer_token</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Create static credentials Azure Blob Storage object store.</p> <details class=quote> <summary>Source code in <code>icechunk/credentials.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-231>231</a></span>
<span class=normal><a href=#__codelineno-0-232>232</a></span>
<span class=normal><a href=#__codelineno-0-233>233</a></span>
<span class=normal><a href=#__codelineno-0-234>234</a></span>
<span class=normal><a href=#__codelineno-0-235>235</a></span>
<span class=normal><a href=#__codelineno-0-236>236</a></span>
<span class=normal><a href=#__codelineno-0-237>237</a></span>
<span class=normal><a href=#__codelineno-0-238>238</a></span>
<span class=normal><a href=#__codelineno-0-239>239</a></span>
<span class=normal><a href=#__codelineno-0-240>240</a></span>
<span class=normal><a href=#__codelineno-0-241>241</a></span>
<span class=normal><a href=#__codelineno-0-242>242</a></span>
<span class=normal><a href=#__codelineno-0-243>243</a></span>
<span class=normal><a href=#__codelineno-0-244>244</a></span>
<span class=normal><a href=#__codelineno-0-245>245</a></span>
<span class=normal><a href=#__codelineno-0-246>246</a></span>
<span class=normal><a href=#__codelineno-0-247>247</a></span>
<span class=normal><a href=#__codelineno-0-248>248</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-231><a id=__codelineno-0-231 name=__codelineno-0-231></a><span class=k>def</span> <span class=nf>azure_static_credentials</span><span class=p>(</span>
</span><span id=__span-0-232><a id=__codelineno-0-232 name=__codelineno-0-232></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-233><a id=__codelineno-0-233 name=__codelineno-0-233></a>    <span class=n>access_key</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-234><a id=__codelineno-0-234 name=__codelineno-0-234></a>    <span class=n>sas_token</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-235><a id=__codelineno-0-235 name=__codelineno-0-235></a>    <span class=n>bearer_token</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-236><a id=__codelineno-0-236 name=__codelineno-0-236></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AnyAzureStaticCredential</span><span class=p>:</span>
</span><span id=__span-0-237><a id=__codelineno-0-237 name=__codelineno-0-237></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create static credentials Azure Blob Storage object store.&quot;&quot;&quot;</span>
</span><span id=__span-0-238><a id=__codelineno-0-238 name=__codelineno-0-238></a>    <span class=k>if</span> <span class=p>[</span><span class=n>access_key</span><span class=p>,</span> <span class=n>sas_token</span><span class=p>,</span> <span class=n>bearer_token</span><span class=p>]</span><span class=o>.</span><span class=n>count</span><span class=p>(</span><span class=kc>None</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>2</span><span class=p>:</span>
</span><span id=__span-0-239><a id=__codelineno-0-239 name=__codelineno-0-239></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Conflicting arguments to azure_static_credentials function&quot;</span><span class=p>)</span>
</span><span id=__span-0-240><a id=__codelineno-0-240 name=__codelineno-0-240></a>    <span class=k>if</span> <span class=n>access_key</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-241><a id=__codelineno-0-241 name=__codelineno-0-241></a>        <span class=k>return</span> <span class=n>AzureStaticCredentials</span><span class=o>.</span><span class=n>AccessKey</span><span class=p>(</span><span class=n>access_key</span><span class=p>)</span>
</span><span id=__span-0-242><a id=__codelineno-0-242 name=__codelineno-0-242></a>    <span class=k>if</span> <span class=n>sas_token</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-243><a id=__codelineno-0-243 name=__codelineno-0-243></a>        <span class=k>return</span> <span class=n>AzureStaticCredentials</span><span class=o>.</span><span class=n>SasToken</span><span class=p>(</span><span class=n>sas_token</span><span class=p>)</span>
</span><span id=__span-0-244><a id=__codelineno-0-244 name=__codelineno-0-244></a>    <span class=k>if</span> <span class=n>bearer_token</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-245><a id=__codelineno-0-245 name=__codelineno-0-245></a>        <span class=k>return</span> <span class=n>AzureStaticCredentials</span><span class=o>.</span><span class=n>BearerToken</span><span class=p>(</span><span class=n>bearer_token</span><span class=p>)</span>
</span><span id=__span-0-246><a id=__codelineno-0-246 name=__codelineno-0-246></a>    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
</span><span id=__span-0-247><a id=__codelineno-0-247 name=__codelineno-0-247></a>        <span class=s2>&quot;No valid static credential provided for Azure Blob Storage object store&quot;</span>
</span><span id=__span-0-248><a id=__codelineno-0-248 name=__codelineno-0-248></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.azure_storage class="doc doc-heading"> <code class="highlight language-python"><span class=n>azure_storage</span><span class=p>(</span><span class=o>*</span><span class=p>,</span> <span class=n>container</span><span class=p>,</span> <span class=n>prefix</span><span class=p>,</span> <span class=n>access_key</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>sas_token</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>bearer_token</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>from_env</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>config</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Create a Storage instance that saves data in Azure Blob Storage object store.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>container</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> <p>The container where the repository will store its data</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>prefix</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> <p>The prefix within the container that is the root directory of the repository</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>access_key</code> </td> <td> <code>str | None</code> </td> <td> <div class=doc-md-description> <p>Azure Blob Storage credential access key</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>sas_token</code> </td> <td> <code>str | None</code> </td> <td> <div class=doc-md-description> <p>Azure Blob Storage credential SAS token</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>bearer_token</code> </td> <td> <code>str | None</code> </td> <td> <div class=doc-md-description> <p>Azure Blob Storage credential bearer token</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>from_env</code> </td> <td> <code>bool | None</code> </td> <td> <div class=doc-md-description> <p>Fetch credentials from the operative system environment</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/storage.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span>
<span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span>
<span class=normal><a href=#__codelineno-0-185>185</a></span>
<span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span>
<span class=normal><a href=#__codelineno-0-190>190</a></span>
<span class=normal><a href=#__codelineno-0-191>191</a></span>
<span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a><span class=k>def</span> <span class=nf>azure_storage</span><span class=p>(</span>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a>    <span class=n>container</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a>    <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a>    <span class=n>access_key</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a>    <span class=n>sas_token</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a>    <span class=n>bearer_token</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a>    <span class=n>from_env</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a>    <span class=n>config</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Storage</span><span class=p>:</span>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a Storage instance that saves data in Azure Blob Storage object store.</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a><span class=sd>    Parameters</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a><span class=sd>    ----------</span>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a><span class=sd>    container: str</span>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a><span class=sd>        The container where the repository will store its data</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a><span class=sd>    prefix: str</span>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a><span class=sd>        The prefix within the container that is the root directory of the repository</span>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a><span class=sd>    access_key: str | None</span>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a><span class=sd>        Azure Blob Storage credential access key</span>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a><span class=sd>    sas_token: str | None</span>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a><span class=sd>        Azure Blob Storage credential SAS token</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a><span class=sd>    bearer_token: str | None</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a><span class=sd>        Azure Blob Storage credential bearer token</span>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a><span class=sd>    from_env: bool | None</span>
</span><span id=__span-0-180><a id=__codelineno-0-180 name=__codelineno-0-180></a><span class=sd>        Fetch credentials from the operative system environment</span>
</span><span id=__span-0-181><a id=__codelineno-0-181 name=__codelineno-0-181></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182></a>    <span class=n>credentials</span> <span class=o>=</span> <span class=n>azure_credentials</span><span class=p>(</span>
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183></a>        <span class=n>access_key</span><span class=o>=</span><span class=n>access_key</span><span class=p>,</span>
</span><span id=__span-0-184><a id=__codelineno-0-184 name=__codelineno-0-184></a>        <span class=n>sas_token</span><span class=o>=</span><span class=n>sas_token</span><span class=p>,</span>
</span><span id=__span-0-185><a id=__codelineno-0-185 name=__codelineno-0-185></a>        <span class=n>bearer_token</span><span class=o>=</span><span class=n>bearer_token</span><span class=p>,</span>
</span><span id=__span-0-186><a id=__codelineno-0-186 name=__codelineno-0-186></a>        <span class=n>from_env</span><span class=o>=</span><span class=n>from_env</span><span class=p>,</span>
</span><span id=__span-0-187><a id=__codelineno-0-187 name=__codelineno-0-187></a>    <span class=p>)</span>
</span><span id=__span-0-188><a id=__codelineno-0-188 name=__codelineno-0-188></a>    <span class=k>return</span> <span class=n>Storage</span><span class=o>.</span><span class=n>new_azure_blob</span><span class=p>(</span>
</span><span id=__span-0-189><a id=__codelineno-0-189 name=__codelineno-0-189></a>        <span class=n>container</span><span class=o>=</span><span class=n>container</span><span class=p>,</span>
</span><span id=__span-0-190><a id=__codelineno-0-190 name=__codelineno-0-190></a>        <span class=n>prefix</span><span class=o>=</span><span class=n>prefix</span><span class=p>,</span>
</span><span id=__span-0-191><a id=__codelineno-0-191 name=__codelineno-0-191></a>        <span class=n>credentials</span><span class=o>=</span><span class=n>credentials</span><span class=p>,</span>
</span><span id=__span-0-192><a id=__codelineno-0-192 name=__codelineno-0-192></a>        <span class=n>config</span><span class=o>=</span><span class=n>config</span><span class=p>,</span>
</span><span id=__span-0-193><a id=__codelineno-0-193 name=__codelineno-0-193></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.containers_credentials class="doc doc-heading"> <code class="highlight language-python"><span class=n>containers_credentials</span><span class=p>(</span><span class=n>m</span><span class=o>=</span><span class=p>{},</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Build a map of credentials for virtual chunk containers.</p> <p>Example usage: <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>import icechunk as ic
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>config = ic.RepositoryConfig.default()
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>config.inline_chunk_threshold_bytes = 512
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>virtual_store_config = ic.s3_store(
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>    region=&quot;us-east-1&quot;,
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>    endpoint_url=&quot;http://localhost:9000&quot;,
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>    allow_http=True,
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>    s3_compatible=True,
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a>)
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a>container = ic.VirtualChunkContainer(&quot;s3&quot;, &quot;s3://&quot;, virtual_store_config)
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a>config.set_virtual_chunk_container(container)
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a>credentials = ic.containers_credentials(
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a>    s3=ic.s3_credentials(access_key_id=&quot;ACCESS_KEY&quot;, secret_access_key=&quot;SECRET&quot;)
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a>)
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a>repo = ic.Repository.create(
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>    storage=ic.local_filesystem_storage(store_path),
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a>    config=config,
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a>    virtual_chunk_credentials=credentials,
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a>)
</span></code></pre></div></p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>m</code> </td> <td> <code>Mapping[str, AnyS3Credential]</code> </td> <td> <div class=doc-md-description> <p>A mapping from container name to credentials.</p> </div> </td> <td> <code>{}</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/credentials.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-286>286</a></span>
<span class=normal><a href=#__codelineno-0-287>287</a></span>
<span class=normal><a href=#__codelineno-0-288>288</a></span>
<span class=normal><a href=#__codelineno-0-289>289</a></span>
<span class=normal><a href=#__codelineno-0-290>290</a></span>
<span class=normal><a href=#__codelineno-0-291>291</a></span>
<span class=normal><a href=#__codelineno-0-292>292</a></span>
<span class=normal><a href=#__codelineno-0-293>293</a></span>
<span class=normal><a href=#__codelineno-0-294>294</a></span>
<span class=normal><a href=#__codelineno-0-295>295</a></span>
<span class=normal><a href=#__codelineno-0-296>296</a></span>
<span class=normal><a href=#__codelineno-0-297>297</a></span>
<span class=normal><a href=#__codelineno-0-298>298</a></span>
<span class=normal><a href=#__codelineno-0-299>299</a></span>
<span class=normal><a href=#__codelineno-0-300>300</a></span>
<span class=normal><a href=#__codelineno-0-301>301</a></span>
<span class=normal><a href=#__codelineno-0-302>302</a></span>
<span class=normal><a href=#__codelineno-0-303>303</a></span>
<span class=normal><a href=#__codelineno-0-304>304</a></span>
<span class=normal><a href=#__codelineno-0-305>305</a></span>
<span class=normal><a href=#__codelineno-0-306>306</a></span>
<span class=normal><a href=#__codelineno-0-307>307</a></span>
<span class=normal><a href=#__codelineno-0-308>308</a></span>
<span class=normal><a href=#__codelineno-0-309>309</a></span>
<span class=normal><a href=#__codelineno-0-310>310</a></span>
<span class=normal><a href=#__codelineno-0-311>311</a></span>
<span class=normal><a href=#__codelineno-0-312>312</a></span>
<span class=normal><a href=#__codelineno-0-313>313</a></span>
<span class=normal><a href=#__codelineno-0-314>314</a></span>
<span class=normal><a href=#__codelineno-0-315>315</a></span>
<span class=normal><a href=#__codelineno-0-316>316</a></span>
<span class=normal><a href=#__codelineno-0-317>317</a></span>
<span class=normal><a href=#__codelineno-0-318>318</a></span>
<span class=normal><a href=#__codelineno-0-319>319</a></span>
<span class=normal><a href=#__codelineno-0-320>320</a></span>
<span class=normal><a href=#__codelineno-0-321>321</a></span>
<span class=normal><a href=#__codelineno-0-322>322</a></span>
<span class=normal><a href=#__codelineno-0-323>323</a></span>
<span class=normal><a href=#__codelineno-0-324>324</a></span>
<span class=normal><a href=#__codelineno-0-325>325</a></span>
<span class=normal><a href=#__codelineno-0-326>326</a></span>
<span class=normal><a href=#__codelineno-0-327>327</a></span>
<span class=normal><a href=#__codelineno-0-328>328</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-286><a id=__codelineno-0-286 name=__codelineno-0-286></a><span class=k>def</span> <span class=nf>containers_credentials</span><span class=p>(</span>
</span><span id=__span-0-287><a id=__codelineno-0-287 name=__codelineno-0-287></a>    <span class=n>m</span><span class=p>:</span> <span class=n>Mapping</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>AnyS3Credential</span><span class=p>]</span> <span class=o>=</span> <span class=p>{},</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>AnyS3Credential</span>
</span><span id=__span-0-288><a id=__codelineno-0-288 name=__codelineno-0-288></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Credentials</span><span class=o>.</span><span class=n>S3</span><span class=p>]:</span>
</span><span id=__span-0-289><a id=__codelineno-0-289 name=__codelineno-0-289></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Build a map of credentials for virtual chunk containers.</span>
</span><span id=__span-0-290><a id=__codelineno-0-290 name=__codelineno-0-290></a>
</span><span id=__span-0-291><a id=__codelineno-0-291 name=__codelineno-0-291></a><span class=sd>    Example usage:</span>
</span><span id=__span-0-292><a id=__codelineno-0-292 name=__codelineno-0-292></a><span class=sd>    ```</span>
</span><span id=__span-0-293><a id=__codelineno-0-293 name=__codelineno-0-293></a><span class=sd>    import icechunk as ic</span>
</span><span id=__span-0-294><a id=__codelineno-0-294 name=__codelineno-0-294></a>
</span><span id=__span-0-295><a id=__codelineno-0-295 name=__codelineno-0-295></a><span class=sd>    config = ic.RepositoryConfig.default()</span>
</span><span id=__span-0-296><a id=__codelineno-0-296 name=__codelineno-0-296></a><span class=sd>    config.inline_chunk_threshold_bytes = 512</span>
</span><span id=__span-0-297><a id=__codelineno-0-297 name=__codelineno-0-297></a>
</span><span id=__span-0-298><a id=__codelineno-0-298 name=__codelineno-0-298></a><span class=sd>    virtual_store_config = ic.s3_store(</span>
</span><span id=__span-0-299><a id=__codelineno-0-299 name=__codelineno-0-299></a><span class=sd>        region=&quot;us-east-1&quot;,</span>
</span><span id=__span-0-300><a id=__codelineno-0-300 name=__codelineno-0-300></a><span class=sd>        endpoint_url=&quot;http://localhost:9000&quot;,</span>
</span><span id=__span-0-301><a id=__codelineno-0-301 name=__codelineno-0-301></a><span class=sd>        allow_http=True,</span>
</span><span id=__span-0-302><a id=__codelineno-0-302 name=__codelineno-0-302></a><span class=sd>        s3_compatible=True,</span>
</span><span id=__span-0-303><a id=__codelineno-0-303 name=__codelineno-0-303></a><span class=sd>    )</span>
</span><span id=__span-0-304><a id=__codelineno-0-304 name=__codelineno-0-304></a><span class=sd>    container = ic.VirtualChunkContainer(&quot;s3&quot;, &quot;s3://&quot;, virtual_store_config)</span>
</span><span id=__span-0-305><a id=__codelineno-0-305 name=__codelineno-0-305></a><span class=sd>    config.set_virtual_chunk_container(container)</span>
</span><span id=__span-0-306><a id=__codelineno-0-306 name=__codelineno-0-306></a><span class=sd>    credentials = ic.containers_credentials(</span>
</span><span id=__span-0-307><a id=__codelineno-0-307 name=__codelineno-0-307></a><span class=sd>        s3=ic.s3_credentials(access_key_id=&quot;ACCESS_KEY&quot;, secret_access_key=&quot;SECRET&quot;)</span>
</span><span id=__span-0-308><a id=__codelineno-0-308 name=__codelineno-0-308></a><span class=sd>    )</span>
</span><span id=__span-0-309><a id=__codelineno-0-309 name=__codelineno-0-309></a>
</span><span id=__span-0-310><a id=__codelineno-0-310 name=__codelineno-0-310></a><span class=sd>    repo = ic.Repository.create(</span>
</span><span id=__span-0-311><a id=__codelineno-0-311 name=__codelineno-0-311></a><span class=sd>        storage=ic.local_filesystem_storage(store_path),</span>
</span><span id=__span-0-312><a id=__codelineno-0-312 name=__codelineno-0-312></a><span class=sd>        config=config,</span>
</span><span id=__span-0-313><a id=__codelineno-0-313 name=__codelineno-0-313></a><span class=sd>        virtual_chunk_credentials=credentials,</span>
</span><span id=__span-0-314><a id=__codelineno-0-314 name=__codelineno-0-314></a><span class=sd>    )</span>
</span><span id=__span-0-315><a id=__codelineno-0-315 name=__codelineno-0-315></a><span class=sd>    ```</span>
</span><span id=__span-0-316><a id=__codelineno-0-316 name=__codelineno-0-316></a>
</span><span id=__span-0-317><a id=__codelineno-0-317 name=__codelineno-0-317></a><span class=sd>    Parameters</span>
</span><span id=__span-0-318><a id=__codelineno-0-318 name=__codelineno-0-318></a><span class=sd>    ----------</span>
</span><span id=__span-0-319><a id=__codelineno-0-319 name=__codelineno-0-319></a><span class=sd>    m: Mapping[str, AnyS3Credential]</span>
</span><span id=__span-0-320><a id=__codelineno-0-320 name=__codelineno-0-320></a><span class=sd>        A mapping from container name to credentials.</span>
</span><span id=__span-0-321><a id=__codelineno-0-321 name=__codelineno-0-321></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-322><a id=__codelineno-0-322 name=__codelineno-0-322></a>    <span class=n>res</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-0-323><a id=__codelineno-0-323 name=__codelineno-0-323></a>    <span class=k>for</span> <span class=n>name</span><span class=p>,</span> <span class=n>cred</span> <span class=ow>in</span> <span class=p>{</span><span class=o>**</span><span class=n>m</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>}</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span><span id=__span-0-324><a id=__codelineno-0-324 name=__codelineno-0-324></a>        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>cred</span><span class=p>,</span> <span class=n>AnyS3Credential</span><span class=p>):</span>
</span><span id=__span-0-325><a id=__codelineno-0-325 name=__codelineno-0-325></a>            <span class=n>res</span><span class=p>[</span><span class=n>name</span><span class=p>]</span> <span class=o>=</span> <span class=n>Credentials</span><span class=o>.</span><span class=n>S3</span><span class=p>(</span><span class=n>cred</span><span class=p>)</span>
</span><span id=__span-0-326><a id=__codelineno-0-326 name=__codelineno-0-326></a>        <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-327><a id=__codelineno-0-327 name=__codelineno-0-327></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Unknown credential type </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=n>cred</span><span class=p>)</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-0-328><a id=__codelineno-0-328 name=__codelineno-0-328></a>    <span class=k>return</span> <span class=n>res</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.gcs_credentials class="doc doc-heading"> <code class="highlight language-python"><span class=n>gcs_credentials</span><span class=p>(</span><span class=o>*</span><span class=p>,</span> <span class=n>service_account_file</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>service_account_key</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>application_credentials</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>from_env</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Create credentials Google Cloud Storage object store.</p> <p>If all arguments are None, credentials are fetched from the operative system environment.</p> <details class=quote> <summary>Source code in <code>icechunk/credentials.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-197>197</a></span>
<span class=normal><a href=#__codelineno-0-198>198</a></span>
<span class=normal><a href=#__codelineno-0-199>199</a></span>
<span class=normal><a href=#__codelineno-0-200>200</a></span>
<span class=normal><a href=#__codelineno-0-201>201</a></span>
<span class=normal><a href=#__codelineno-0-202>202</a></span>
<span class=normal><a href=#__codelineno-0-203>203</a></span>
<span class=normal><a href=#__codelineno-0-204>204</a></span>
<span class=normal><a href=#__codelineno-0-205>205</a></span>
<span class=normal><a href=#__codelineno-0-206>206</a></span>
<span class=normal><a href=#__codelineno-0-207>207</a></span>
<span class=normal><a href=#__codelineno-0-208>208</a></span>
<span class=normal><a href=#__codelineno-0-209>209</a></span>
<span class=normal><a href=#__codelineno-0-210>210</a></span>
<span class=normal><a href=#__codelineno-0-211>211</a></span>
<span class=normal><a href=#__codelineno-0-212>212</a></span>
<span class=normal><a href=#__codelineno-0-213>213</a></span>
<span class=normal><a href=#__codelineno-0-214>214</a></span>
<span class=normal><a href=#__codelineno-0-215>215</a></span>
<span class=normal><a href=#__codelineno-0-216>216</a></span>
<span class=normal><a href=#__codelineno-0-217>217</a></span>
<span class=normal><a href=#__codelineno-0-218>218</a></span>
<span class=normal><a href=#__codelineno-0-219>219</a></span>
<span class=normal><a href=#__codelineno-0-220>220</a></span>
<span class=normal><a href=#__codelineno-0-221>221</a></span>
<span class=normal><a href=#__codelineno-0-222>222</a></span>
<span class=normal><a href=#__codelineno-0-223>223</a></span>
<span class=normal><a href=#__codelineno-0-224>224</a></span>
<span class=normal><a href=#__codelineno-0-225>225</a></span>
<span class=normal><a href=#__codelineno-0-226>226</a></span>
<span class=normal><a href=#__codelineno-0-227>227</a></span>
<span class=normal><a href=#__codelineno-0-228>228</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-197><a id=__codelineno-0-197 name=__codelineno-0-197></a><span class=k>def</span> <span class=nf>gcs_credentials</span><span class=p>(</span>
</span><span id=__span-0-198><a id=__codelineno-0-198 name=__codelineno-0-198></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-199><a id=__codelineno-0-199 name=__codelineno-0-199></a>    <span class=n>service_account_file</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-200><a id=__codelineno-0-200 name=__codelineno-0-200></a>    <span class=n>service_account_key</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-201><a id=__codelineno-0-201 name=__codelineno-0-201></a>    <span class=n>application_credentials</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-202><a id=__codelineno-0-202 name=__codelineno-0-202></a>    <span class=n>from_env</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-203><a id=__codelineno-0-203 name=__codelineno-0-203></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AnyGcsCredential</span><span class=p>:</span>
</span><span id=__span-0-204><a id=__codelineno-0-204 name=__codelineno-0-204></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create credentials Google Cloud Storage object store.</span>
</span><span id=__span-0-205><a id=__codelineno-0-205 name=__codelineno-0-205></a>
</span><span id=__span-0-206><a id=__codelineno-0-206 name=__codelineno-0-206></a><span class=sd>    If all arguments are None, credentials are fetched from the operative system environment.</span>
</span><span id=__span-0-207><a id=__codelineno-0-207 name=__codelineno-0-207></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-208><a id=__codelineno-0-208 name=__codelineno-0-208></a>    <span class=k>if</span> <span class=p>(</span><span class=n>from_env</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=n>from_env</span><span class=p>)</span> <span class=ow>and</span> <span class=p>(</span>
</span><span id=__span-0-209><a id=__codelineno-0-209 name=__codelineno-0-209></a>        <span class=n>service_account_file</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-210><a id=__codelineno-0-210 name=__codelineno-0-210></a>        <span class=ow>and</span> <span class=n>service_account_key</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-211><a id=__codelineno-0-211 name=__codelineno-0-211></a>        <span class=ow>and</span> <span class=n>application_credentials</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-212><a id=__codelineno-0-212 name=__codelineno-0-212></a>    <span class=p>):</span>
</span><span id=__span-0-213><a id=__codelineno-0-213 name=__codelineno-0-213></a>        <span class=k>return</span> <span class=n>gcs_from_env_credentials</span><span class=p>()</span>
</span><span id=__span-0-214><a id=__codelineno-0-214 name=__codelineno-0-214></a>
</span><span id=__span-0-215><a id=__codelineno-0-215 name=__codelineno-0-215></a>    <span class=k>if</span> <span class=p>(</span>
</span><span id=__span-0-216><a id=__codelineno-0-216 name=__codelineno-0-216></a>        <span class=n>service_account_file</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
</span><span id=__span-0-217><a id=__codelineno-0-217 name=__codelineno-0-217></a>        <span class=ow>or</span> <span class=n>service_account_key</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
</span><span id=__span-0-218><a id=__codelineno-0-218 name=__codelineno-0-218></a>        <span class=ow>or</span> <span class=n>application_credentials</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
</span><span id=__span-0-219><a id=__codelineno-0-219 name=__codelineno-0-219></a>    <span class=p>)</span> <span class=ow>and</span> <span class=p>(</span><span class=n>from_env</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>from_env</span><span class=p>):</span>
</span><span id=__span-0-220><a id=__codelineno-0-220 name=__codelineno-0-220></a>        <span class=k>return</span> <span class=n>GcsCredentials</span><span class=o>.</span><span class=n>Static</span><span class=p>(</span>
</span><span id=__span-0-221><a id=__codelineno-0-221 name=__codelineno-0-221></a>            <span class=n>gcs_static_credentials</span><span class=p>(</span>
</span><span id=__span-0-222><a id=__codelineno-0-222 name=__codelineno-0-222></a>                <span class=n>service_account_file</span><span class=o>=</span><span class=n>service_account_file</span><span class=p>,</span>
</span><span id=__span-0-223><a id=__codelineno-0-223 name=__codelineno-0-223></a>                <span class=n>service_account_key</span><span class=o>=</span><span class=n>service_account_key</span><span class=p>,</span>
</span><span id=__span-0-224><a id=__codelineno-0-224 name=__codelineno-0-224></a>                <span class=n>application_credentials</span><span class=o>=</span><span class=n>application_credentials</span><span class=p>,</span>
</span><span id=__span-0-225><a id=__codelineno-0-225 name=__codelineno-0-225></a>            <span class=p>)</span>
</span><span id=__span-0-226><a id=__codelineno-0-226 name=__codelineno-0-226></a>        <span class=p>)</span>
</span><span id=__span-0-227><a id=__codelineno-0-227 name=__codelineno-0-227></a>
</span><span id=__span-0-228><a id=__codelineno-0-228 name=__codelineno-0-228></a>    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Conflicting arguments to gcs_credentials function&quot;</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.gcs_from_env_credentials class="doc doc-heading"> <code class="highlight language-python"><span class=n>gcs_from_env_credentials</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Instruct Google Cloud Storage object store to fetch credentials from the operative system environment.</p> <details class=quote> <summary>Source code in <code>icechunk/credentials.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span>
<span class=normal><a href=#__codelineno-0-194>194</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-192><a id=__codelineno-0-192 name=__codelineno-0-192></a><span class=k>def</span> <span class=nf>gcs_from_env_credentials</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>GcsCredentials</span><span class=o>.</span><span class=n>FromEnv</span><span class=p>:</span>
</span><span id=__span-0-193><a id=__codelineno-0-193 name=__codelineno-0-193></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Instruct Google Cloud Storage object store to fetch credentials from the operative system environment.&quot;&quot;&quot;</span>
</span><span id=__span-0-194><a id=__codelineno-0-194 name=__codelineno-0-194></a>    <span class=k>return</span> <span class=n>GcsCredentials</span><span class=o>.</span><span class=n>FromEnv</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.gcs_static_credentials class="doc doc-heading"> <code class="highlight language-python"><span class=n>gcs_static_credentials</span><span class=p>(</span><span class=o>*</span><span class=p>,</span> <span class=n>service_account_file</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>service_account_key</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>application_credentials</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Create static credentials Google Cloud Storage object store.</p> <details class=quote> <summary>Source code in <code>icechunk/credentials.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span>
<span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span>
<span class=normal><a href=#__codelineno-0-185>185</a></span>
<span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a><span class=k>def</span> <span class=nf>gcs_static_credentials</span><span class=p>(</span>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a>    <span class=n>service_account_file</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a>    <span class=n>service_account_key</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-180><a id=__codelineno-0-180 name=__codelineno-0-180></a>    <span class=n>application_credentials</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-181><a id=__codelineno-0-181 name=__codelineno-0-181></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AnyGcsStaticCredential</span><span class=p>:</span>
</span><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create static credentials Google Cloud Storage object store.&quot;&quot;&quot;</span>
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183></a>    <span class=k>if</span> <span class=n>service_account_file</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-184><a id=__codelineno-0-184 name=__codelineno-0-184></a>        <span class=k>return</span> <span class=n>GcsStaticCredentials</span><span class=o>.</span><span class=n>ServiceAccount</span><span class=p>(</span><span class=n>service_account_file</span><span class=p>)</span>
</span><span id=__span-0-185><a id=__codelineno-0-185 name=__codelineno-0-185></a>    <span class=k>if</span> <span class=n>service_account_key</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-186><a id=__codelineno-0-186 name=__codelineno-0-186></a>        <span class=k>return</span> <span class=n>GcsStaticCredentials</span><span class=o>.</span><span class=n>ServiceAccountKey</span><span class=p>(</span><span class=n>service_account_key</span><span class=p>)</span>
</span><span id=__span-0-187><a id=__codelineno-0-187 name=__codelineno-0-187></a>    <span class=k>if</span> <span class=n>application_credentials</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-188><a id=__codelineno-0-188 name=__codelineno-0-188></a>        <span class=k>return</span> <span class=n>GcsStaticCredentials</span><span class=o>.</span><span class=n>ApplicationCredentials</span><span class=p>(</span><span class=n>application_credentials</span><span class=p>)</span>
</span><span id=__span-0-189><a id=__codelineno-0-189 name=__codelineno-0-189></a>    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Conflicting arguments to gcs_static_credentials function&quot;</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.gcs_storage class="doc doc-heading"> <code class="highlight language-python"><span class=n>gcs_storage</span><span class=p>(</span><span class=o>*</span><span class=p>,</span> <span class=n>bucket</span><span class=p>,</span> <span class=n>prefix</span><span class=p>,</span> <span class=n>service_account_file</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>service_account_key</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>application_credentials</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>from_env</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>config</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Create a Storage instance that saves data in Google Cloud Storage object store.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>bucket</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> <p>The bucket where the repository will store its data</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>prefix</code> </td> <td> <code>str | None</code> </td> <td> <div class=doc-md-description> <p>The prefix within the bucket that is the root directory of the repository</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>from_env</code> </td> <td> <code>bool | None</code> </td> <td> <div class=doc-md-description> <p>Fetch credentials from the operative system environment</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/storage.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a><span class=k>def</span> <span class=nf>gcs_storage</span><span class=p>(</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a>    <span class=n>bucket</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a>    <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>    <span class=n>service_account_file</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a>    <span class=n>service_account_key</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>    <span class=n>application_credentials</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>    <span class=n>from_env</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a>    <span class=n>config</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Storage</span><span class=p>:</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a Storage instance that saves data in Google Cloud Storage object store.</span>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a><span class=sd>    Parameters</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a><span class=sd>    ----------</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a><span class=sd>    bucket: str</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a><span class=sd>        The bucket where the repository will store its data</span>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a><span class=sd>    prefix: str | None</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a><span class=sd>        The prefix within the bucket that is the root directory of the repository</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a><span class=sd>    from_env: bool | None</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a><span class=sd>        Fetch credentials from the operative system environment</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>    <span class=n>credentials</span> <span class=o>=</span> <span class=n>gcs_credentials</span><span class=p>(</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>        <span class=n>service_account_file</span><span class=o>=</span><span class=n>service_account_file</span><span class=p>,</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>        <span class=n>service_account_key</span><span class=o>=</span><span class=n>service_account_key</span><span class=p>,</span>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>        <span class=n>application_credentials</span><span class=o>=</span><span class=n>application_credentials</span><span class=p>,</span>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a>        <span class=n>from_env</span><span class=o>=</span><span class=n>from_env</span><span class=p>,</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a>    <span class=p>)</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a>    <span class=k>return</span> <span class=n>Storage</span><span class=o>.</span><span class=n>new_gcs</span><span class=p>(</span>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a>        <span class=n>bucket</span><span class=o>=</span><span class=n>bucket</span><span class=p>,</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a>        <span class=n>prefix</span><span class=o>=</span><span class=n>prefix</span><span class=p>,</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a>        <span class=n>credentials</span><span class=o>=</span><span class=n>credentials</span><span class=p>,</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a>        <span class=n>config</span><span class=o>=</span><span class=n>config</span><span class=p>,</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.in_memory_storage class="doc doc-heading"> <code class="highlight language-python"><span class=n>in_memory_storage</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Create a Storage instance that saves data in memory.</p> <p>This Storage implementation is used for tests. Data will be lost after the process finishes, and can only be accesses through the Storage instance returned. Different instances don't share data.</p> <details class=quote> <summary>Source code in <code>icechunk/storage.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-27>27</a></span>
<span class=normal><a href=#__codelineno-0-28>28</a></span>
<span class=normal><a href=#__codelineno-0-29>29</a></span>
<span class=normal><a href=#__codelineno-0-30>30</a></span>
<span class=normal><a href=#__codelineno-0-31>31</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27></a><span class=k>def</span> <span class=nf>in_memory_storage</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>Storage</span><span class=p>:</span>
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a Storage instance that saves data in memory.</span>
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29></a>
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30></a><span class=sd>    This Storage implementation is used for tests. Data will be lost after the process finishes, and can only be accesses through the Storage instance returned. Different instances don&#39;t share data.&quot;&quot;&quot;</span>
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31></a>    <span class=k>return</span> <span class=n>Storage</span><span class=o>.</span><span class=n>new_in_memory</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.local_filesystem_storage class="doc doc-heading"> <code class="highlight language-python"><span class=n>local_filesystem_storage</span><span class=p>(</span><span class=n>path</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Create a Storage instance that saves data in the local file system.</p> <p>This Storage instance is not recommended for production data</p> <details class=quote> <summary>Source code in <code>icechunk/storage.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-34>34</a></span>
<span class=normal><a href=#__codelineno-0-35>35</a></span>
<span class=normal><a href=#__codelineno-0-36>36</a></span>
<span class=normal><a href=#__codelineno-0-37>37</a></span>
<span class=normal><a href=#__codelineno-0-38>38</a></span>
<span class=normal><a href=#__codelineno-0-39>39</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34></a><span class=k>def</span> <span class=nf>local_filesystem_storage</span><span class=p>(</span><span class=n>path</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Storage</span><span class=p>:</span>
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a Storage instance that saves data in the local file system.</span>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36></a>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37></a><span class=sd>    This Storage instance is not recommended for production data</span>
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39></a>    <span class=k>return</span> <span class=n>Storage</span><span class=o>.</span><span class=n>new_local_filesystem</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.s3_anonymous_credentials class="doc doc-heading"> <code class="highlight language-python"><span class=n>s3_anonymous_credentials</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Create no-signature credentials for S3 and S3 compatible object stores.</p> <details class=quote> <summary>Source code in <code>icechunk/credentials.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-85>85</a></span>
<span class=normal><a href=#__codelineno-0-86>86</a></span>
<span class=normal><a href=#__codelineno-0-87>87</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a><span class=k>def</span> <span class=nf>s3_anonymous_credentials</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>S3Credentials</span><span class=o>.</span><span class=n>Anonymous</span><span class=p>:</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create no-signature credentials for S3 and S3 compatible object stores.&quot;&quot;&quot;</span>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a>    <span class=k>return</span> <span class=n>S3Credentials</span><span class=o>.</span><span class=n>Anonymous</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.s3_credentials class="doc doc-heading"> <code class="highlight language-python"><span class=n>s3_credentials</span><span class=p>(</span><span class=o>*</span><span class=p>,</span> <span class=n>access_key_id</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>secret_access_key</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>session_token</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>expires_after</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>anonymous</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>from_env</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>get_credentials</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Create credentials for S3 and S3 compatible object stores.</p> <p>If all arguments are None, credentials are fetched from the environment.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>access_key_id</code> </td> <td> <code>str | None</code> </td> <td> <div class=doc-md-description> <p>S3 credential access key</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>secret_access_key</code> </td> <td> <code>str | None</code> </td> <td> <div class=doc-md-description> <p>S3 credential secret access key</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>session_token</code> </td> <td> <code>str | None</code> </td> <td> <div class=doc-md-description> <p>Optional S3 credential session token</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>expires_after</code> </td> <td> <code>datetime | None</code> </td> <td> <div class=doc-md-description> <p>Optional expiration for the object store credentials</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>anonymous</code> </td> <td> <code>bool | None</code> </td> <td> <div class=doc-md-description> <p>If set to True requests to the object store will not be signed</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>from_env</code> </td> <td> <code>bool | None</code> </td> <td> <div class=doc-md-description> <p>Fetch credentials from the operative system environment</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>get_credentials</code> </td> <td> <code>Callable[[], S3StaticCredentials] | None</code> </td> <td> <div class=doc-md-description> <p>Use this function to get and refresh object store credentials</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/credentials.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a><span class=k>def</span> <span class=nf>s3_credentials</span><span class=p>(</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a>    <span class=n>access_key_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a>    <span class=n>secret_access_key</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a>    <span class=n>session_token</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a>    <span class=n>expires_after</span><span class=p>:</span> <span class=n>datetime</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a>    <span class=n>anonymous</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a>    <span class=n>from_env</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a>    <span class=n>get_credentials</span><span class=p>:</span> <span class=n>Callable</span><span class=p>[[],</span> <span class=n>S3StaticCredentials</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>AnyS3Credential</span><span class=p>:</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create credentials for S3 and S3 compatible object stores.</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a><span class=sd>    If all arguments are None, credentials are fetched from the environment.</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a><span class=sd>    Parameters</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a><span class=sd>    ----------</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a><span class=sd>    access_key_id: str | None</span>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a><span class=sd>        S3 credential access key</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a><span class=sd>    secret_access_key: str | None</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a><span class=sd>        S3 credential secret access key</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a><span class=sd>    session_token: str | None</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a><span class=sd>        Optional S3 credential session token</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a><span class=sd>    expires_after: datetime | None</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a><span class=sd>        Optional expiration for the object store credentials</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a><span class=sd>    anonymous: bool | None</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a><span class=sd>        If set to True requests to the object store will not be signed</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a><span class=sd>    from_env: bool | None</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a><span class=sd>        Fetch credentials from the operative system environment</span>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a><span class=sd>    get_credentials: Callable[[], S3StaticCredentials] | None</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a><span class=sd>        Use this function to get and refresh object store credentials</span>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>    <span class=k>if</span> <span class=p>(</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a>        <span class=p>(</span><span class=n>from_env</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=n>from_env</span><span class=p>)</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a>        <span class=ow>and</span> <span class=n>access_key_id</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a>        <span class=ow>and</span> <span class=n>secret_access_key</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a>        <span class=ow>and</span> <span class=n>session_token</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a>        <span class=ow>and</span> <span class=n>expires_after</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a>        <span class=ow>and</span> <span class=ow>not</span> <span class=n>anonymous</span>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a>        <span class=ow>and</span> <span class=n>get_credentials</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a>    <span class=p>):</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>        <span class=k>return</span> <span class=n>s3_from_env_credentials</span><span class=p>()</span>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a>    <span class=k>if</span> <span class=p>(</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>        <span class=n>anonymous</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a>        <span class=ow>and</span> <span class=n>access_key_id</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a>        <span class=ow>and</span> <span class=n>secret_access_key</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>        <span class=ow>and</span> <span class=n>session_token</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>        <span class=ow>and</span> <span class=n>expires_after</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>        <span class=ow>and</span> <span class=ow>not</span> <span class=n>from_env</span>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>        <span class=ow>and</span> <span class=n>get_credentials</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a>    <span class=p>):</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a>        <span class=k>return</span> <span class=n>s3_anonymous_credentials</span><span class=p>()</span>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a>    <span class=k>if</span> <span class=p>(</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a>        <span class=n>get_credentials</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a>        <span class=ow>and</span> <span class=n>access_key_id</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a>        <span class=ow>and</span> <span class=n>secret_access_key</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a>        <span class=ow>and</span> <span class=n>session_token</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a>        <span class=ow>and</span> <span class=n>expires_after</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a>        <span class=ow>and</span> <span class=ow>not</span> <span class=n>from_env</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a>        <span class=ow>and</span> <span class=ow>not</span> <span class=n>anonymous</span>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a>    <span class=p>):</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a>        <span class=k>return</span> <span class=n>s3_refreshable_credentials</span><span class=p>(</span><span class=n>get_credentials</span><span class=p>)</span>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a>    <span class=k>if</span> <span class=p>(</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a>        <span class=n>access_key_id</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a>        <span class=ow>and</span> <span class=n>secret_access_key</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a>        <span class=ow>and</span> <span class=ow>not</span> <span class=n>from_env</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a>        <span class=ow>and</span> <span class=ow>not</span> <span class=n>anonymous</span>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a>        <span class=ow>and</span> <span class=n>get_credentials</span> <span class=ow>is</span> <span class=kc>None</span>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a>    <span class=p>):</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a>        <span class=k>return</span> <span class=n>s3_static_credentials</span><span class=p>(</span>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a>            <span class=n>access_key_id</span><span class=o>=</span><span class=n>access_key_id</span><span class=p>,</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a>            <span class=n>secret_access_key</span><span class=o>=</span><span class=n>secret_access_key</span><span class=p>,</span>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a>            <span class=n>session_token</span><span class=o>=</span><span class=n>session_token</span><span class=p>,</span>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a>            <span class=n>expires_after</span><span class=o>=</span><span class=n>expires_after</span><span class=p>,</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a>        <span class=p>)</span>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a>    <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Conflicting arguments to s3_credentials function&quot;</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.s3_from_env_credentials class="doc doc-heading"> <code class="highlight language-python"><span class=n>s3_from_env_credentials</span><span class=p>()</span></code> </h2> <div class="doc doc-contents "> <p>Instruct S3 and S3 compatible object stores to gather credentials from the operative system environment.</p> <details class=quote> <summary>Source code in <code>icechunk/credentials.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-90>90</a></span>
<span class=normal><a href=#__codelineno-0-91>91</a></span>
<span class=normal><a href=#__codelineno-0-92>92</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a><span class=k>def</span> <span class=nf>s3_from_env_credentials</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>S3Credentials</span><span class=o>.</span><span class=n>FromEnv</span><span class=p>:</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Instruct S3 and S3 compatible object stores to gather credentials from the operative system environment.&quot;&quot;&quot;</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a>    <span class=k>return</span> <span class=n>S3Credentials</span><span class=o>.</span><span class=n>FromEnv</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.s3_refreshable_credentials class="doc doc-heading"> <code class="highlight language-python"><span class=n>s3_refreshable_credentials</span><span class=p>(</span><span class=n>get_credentials</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Create refreshable credentials for S3 and S3 compatible object stores.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>get_credentials</code> </td> <td> <code>Callable[[], S3StaticCredentials]</code> </td> <td> <div class=doc-md-description> <p>Use this function to get and refresh the credentials. The function must be pickable.</p> </div> </td> <td> <em>required</em> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/credentials.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-41>41</a></span>
<span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a><span class=k>def</span> <span class=nf>s3_refreshable_credentials</span><span class=p>(</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a>    <span class=n>get_credentials</span><span class=p>:</span> <span class=n>Callable</span><span class=p>[[],</span> <span class=n>S3StaticCredentials</span><span class=p>],</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>S3Credentials</span><span class=o>.</span><span class=n>Refreshable</span><span class=p>:</span>
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create refreshable credentials for S3 and S3 compatible object stores.</span>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45></a>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a><span class=sd>    Parameters</span>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a><span class=sd>    ----------</span>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a><span class=sd>    get_credentials: Callable[[], S3StaticCredentials]</span>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a><span class=sd>        Use this function to get and refresh the credentials. The function must be pickable.</span>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a>    <span class=k>return</span> <span class=n>S3Credentials</span><span class=o>.</span><span class=n>Refreshable</span><span class=p>(</span><span class=n>pickle</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>get_credentials</span><span class=p>))</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.s3_static_credentials class="doc doc-heading"> <code class="highlight language-python"><span class=n>s3_static_credentials</span><span class=p>(</span><span class=o>*</span><span class=p>,</span> <span class=n>access_key_id</span><span class=p>,</span> <span class=n>secret_access_key</span><span class=p>,</span> <span class=n>session_token</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>expires_after</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Create static credentials for S3 and S3 compatible object stores.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>access_key_id</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> <p>S3 credential access key</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>secret_access_key</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> <p>S3 credential secret access key</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>session_token</code> </td> <td> <code>str | None</code> </td> <td> <div class=doc-md-description> <p>Optional S3 credential session token</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>expires_after</code> </td> <td> <code>datetime | None</code> </td> <td> <div class=doc-md-description> <p>Optional expiration for the object store credentials</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/credentials.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-55>55</a></span>
<span class=normal><a href=#__codelineno-0-56>56</a></span>
<span class=normal><a href=#__codelineno-0-57>57</a></span>
<span class=normal><a href=#__codelineno-0-58>58</a></span>
<span class=normal><a href=#__codelineno-0-59>59</a></span>
<span class=normal><a href=#__codelineno-0-60>60</a></span>
<span class=normal><a href=#__codelineno-0-61>61</a></span>
<span class=normal><a href=#__codelineno-0-62>62</a></span>
<span class=normal><a href=#__codelineno-0-63>63</a></span>
<span class=normal><a href=#__codelineno-0-64>64</a></span>
<span class=normal><a href=#__codelineno-0-65>65</a></span>
<span class=normal><a href=#__codelineno-0-66>66</a></span>
<span class=normal><a href=#__codelineno-0-67>67</a></span>
<span class=normal><a href=#__codelineno-0-68>68</a></span>
<span class=normal><a href=#__codelineno-0-69>69</a></span>
<span class=normal><a href=#__codelineno-0-70>70</a></span>
<span class=normal><a href=#__codelineno-0-71>71</a></span>
<span class=normal><a href=#__codelineno-0-72>72</a></span>
<span class=normal><a href=#__codelineno-0-73>73</a></span>
<span class=normal><a href=#__codelineno-0-74>74</a></span>
<span class=normal><a href=#__codelineno-0-75>75</a></span>
<span class=normal><a href=#__codelineno-0-76>76</a></span>
<span class=normal><a href=#__codelineno-0-77>77</a></span>
<span class=normal><a href=#__codelineno-0-78>78</a></span>
<span class=normal><a href=#__codelineno-0-79>79</a></span>
<span class=normal><a href=#__codelineno-0-80>80</a></span>
<span class=normal><a href=#__codelineno-0-81>81</a></span>
<span class=normal><a href=#__codelineno-0-82>82</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a><span class=k>def</span> <span class=nf>s3_static_credentials</span><span class=p>(</span>
</span><span id=__span-0-56><a id=__codelineno-0-56 name=__codelineno-0-56></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-57><a id=__codelineno-0-57 name=__codelineno-0-57></a>    <span class=n>access_key_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a>    <span class=n>secret_access_key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a>    <span class=n>session_token</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a>    <span class=n>expires_after</span><span class=p>:</span> <span class=n>datetime</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>S3Credentials</span><span class=o>.</span><span class=n>Static</span><span class=p>:</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create static credentials for S3 and S3 compatible object stores.</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a><span class=sd>    Parameters</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a><span class=sd>    ----------</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a><span class=sd>    access_key_id: str | None</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a><span class=sd>        S3 credential access key</span>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a><span class=sd>    secret_access_key: str | None</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a><span class=sd>        S3 credential secret access key</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a><span class=sd>    session_token: str | None</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a><span class=sd>        Optional S3 credential session token</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a><span class=sd>    expires_after: datetime | None</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=sd>        Optional expiration for the object store credentials</span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a>    <span class=k>return</span> <span class=n>S3Credentials</span><span class=o>.</span><span class=n>Static</span><span class=p>(</span>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a>        <span class=n>S3StaticCredentials</span><span class=p>(</span>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a>            <span class=n>access_key_id</span><span class=o>=</span><span class=n>access_key_id</span><span class=p>,</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a>            <span class=n>secret_access_key</span><span class=o>=</span><span class=n>secret_access_key</span><span class=p>,</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a>            <span class=n>session_token</span><span class=o>=</span><span class=n>session_token</span><span class=p>,</span>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a>            <span class=n>expires_after</span><span class=o>=</span><span class=n>expires_after</span><span class=p>,</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a>        <span class=p>)</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.s3_storage class="doc doc-heading"> <code class="highlight language-python"><span class=n>s3_storage</span><span class=p>(</span><span class=o>*</span><span class=p>,</span> <span class=n>bucket</span><span class=p>,</span> <span class=n>prefix</span><span class=p>,</span> <span class=n>region</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>endpoint_url</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>allow_http</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>access_key_id</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>secret_access_key</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>session_token</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>expires_after</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>anonymous</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>from_env</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>get_credentials</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Create a Storage instance that saves data in S3 or S3 compatible object stores.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>bucket</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> <p>The bucket where the repository will store its data</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>prefix</code> </td> <td> <code>str | None</code> </td> <td> <div class=doc-md-description> <p>The prefix within the bucket that is the root directory of the repository</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>region</code> </td> <td> <code>str | None</code> </td> <td> <div class=doc-md-description> <p>The region to use in the object store, if <code>None</code> a default region will be used</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>endpoint_url</code> </td> <td> <code>str | None</code> </td> <td> <div class=doc-md-description> <p>Optional endpoint where the object store serves data, example: http://localhost:9000</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>allow_http</code> </td> <td> <code>bool</code> </td> <td> <div class=doc-md-description> <p>If the object store can be accessed using http protocol instead of https</p> </div> </td> <td> <code>False</code> </td> </tr> <tr class=doc-section-item> <td> <code>access_key_id</code> </td> <td> <code>str | None</code> </td> <td> <div class=doc-md-description> <p>S3 credential access key</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>secret_access_key</code> </td> <td> <code>str | None</code> </td> <td> <div class=doc-md-description> <p>S3 credential secret access key</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>session_token</code> </td> <td> <code>str | None</code> </td> <td> <div class=doc-md-description> <p>Optional S3 credential session token</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>expires_after</code> </td> <td> <code>datetime | None</code> </td> <td> <div class=doc-md-description> <p>Optional expiration for the object store credentials</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>anonymous</code> </td> <td> <code>bool | None</code> </td> <td> <div class=doc-md-description> <p>If set to True requests to the object store will not be signed</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>from_env</code> </td> <td> <code>bool | None</code> </td> <td> <div class=doc-md-description> <p>Fetch credentials from the operative system environment</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>get_credentials</code> </td> <td> <code>Callable[[], S3StaticCredentials] | None</code> </td> <td> <div class=doc-md-description> <p>Use this function to get and refresh object store credentials</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/storage.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-58> 58</a></span>
<span class=normal><a href=#__codelineno-0-59> 59</a></span>
<span class=normal><a href=#__codelineno-0-60> 60</a></span>
<span class=normal><a href=#__codelineno-0-61> 61</a></span>
<span class=normal><a href=#__codelineno-0-62> 62</a></span>
<span class=normal><a href=#__codelineno-0-63> 63</a></span>
<span class=normal><a href=#__codelineno-0-64> 64</a></span>
<span class=normal><a href=#__codelineno-0-65> 65</a></span>
<span class=normal><a href=#__codelineno-0-66> 66</a></span>
<span class=normal><a href=#__codelineno-0-67> 67</a></span>
<span class=normal><a href=#__codelineno-0-68> 68</a></span>
<span class=normal><a href=#__codelineno-0-69> 69</a></span>
<span class=normal><a href=#__codelineno-0-70> 70</a></span>
<span class=normal><a href=#__codelineno-0-71> 71</a></span>
<span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-58><a id=__codelineno-0-58 name=__codelineno-0-58></a><span class=k>def</span> <span class=nf>s3_storage</span><span class=p>(</span>
</span><span id=__span-0-59><a id=__codelineno-0-59 name=__codelineno-0-59></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-60><a id=__codelineno-0-60 name=__codelineno-0-60></a>    <span class=n>bucket</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-61><a id=__codelineno-0-61 name=__codelineno-0-61></a>    <span class=n>prefix</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a>    <span class=n>region</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a>    <span class=n>endpoint_url</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a>    <span class=n>allow_http</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a>    <span class=n>access_key_id</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a>    <span class=n>secret_access_key</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-67><a id=__codelineno-0-67 name=__codelineno-0-67></a>    <span class=n>session_token</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a>    <span class=n>expires_after</span><span class=p>:</span> <span class=n>datetime</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a>    <span class=n>anonymous</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a>    <span class=n>from_env</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a>    <span class=n>get_credentials</span><span class=p>:</span> <span class=n>Callable</span><span class=p>[[],</span> <span class=n>S3StaticCredentials</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Storage</span><span class=p>:</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a Storage instance that saves data in S3 or S3 compatible object stores.</span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a><span class=sd>    Parameters</span>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a><span class=sd>    ----------</span>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a><span class=sd>    bucket: str</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a><span class=sd>        The bucket where the repository will store its data</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a><span class=sd>    prefix: str | None</span>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a><span class=sd>        The prefix within the bucket that is the root directory of the repository</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a><span class=sd>    region: str | None</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a><span class=sd>        The region to use in the object store, if `None` a default region will be used</span>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a><span class=sd>    endpoint_url: str | None</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a><span class=sd>        Optional endpoint where the object store serves data, example: http://localhost:9000</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a><span class=sd>    allow_http: bool</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a><span class=sd>        If the object store can be accessed using http protocol instead of https</span>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a><span class=sd>    access_key_id: str | None</span>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a><span class=sd>        S3 credential access key</span>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a><span class=sd>    secret_access_key: str | None</span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a><span class=sd>        S3 credential secret access key</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a><span class=sd>    session_token: str | None</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a><span class=sd>        Optional S3 credential session token</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a><span class=sd>    expires_after: datetime | None</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a><span class=sd>        Optional expiration for the object store credentials</span>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a><span class=sd>    anonymous: bool | None</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a><span class=sd>        If set to True requests to the object store will not be signed</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a><span class=sd>    from_env: bool | None</span>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a><span class=sd>        Fetch credentials from the operative system environment</span>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a><span class=sd>    get_credentials: Callable[[], S3StaticCredentials] | None</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a><span class=sd>        Use this function to get and refresh object store credentials</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a>    <span class=n>credentials</span> <span class=o>=</span> <span class=n>s3_credentials</span><span class=p>(</span>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a>        <span class=n>access_key_id</span><span class=o>=</span><span class=n>access_key_id</span><span class=p>,</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a>        <span class=n>secret_access_key</span><span class=o>=</span><span class=n>secret_access_key</span><span class=p>,</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a>        <span class=n>session_token</span><span class=o>=</span><span class=n>session_token</span><span class=p>,</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a>        <span class=n>expires_after</span><span class=o>=</span><span class=n>expires_after</span><span class=p>,</span>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a>        <span class=n>anonymous</span><span class=o>=</span><span class=n>anonymous</span><span class=p>,</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a>        <span class=n>from_env</span><span class=o>=</span><span class=n>from_env</span><span class=p>,</span>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a>        <span class=n>get_credentials</span><span class=o>=</span><span class=n>get_credentials</span><span class=p>,</span>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a>    <span class=p>)</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a>    <span class=n>options</span> <span class=o>=</span> <span class=n>S3Options</span><span class=p>(</span><span class=n>region</span><span class=o>=</span><span class=n>region</span><span class=p>,</span> <span class=n>endpoint_url</span><span class=o>=</span><span class=n>endpoint_url</span><span class=p>,</span> <span class=n>allow_http</span><span class=o>=</span><span class=n>allow_http</span><span class=p>)</span>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a>    <span class=k>return</span> <span class=n>Storage</span><span class=o>.</span><span class=n>new_s3</span><span class=p>(</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a>        <span class=n>config</span><span class=o>=</span><span class=n>options</span><span class=p>,</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a>        <span class=n>bucket</span><span class=o>=</span><span class=n>bucket</span><span class=p>,</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a>        <span class=n>prefix</span><span class=o>=</span><span class=n>prefix</span><span class=p>,</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a>        <span class=n>credentials</span><span class=o>=</span><span class=n>credentials</span><span class=p>,</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.s3_store class="doc doc-heading"> <code class="highlight language-python"><span class=n>s3_store</span><span class=p>(</span><span class=n>region</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>endpoint_url</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>allow_http</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>anonymous</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>s3_compatible</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Build an ObjectStoreConfig instance for S3 or S3 compatible object stores.</p> <details class=quote> <summary>Source code in <code>icechunk/storage.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-42>42</a></span>
<span class=normal><a href=#__codelineno-0-43>43</a></span>
<span class=normal><a href=#__codelineno-0-44>44</a></span>
<span class=normal><a href=#__codelineno-0-45>45</a></span>
<span class=normal><a href=#__codelineno-0-46>46</a></span>
<span class=normal><a href=#__codelineno-0-47>47</a></span>
<span class=normal><a href=#__codelineno-0-48>48</a></span>
<span class=normal><a href=#__codelineno-0-49>49</a></span>
<span class=normal><a href=#__codelineno-0-50>50</a></span>
<span class=normal><a href=#__codelineno-0-51>51</a></span>
<span class=normal><a href=#__codelineno-0-52>52</a></span>
<span class=normal><a href=#__codelineno-0-53>53</a></span>
<span class=normal><a href=#__codelineno-0-54>54</a></span>
<span class=normal><a href=#__codelineno-0-55>55</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42></a><span class=k>def</span> <span class=nf>s3_store</span><span class=p>(</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43></a>    <span class=n>region</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-44><a id=__codelineno-0-44 name=__codelineno-0-44></a>    <span class=n>endpoint_url</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-45><a id=__codelineno-0-45 name=__codelineno-0-45></a>    <span class=n>allow_http</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
</span><span id=__span-0-46><a id=__codelineno-0-46 name=__codelineno-0-46></a>    <span class=n>anonymous</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
</span><span id=__span-0-47><a id=__codelineno-0-47 name=__codelineno-0-47></a>    <span class=n>s3_compatible</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>False</span><span class=p>,</span>
</span><span id=__span-0-48><a id=__codelineno-0-48 name=__codelineno-0-48></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ObjectStoreConfig</span><span class=o>.</span><span class=n>S3Compatible</span> <span class=o>|</span> <span class=n>ObjectStoreConfig</span><span class=o>.</span><span class=n>S3</span><span class=p>:</span>
</span><span id=__span-0-49><a id=__codelineno-0-49 name=__codelineno-0-49></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Build an ObjectStoreConfig instance for S3 or S3 compatible object stores.&quot;&quot;&quot;</span>
</span><span id=__span-0-50><a id=__codelineno-0-50 name=__codelineno-0-50></a>    <span class=n>options</span> <span class=o>=</span> <span class=n>S3Options</span><span class=p>(</span><span class=n>region</span><span class=o>=</span><span class=n>region</span><span class=p>,</span> <span class=n>endpoint_url</span><span class=o>=</span><span class=n>endpoint_url</span><span class=p>,</span> <span class=n>allow_http</span><span class=o>=</span><span class=n>allow_http</span><span class=p>)</span>
</span><span id=__span-0-51><a id=__codelineno-0-51 name=__codelineno-0-51></a>    <span class=k>return</span> <span class=p>(</span>
</span><span id=__span-0-52><a id=__codelineno-0-52 name=__codelineno-0-52></a>        <span class=n>ObjectStoreConfig</span><span class=o>.</span><span class=n>S3Compatible</span><span class=p>(</span><span class=n>options</span><span class=p>)</span>
</span><span id=__span-0-53><a id=__codelineno-0-53 name=__codelineno-0-53></a>        <span class=k>if</span> <span class=n>s3_compatible</span>
</span><span id=__span-0-54><a id=__codelineno-0-54 name=__codelineno-0-54></a>        <span class=k>else</span> <span class=n>ObjectStoreConfig</span><span class=o>.</span><span class=n>S3</span><span class=p>(</span><span class=n>options</span><span class=p>)</span>
</span><span id=__span-0-55><a id=__codelineno-0-55 name=__codelineno-0-55></a>    <span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-module"> <a id=icechunk.xarray></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=icechunk.xarray.XarrayDatasetWriter class="doc doc-heading"> <code>XarrayDatasetWriter</code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small> </span> </h2> <div class="doc doc-contents "> <p>Write Xarray Datasets to a group in an Icechunk store.</p> <p>This class is private API. Please do not use it.</p> <details class=quote> <summary>Source code in <code>icechunk/xarray.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-72> 72</a></span>
<span class=normal><a href=#__codelineno-0-73> 73</a></span>
<span class=normal><a href=#__codelineno-0-74> 74</a></span>
<span class=normal><a href=#__codelineno-0-75> 75</a></span>
<span class=normal><a href=#__codelineno-0-76> 76</a></span>
<span class=normal><a href=#__codelineno-0-77> 77</a></span>
<span class=normal><a href=#__codelineno-0-78> 78</a></span>
<span class=normal><a href=#__codelineno-0-79> 79</a></span>
<span class=normal><a href=#__codelineno-0-80> 80</a></span>
<span class=normal><a href=#__codelineno-0-81> 81</a></span>
<span class=normal><a href=#__codelineno-0-82> 82</a></span>
<span class=normal><a href=#__codelineno-0-83> 83</a></span>
<span class=normal><a href=#__codelineno-0-84> 84</a></span>
<span class=normal><a href=#__codelineno-0-85> 85</a></span>
<span class=normal><a href=#__codelineno-0-86> 86</a></span>
<span class=normal><a href=#__codelineno-0-87> 87</a></span>
<span class=normal><a href=#__codelineno-0-88> 88</a></span>
<span class=normal><a href=#__codelineno-0-89> 89</a></span>
<span class=normal><a href=#__codelineno-0-90> 90</a></span>
<span class=normal><a href=#__codelineno-0-91> 91</a></span>
<span class=normal><a href=#__codelineno-0-92> 92</a></span>
<span class=normal><a href=#__codelineno-0-93> 93</a></span>
<span class=normal><a href=#__codelineno-0-94> 94</a></span>
<span class=normal><a href=#__codelineno-0-95> 95</a></span>
<span class=normal><a href=#__codelineno-0-96> 96</a></span>
<span class=normal><a href=#__codelineno-0-97> 97</a></span>
<span class=normal><a href=#__codelineno-0-98> 98</a></span>
<span class=normal><a href=#__codelineno-0-99> 99</a></span>
<span class=normal><a href=#__codelineno-0-100>100</a></span>
<span class=normal><a href=#__codelineno-0-101>101</a></span>
<span class=normal><a href=#__codelineno-0-102>102</a></span>
<span class=normal><a href=#__codelineno-0-103>103</a></span>
<span class=normal><a href=#__codelineno-0-104>104</a></span>
<span class=normal><a href=#__codelineno-0-105>105</a></span>
<span class=normal><a href=#__codelineno-0-106>106</a></span>
<span class=normal><a href=#__codelineno-0-107>107</a></span>
<span class=normal><a href=#__codelineno-0-108>108</a></span>
<span class=normal><a href=#__codelineno-0-109>109</a></span>
<span class=normal><a href=#__codelineno-0-110>110</a></span>
<span class=normal><a href=#__codelineno-0-111>111</a></span>
<span class=normal><a href=#__codelineno-0-112>112</a></span>
<span class=normal><a href=#__codelineno-0-113>113</a></span>
<span class=normal><a href=#__codelineno-0-114>114</a></span>
<span class=normal><a href=#__codelineno-0-115>115</a></span>
<span class=normal><a href=#__codelineno-0-116>116</a></span>
<span class=normal><a href=#__codelineno-0-117>117</a></span>
<span class=normal><a href=#__codelineno-0-118>118</a></span>
<span class=normal><a href=#__codelineno-0-119>119</a></span>
<span class=normal><a href=#__codelineno-0-120>120</a></span>
<span class=normal><a href=#__codelineno-0-121>121</a></span>
<span class=normal><a href=#__codelineno-0-122>122</a></span>
<span class=normal><a href=#__codelineno-0-123>123</a></span>
<span class=normal><a href=#__codelineno-0-124>124</a></span>
<span class=normal><a href=#__codelineno-0-125>125</a></span>
<span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span>
<span class=normal><a href=#__codelineno-0-146>146</a></span>
<span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span>
<span class=normal><a href=#__codelineno-0-158>158</a></span>
<span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span>
<span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span>
<span class=normal><a href=#__codelineno-0-185>185</a></span>
<span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span>
<span class=normal><a href=#__codelineno-0-190>190</a></span>
<span class=normal><a href=#__codelineno-0-191>191</a></span>
<span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a><span class=nd>@dataclass</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a><span class=k>class</span> <span class=nc>XarrayDatasetWriter</span><span class=p>:</span>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a><span class=sd>    Write Xarray Datasets to a group in an Icechunk store.</span>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a><span class=sd>    This class is private API. Please do not use it.</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a>    <span class=n>dataset</span><span class=p>:</span> <span class=n>Dataset</span> <span class=o>=</span> <span class=n>field</span><span class=p>(</span><span class=nb>repr</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a>    <span class=n>store</span><span class=p>:</span> <span class=n>IcechunkStore</span> <span class=o>=</span> <span class=n>field</span><span class=p>(</span><span class=n>kw_only</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a>    <span class=n>safe_chunks</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=n>field</span><span class=p>(</span><span class=n>kw_only</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a>    <span class=c1># TODO: uncomment when Zarr has support</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a>    <span class=c1># write_empty_chunks: bool = field(kw_only=True, default=True)</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a>    <span class=n>_initialized</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=n>field</span><span class=p>(</span><span class=n>default</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=nb>repr</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span><span id=__span-0-88><a id=__codelineno-0-88 name=__codelineno-0-88></a>
</span><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a>    <span class=n>xarray_store</span><span class=p>:</span> <span class=n>ZarrStore</span> <span class=o>=</span> <span class=n>field</span><span class=p>(</span><span class=n>init</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=nb>repr</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a>    <span class=n>writer</span><span class=p>:</span> <span class=n>LazyArrayWriter</span> <span class=o>=</span> <span class=n>field</span><span class=p>(</span><span class=n>init</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=nb>repr</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a>    <span class=k>def</span> <span class=nf>__post_init__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a>        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>store</span><span class=p>,</span> <span class=n>IcechunkStore</span><span class=p>):</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a>                <span class=sa>f</span><span class=s2>&quot;Please pass in an icechunk.Session. Received </span><span class=si>{</span><span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>store</span><span class=p>)</span><span class=si>!r}</span><span class=s2> instead.&quot;</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a>            <span class=p>)</span>
</span><span id=__span-0-97><a id=__codelineno-0-97 name=__codelineno-0-97></a>
</span><span id=__span-0-98><a id=__codelineno-0-98 name=__codelineno-0-98></a>    <span class=k>def</span> <span class=nf>_open_group</span><span class=p>(</span>
</span><span id=__span-0-99><a id=__codelineno-0-99 name=__codelineno-0-99></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-100><a id=__codelineno-0-100 name=__codelineno-0-100></a>        <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-101><a id=__codelineno-0-101 name=__codelineno-0-101></a>        <span class=n>group</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-102><a id=__codelineno-0-102 name=__codelineno-0-102></a>        <span class=n>mode</span><span class=p>:</span> <span class=n>ZarrWriteModes</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-103><a id=__codelineno-0-103 name=__codelineno-0-103></a>        <span class=n>append_dim</span><span class=p>:</span> <span class=n>Hashable</span> <span class=o>|</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-104><a id=__codelineno-0-104 name=__codelineno-0-104></a>        <span class=n>region</span><span class=p>:</span> <span class=n>Region</span><span class=p>,</span>
</span><span id=__span-0-105><a id=__codelineno-0-105 name=__codelineno-0-105></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-106><a id=__codelineno-0-106 name=__codelineno-0-106></a>        <span class=n>concrete_mode</span><span class=p>:</span> <span class=n>ZarrWriteModes</span> <span class=o>=</span> <span class=n>_choose_default_mode</span><span class=p>(</span>
</span><span id=__span-0-107><a id=__codelineno-0-107 name=__codelineno-0-107></a>            <span class=n>mode</span><span class=o>=</span><span class=n>mode</span><span class=p>,</span> <span class=n>append_dim</span><span class=o>=</span><span class=n>append_dim</span><span class=p>,</span> <span class=n>region</span><span class=o>=</span><span class=n>region</span>
</span><span id=__span-0-108><a id=__codelineno-0-108 name=__codelineno-0-108></a>        <span class=p>)</span>
</span><span id=__span-0-109><a id=__codelineno-0-109 name=__codelineno-0-109></a>
</span><span id=__span-0-110><a id=__codelineno-0-110 name=__codelineno-0-110></a>        <span class=bp>self</span><span class=o>.</span><span class=n>xarray_store</span> <span class=o>=</span> <span class=n>ZarrStore</span><span class=o>.</span><span class=n>open_group</span><span class=p>(</span>
</span><span id=__span-0-111><a id=__codelineno-0-111 name=__codelineno-0-111></a>            <span class=n>store</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>store</span><span class=p>,</span>
</span><span id=__span-0-112><a id=__codelineno-0-112 name=__codelineno-0-112></a>            <span class=n>group</span><span class=o>=</span><span class=n>group</span><span class=p>,</span>
</span><span id=__span-0-113><a id=__codelineno-0-113 name=__codelineno-0-113></a>            <span class=n>mode</span><span class=o>=</span><span class=n>concrete_mode</span><span class=p>,</span>
</span><span id=__span-0-114><a id=__codelineno-0-114 name=__codelineno-0-114></a>            <span class=n>zarr_format</span><span class=o>=</span><span class=mi>3</span><span class=p>,</span>
</span><span id=__span-0-115><a id=__codelineno-0-115 name=__codelineno-0-115></a>            <span class=n>append_dim</span><span class=o>=</span><span class=n>append_dim</span><span class=p>,</span>
</span><span id=__span-0-116><a id=__codelineno-0-116 name=__codelineno-0-116></a>            <span class=n>write_region</span><span class=o>=</span><span class=n>region</span><span class=p>,</span>
</span><span id=__span-0-117><a id=__codelineno-0-117 name=__codelineno-0-117></a>            <span class=n>safe_chunks</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>safe_chunks</span><span class=p>,</span>
</span><span id=__span-0-118><a id=__codelineno-0-118 name=__codelineno-0-118></a>            <span class=c1># TODO: uncomment when Zarr has support</span>
</span><span id=__span-0-119><a id=__codelineno-0-119 name=__codelineno-0-119></a>            <span class=c1># write_empty=self.write_empty_chunks,</span>
</span><span id=__span-0-120><a id=__codelineno-0-120 name=__codelineno-0-120></a>            <span class=n>synchronizer</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-121><a id=__codelineno-0-121 name=__codelineno-0-121></a>            <span class=n>consolidated</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-0-122><a id=__codelineno-0-122 name=__codelineno-0-122></a>            <span class=n>consolidate_on_close</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
</span><span id=__span-0-123><a id=__codelineno-0-123 name=__codelineno-0-123></a>            <span class=n>zarr_version</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-124><a id=__codelineno-0-124 name=__codelineno-0-124></a>        <span class=p>)</span>
</span><span id=__span-0-125><a id=__codelineno-0-125 name=__codelineno-0-125></a>
</span><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a>    <span class=k>def</span> <span class=nf>write_metadata</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>encoding</span><span class=p>:</span> <span class=n>Mapping</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a><span class=sd>        This method creates new Zarr arrays when necessary, writes attributes,</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a><span class=sd>        and any in-memory arrays.</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a>        <span class=kn>from</span> <span class=nn>xarray.backends.api</span> <span class=kn>import</span> <span class=n>_validate_dataset_names</span><span class=p>,</span> <span class=n>dump_to_store</span>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a>        <span class=c1># validate Dataset keys, DataArray names</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a>        <span class=n>_validate_dataset_names</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>dataset</span><span class=p>)</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>        <span class=k>if</span> <span class=n>encoding</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a>            <span class=n>encoding</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>        <span class=bp>self</span><span class=o>.</span><span class=n>xarray_store</span><span class=o>.</span><span class=n>_validate_encoding</span><span class=p>(</span><span class=n>encoding</span><span class=p>)</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a>        <span class=c1># This writes the metadata (zarr.json) for all arrays</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>        <span class=c1># This also will resize arrays for any appends</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>        <span class=bp>self</span><span class=o>.</span><span class=n>writer</span> <span class=o>=</span> <span class=n>LazyArrayWriter</span><span class=p>()</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>        <span class=n>dump_to_store</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>dataset</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>xarray_store</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>writer</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=n>encoding</span><span class=p>)</span>  <span class=c1># type: ignore[no-untyped-call]</span>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_initialized</span> <span class=o>=</span> <span class=kc>True</span>
</span><span id=__span-0-146><a id=__codelineno-0-146 name=__codelineno-0-146></a>
</span><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a>    <span class=k>def</span> <span class=nf>write_eager</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a><span class=sd>        Write in-memory variables to store.</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a><span class=sd>        Returns</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a><span class=sd>        -------</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a><span class=sd>        None</span>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_initialized</span><span class=p>:</span>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Please call `write_metadata` first.&quot;</span><span class=p>)</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a>        <span class=bp>self</span><span class=o>.</span><span class=n>writer</span><span class=o>.</span><span class=n>write_eager</span><span class=p>()</span>
</span><span id=__span-0-158><a id=__codelineno-0-158 name=__codelineno-0-158></a>
</span><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a>    <span class=k>def</span> <span class=nf>write_lazy</span><span class=p>(</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a>        <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a>        <span class=n>chunkmanager_store_kwargs</span><span class=p>:</span> <span class=n>MutableMapping</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a>        <span class=n>split_every</span><span class=p>:</span> <span class=nb>int</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a><span class=sd>        Write lazy arrays (e.g. dask) to store.</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a><span class=sd>        &quot;&quot;&quot;</span>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_initialized</span><span class=p>:</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Please call `write_metadata` first.&quot;</span><span class=p>)</span>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a>        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>writer</span><span class=o>.</span><span class=n>sources</span><span class=p>:</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a>            <span class=k>return</span>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a>        <span class=n>chunkmanager_store_kwargs</span> <span class=o>=</span> <span class=n>chunkmanager_store_kwargs</span> <span class=ow>or</span> <span class=p>{}</span>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a>        <span class=n>chunkmanager_store_kwargs</span><span class=p>[</span><span class=s2>&quot;load_stored&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a>        <span class=n>chunkmanager_store_kwargs</span><span class=p>[</span><span class=s2>&quot;return_stored&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a>        <span class=c1># This calls dask.array.store, and we receive a dask array where each chunk is a Zarr array</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a>        <span class=c1># each of those zarr.Array.store contains the changesets we need</span>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a>        <span class=n>stored_arrays</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>writer</span><span class=o>.</span><span class=n>sync</span><span class=p>(</span>
</span><span id=__span-0-180><a id=__codelineno-0-180 name=__codelineno-0-180></a>            <span class=n>compute</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>chunkmanager_store_kwargs</span><span class=o>=</span><span class=n>chunkmanager_store_kwargs</span>
</span><span id=__span-0-181><a id=__codelineno-0-181 name=__codelineno-0-181></a>        <span class=p>)</span>  <span class=c1># type: ignore[no-untyped-call]</span>
</span><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182></a>
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183></a>        <span class=c1># Now we tree-reduce all changesets</span>
</span><span id=__span-0-184><a id=__codelineno-0-184 name=__codelineno-0-184></a>        <span class=n>merged_session</span> <span class=o>=</span> <span class=n>stateful_store_reduce</span><span class=p>(</span>
</span><span id=__span-0-185><a id=__codelineno-0-185 name=__codelineno-0-185></a>            <span class=n>stored_arrays</span><span class=p>,</span>
</span><span id=__span-0-186><a id=__codelineno-0-186 name=__codelineno-0-186></a>            <span class=n>prefix</span><span class=o>=</span><span class=s2>&quot;ice-changeset&quot;</span><span class=p>,</span>
</span><span id=__span-0-187><a id=__codelineno-0-187 name=__codelineno-0-187></a>            <span class=n>chunk</span><span class=o>=</span><span class=n>extract_session</span><span class=p>,</span>
</span><span id=__span-0-188><a id=__codelineno-0-188 name=__codelineno-0-188></a>            <span class=n>aggregate</span><span class=o>=</span><span class=n>merge_sessions</span><span class=p>,</span>
</span><span id=__span-0-189><a id=__codelineno-0-189 name=__codelineno-0-189></a>            <span class=n>split_every</span><span class=o>=</span><span class=n>split_every</span><span class=p>,</span>
</span><span id=__span-0-190><a id=__codelineno-0-190 name=__codelineno-0-190></a>            <span class=n>compute</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-0-191><a id=__codelineno-0-191 name=__codelineno-0-191></a>            <span class=o>**</span><span class=n>chunkmanager_store_kwargs</span><span class=p>,</span>
</span><span id=__span-0-192><a id=__codelineno-0-192 name=__codelineno-0-192></a>        <span class=p>)</span>
</span><span id=__span-0-193><a id=__codelineno-0-193 name=__codelineno-0-193></a>        <span class=bp>self</span><span class=o>.</span><span class=n>store</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>merged_session</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=icechunk.xarray.XarrayDatasetWriter.write_eager class="doc doc-heading"> <code class="highlight language-python"><span class=n>write_eager</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Write in-memory variables to store.</p> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>None</code> </td> <td> <div class=doc-md-description> </div> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>icechunk/xarray.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-147>147</a></span>
<span class=normal><a href=#__codelineno-0-148>148</a></span>
<span class=normal><a href=#__codelineno-0-149>149</a></span>
<span class=normal><a href=#__codelineno-0-150>150</a></span>
<span class=normal><a href=#__codelineno-0-151>151</a></span>
<span class=normal><a href=#__codelineno-0-152>152</a></span>
<span class=normal><a href=#__codelineno-0-153>153</a></span>
<span class=normal><a href=#__codelineno-0-154>154</a></span>
<span class=normal><a href=#__codelineno-0-155>155</a></span>
<span class=normal><a href=#__codelineno-0-156>156</a></span>
<span class=normal><a href=#__codelineno-0-157>157</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-147><a id=__codelineno-0-147 name=__codelineno-0-147></a><span class=k>def</span> <span class=nf>write_eager</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-148><a id=__codelineno-0-148 name=__codelineno-0-148></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-149><a id=__codelineno-0-149 name=__codelineno-0-149></a><span class=sd>    Write in-memory variables to store.</span>
</span><span id=__span-0-150><a id=__codelineno-0-150 name=__codelineno-0-150></a>
</span><span id=__span-0-151><a id=__codelineno-0-151 name=__codelineno-0-151></a><span class=sd>    Returns</span>
</span><span id=__span-0-152><a id=__codelineno-0-152 name=__codelineno-0-152></a><span class=sd>    -------</span>
</span><span id=__span-0-153><a id=__codelineno-0-153 name=__codelineno-0-153></a><span class=sd>    None</span>
</span><span id=__span-0-154><a id=__codelineno-0-154 name=__codelineno-0-154></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-155><a id=__codelineno-0-155 name=__codelineno-0-155></a>    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_initialized</span><span class=p>:</span>
</span><span id=__span-0-156><a id=__codelineno-0-156 name=__codelineno-0-156></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Please call `write_metadata` first.&quot;</span><span class=p>)</span>
</span><span id=__span-0-157><a id=__codelineno-0-157 name=__codelineno-0-157></a>    <span class=bp>self</span><span class=o>.</span><span class=n>writer</span><span class=o>.</span><span class=n>write_eager</span><span class=p>()</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.xarray.XarrayDatasetWriter.write_lazy class="doc doc-heading"> <code class="highlight language-python"><span class=n>write_lazy</span><span class=p>(</span><span class=n>chunkmanager_store_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>split_every</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Write lazy arrays (e.g. dask) to store.</p> <details class=quote> <summary>Source code in <code>icechunk/xarray.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-159>159</a></span>
<span class=normal><a href=#__codelineno-0-160>160</a></span>
<span class=normal><a href=#__codelineno-0-161>161</a></span>
<span class=normal><a href=#__codelineno-0-162>162</a></span>
<span class=normal><a href=#__codelineno-0-163>163</a></span>
<span class=normal><a href=#__codelineno-0-164>164</a></span>
<span class=normal><a href=#__codelineno-0-165>165</a></span>
<span class=normal><a href=#__codelineno-0-166>166</a></span>
<span class=normal><a href=#__codelineno-0-167>167</a></span>
<span class=normal><a href=#__codelineno-0-168>168</a></span>
<span class=normal><a href=#__codelineno-0-169>169</a></span>
<span class=normal><a href=#__codelineno-0-170>170</a></span>
<span class=normal><a href=#__codelineno-0-171>171</a></span>
<span class=normal><a href=#__codelineno-0-172>172</a></span>
<span class=normal><a href=#__codelineno-0-173>173</a></span>
<span class=normal><a href=#__codelineno-0-174>174</a></span>
<span class=normal><a href=#__codelineno-0-175>175</a></span>
<span class=normal><a href=#__codelineno-0-176>176</a></span>
<span class=normal><a href=#__codelineno-0-177>177</a></span>
<span class=normal><a href=#__codelineno-0-178>178</a></span>
<span class=normal><a href=#__codelineno-0-179>179</a></span>
<span class=normal><a href=#__codelineno-0-180>180</a></span>
<span class=normal><a href=#__codelineno-0-181>181</a></span>
<span class=normal><a href=#__codelineno-0-182>182</a></span>
<span class=normal><a href=#__codelineno-0-183>183</a></span>
<span class=normal><a href=#__codelineno-0-184>184</a></span>
<span class=normal><a href=#__codelineno-0-185>185</a></span>
<span class=normal><a href=#__codelineno-0-186>186</a></span>
<span class=normal><a href=#__codelineno-0-187>187</a></span>
<span class=normal><a href=#__codelineno-0-188>188</a></span>
<span class=normal><a href=#__codelineno-0-189>189</a></span>
<span class=normal><a href=#__codelineno-0-190>190</a></span>
<span class=normal><a href=#__codelineno-0-191>191</a></span>
<span class=normal><a href=#__codelineno-0-192>192</a></span>
<span class=normal><a href=#__codelineno-0-193>193</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-159><a id=__codelineno-0-159 name=__codelineno-0-159></a><span class=k>def</span> <span class=nf>write_lazy</span><span class=p>(</span>
</span><span id=__span-0-160><a id=__codelineno-0-160 name=__codelineno-0-160></a>    <span class=bp>self</span><span class=p>,</span>
</span><span id=__span-0-161><a id=__codelineno-0-161 name=__codelineno-0-161></a>    <span class=n>chunkmanager_store_kwargs</span><span class=p>:</span> <span class=n>MutableMapping</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-162><a id=__codelineno-0-162 name=__codelineno-0-162></a>    <span class=n>split_every</span><span class=p>:</span> <span class=nb>int</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-163><a id=__codelineno-0-163 name=__codelineno-0-163></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-164><a id=__codelineno-0-164 name=__codelineno-0-164></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-165><a id=__codelineno-0-165 name=__codelineno-0-165></a><span class=sd>    Write lazy arrays (e.g. dask) to store.</span>
</span><span id=__span-0-166><a id=__codelineno-0-166 name=__codelineno-0-166></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-167><a id=__codelineno-0-167 name=__codelineno-0-167></a>    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_initialized</span><span class=p>:</span>
</span><span id=__span-0-168><a id=__codelineno-0-168 name=__codelineno-0-168></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Please call `write_metadata` first.&quot;</span><span class=p>)</span>
</span><span id=__span-0-169><a id=__codelineno-0-169 name=__codelineno-0-169></a>
</span><span id=__span-0-170><a id=__codelineno-0-170 name=__codelineno-0-170></a>    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>writer</span><span class=o>.</span><span class=n>sources</span><span class=p>:</span>
</span><span id=__span-0-171><a id=__codelineno-0-171 name=__codelineno-0-171></a>        <span class=k>return</span>
</span><span id=__span-0-172><a id=__codelineno-0-172 name=__codelineno-0-172></a>
</span><span id=__span-0-173><a id=__codelineno-0-173 name=__codelineno-0-173></a>    <span class=n>chunkmanager_store_kwargs</span> <span class=o>=</span> <span class=n>chunkmanager_store_kwargs</span> <span class=ow>or</span> <span class=p>{}</span>
</span><span id=__span-0-174><a id=__codelineno-0-174 name=__codelineno-0-174></a>    <span class=n>chunkmanager_store_kwargs</span><span class=p>[</span><span class=s2>&quot;load_stored&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-0-175><a id=__codelineno-0-175 name=__codelineno-0-175></a>    <span class=n>chunkmanager_store_kwargs</span><span class=p>[</span><span class=s2>&quot;return_stored&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>True</span>
</span><span id=__span-0-176><a id=__codelineno-0-176 name=__codelineno-0-176></a>
</span><span id=__span-0-177><a id=__codelineno-0-177 name=__codelineno-0-177></a>    <span class=c1># This calls dask.array.store, and we receive a dask array where each chunk is a Zarr array</span>
</span><span id=__span-0-178><a id=__codelineno-0-178 name=__codelineno-0-178></a>    <span class=c1># each of those zarr.Array.store contains the changesets we need</span>
</span><span id=__span-0-179><a id=__codelineno-0-179 name=__codelineno-0-179></a>    <span class=n>stored_arrays</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>writer</span><span class=o>.</span><span class=n>sync</span><span class=p>(</span>
</span><span id=__span-0-180><a id=__codelineno-0-180 name=__codelineno-0-180></a>        <span class=n>compute</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>chunkmanager_store_kwargs</span><span class=o>=</span><span class=n>chunkmanager_store_kwargs</span>
</span><span id=__span-0-181><a id=__codelineno-0-181 name=__codelineno-0-181></a>    <span class=p>)</span>  <span class=c1># type: ignore[no-untyped-call]</span>
</span><span id=__span-0-182><a id=__codelineno-0-182 name=__codelineno-0-182></a>
</span><span id=__span-0-183><a id=__codelineno-0-183 name=__codelineno-0-183></a>    <span class=c1># Now we tree-reduce all changesets</span>
</span><span id=__span-0-184><a id=__codelineno-0-184 name=__codelineno-0-184></a>    <span class=n>merged_session</span> <span class=o>=</span> <span class=n>stateful_store_reduce</span><span class=p>(</span>
</span><span id=__span-0-185><a id=__codelineno-0-185 name=__codelineno-0-185></a>        <span class=n>stored_arrays</span><span class=p>,</span>
</span><span id=__span-0-186><a id=__codelineno-0-186 name=__codelineno-0-186></a>        <span class=n>prefix</span><span class=o>=</span><span class=s2>&quot;ice-changeset&quot;</span><span class=p>,</span>
</span><span id=__span-0-187><a id=__codelineno-0-187 name=__codelineno-0-187></a>        <span class=n>chunk</span><span class=o>=</span><span class=n>extract_session</span><span class=p>,</span>
</span><span id=__span-0-188><a id=__codelineno-0-188 name=__codelineno-0-188></a>        <span class=n>aggregate</span><span class=o>=</span><span class=n>merge_sessions</span><span class=p>,</span>
</span><span id=__span-0-189><a id=__codelineno-0-189 name=__codelineno-0-189></a>        <span class=n>split_every</span><span class=o>=</span><span class=n>split_every</span><span class=p>,</span>
</span><span id=__span-0-190><a id=__codelineno-0-190 name=__codelineno-0-190></a>        <span class=n>compute</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-0-191><a id=__codelineno-0-191 name=__codelineno-0-191></a>        <span class=o>**</span><span class=n>chunkmanager_store_kwargs</span><span class=p>,</span>
</span><span id=__span-0-192><a id=__codelineno-0-192 name=__codelineno-0-192></a>    <span class=p>)</span>
</span><span id=__span-0-193><a id=__codelineno-0-193 name=__codelineno-0-193></a>    <span class=bp>self</span><span class=o>.</span><span class=n>store</span><span class=o>.</span><span class=n>session</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>merged_session</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=icechunk.xarray.XarrayDatasetWriter.write_metadata class="doc doc-heading"> <code class="highlight language-python"><span class=n>write_metadata</span><span class=p>(</span><span class=n>encoding</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>This method creates new Zarr arrays when necessary, writes attributes, and any in-memory arrays.</p> <details class=quote> <summary>Source code in <code>icechunk/xarray.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-126>126</a></span>
<span class=normal><a href=#__codelineno-0-127>127</a></span>
<span class=normal><a href=#__codelineno-0-128>128</a></span>
<span class=normal><a href=#__codelineno-0-129>129</a></span>
<span class=normal><a href=#__codelineno-0-130>130</a></span>
<span class=normal><a href=#__codelineno-0-131>131</a></span>
<span class=normal><a href=#__codelineno-0-132>132</a></span>
<span class=normal><a href=#__codelineno-0-133>133</a></span>
<span class=normal><a href=#__codelineno-0-134>134</a></span>
<span class=normal><a href=#__codelineno-0-135>135</a></span>
<span class=normal><a href=#__codelineno-0-136>136</a></span>
<span class=normal><a href=#__codelineno-0-137>137</a></span>
<span class=normal><a href=#__codelineno-0-138>138</a></span>
<span class=normal><a href=#__codelineno-0-139>139</a></span>
<span class=normal><a href=#__codelineno-0-140>140</a></span>
<span class=normal><a href=#__codelineno-0-141>141</a></span>
<span class=normal><a href=#__codelineno-0-142>142</a></span>
<span class=normal><a href=#__codelineno-0-143>143</a></span>
<span class=normal><a href=#__codelineno-0-144>144</a></span>
<span class=normal><a href=#__codelineno-0-145>145</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-126><a id=__codelineno-0-126 name=__codelineno-0-126></a><span class=k>def</span> <span class=nf>write_metadata</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>encoding</span><span class=p>:</span> <span class=n>Mapping</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-127><a id=__codelineno-0-127 name=__codelineno-0-127></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-128><a id=__codelineno-0-128 name=__codelineno-0-128></a><span class=sd>    This method creates new Zarr arrays when necessary, writes attributes,</span>
</span><span id=__span-0-129><a id=__codelineno-0-129 name=__codelineno-0-129></a><span class=sd>    and any in-memory arrays.</span>
</span><span id=__span-0-130><a id=__codelineno-0-130 name=__codelineno-0-130></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-131><a id=__codelineno-0-131 name=__codelineno-0-131></a>    <span class=kn>from</span> <span class=nn>xarray.backends.api</span> <span class=kn>import</span> <span class=n>_validate_dataset_names</span><span class=p>,</span> <span class=n>dump_to_store</span>
</span><span id=__span-0-132><a id=__codelineno-0-132 name=__codelineno-0-132></a>
</span><span id=__span-0-133><a id=__codelineno-0-133 name=__codelineno-0-133></a>    <span class=c1># validate Dataset keys, DataArray names</span>
</span><span id=__span-0-134><a id=__codelineno-0-134 name=__codelineno-0-134></a>    <span class=n>_validate_dataset_names</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>dataset</span><span class=p>)</span>
</span><span id=__span-0-135><a id=__codelineno-0-135 name=__codelineno-0-135></a>
</span><span id=__span-0-136><a id=__codelineno-0-136 name=__codelineno-0-136></a>    <span class=k>if</span> <span class=n>encoding</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-137><a id=__codelineno-0-137 name=__codelineno-0-137></a>        <span class=n>encoding</span> <span class=o>=</span> <span class=p>{}</span>
</span><span id=__span-0-138><a id=__codelineno-0-138 name=__codelineno-0-138></a>    <span class=bp>self</span><span class=o>.</span><span class=n>xarray_store</span><span class=o>.</span><span class=n>_validate_encoding</span><span class=p>(</span><span class=n>encoding</span><span class=p>)</span>
</span><span id=__span-0-139><a id=__codelineno-0-139 name=__codelineno-0-139></a>
</span><span id=__span-0-140><a id=__codelineno-0-140 name=__codelineno-0-140></a>    <span class=c1># This writes the metadata (zarr.json) for all arrays</span>
</span><span id=__span-0-141><a id=__codelineno-0-141 name=__codelineno-0-141></a>    <span class=c1># This also will resize arrays for any appends</span>
</span><span id=__span-0-142><a id=__codelineno-0-142 name=__codelineno-0-142></a>    <span class=bp>self</span><span class=o>.</span><span class=n>writer</span> <span class=o>=</span> <span class=n>LazyArrayWriter</span><span class=p>()</span>
</span><span id=__span-0-143><a id=__codelineno-0-143 name=__codelineno-0-143></a>    <span class=n>dump_to_store</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>dataset</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>xarray_store</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>writer</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=n>encoding</span><span class=p>)</span>  <span class=c1># type: ignore[no-untyped-call]</span>
</span><span id=__span-0-144><a id=__codelineno-0-144 name=__codelineno-0-144></a>
</span><span id=__span-0-145><a id=__codelineno-0-145 name=__codelineno-0-145></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_initialized</span> <span class=o>=</span> <span class=kc>True</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-function"> <h2 id=icechunk.xarray.to_icechunk class="doc doc-heading"> <code class="highlight language-python"><span class=n>to_icechunk</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=n>store</span><span class=p>,</span> <span class=o>*</span><span class=p>,</span> <span class=n>group</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>safe_chunks</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>append_dim</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>region</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>chunkmanager_store_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>split_every</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Write an Xarray Dataset to a group of an icechunk store.</p> <p><span class=doc-section-title>Parameters:</span></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>store</code> </td> <td> <code>(MutableMapping, str or path - like)</code> </td> <td> <div class=doc-md-description> <p>Store or path to directory in local or remote file system.</p> </div> </td> <td> <em>required</em> </td> </tr> <tr class=doc-section-item> <td> <code>mode</code> </td> <td> <code>&#34;w&#34;, &#34;w-&#34;, &#34;a&#34;, &#34;a-&#34;, r+&#34;, None</code> </td> <td> <div class=doc-md-description> <p>Persistence mode: "w" means create (overwrite if exists); "w-" means create (fail if exists); "a" means override all existing variables including dimension coordinates (create if does not exist); "a-" means only append those variables that have <code>append_dim</code>. "r+" means modify existing array <em>values</em> only (raise an error if any metadata or shapes would change). The default mode is "a" if <code>append_dim</code> is set. Otherwise, it is "r+" if <code>region</code> is set and <code>w-</code> otherwise.</p> </div> </td> <td> <code>&#34;w&#34;</code> </td> </tr> <tr class=doc-section-item> <td> <code>group</code> </td> <td> <code>str</code> </td> <td> <div class=doc-md-description> <p>Group path. (a.k.a. <code>path</code> in zarr terminology.)</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>encoding</code> </td> <td> <code>dict</code> </td> <td> <div class=doc-md-description> <p>Nested dictionary with variable names as keys and dictionaries of variable specific encodings as values, e.g., <code>{"my_variable": {"dtype": "int16", "scale_factor": 0.1,}, ...}</code></p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>append_dim</code> </td> <td> <code>hashable</code> </td> <td> <div class=doc-md-description> <p>If set, the dimension along which the data will be appended. All other dimensions on overridden variables must remain the same size.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>region</code> </td> <td> <code>dict or auto</code> </td> <td> <div class=doc-md-description> <p>Optional mapping from dimension names to either a) <code>"auto"</code>, or b) integer slices, indicating the region of existing zarr array(s) in which to write this dataset's data.</p> <p>If <code>"auto"</code> is provided the existing store will be opened and the region inferred by matching indexes. <code>"auto"</code> can be used as a single string, which will automatically infer the region for all dimensions, or as dictionary values for specific dimensions mixed together with explicit slices for other dimensions.</p> <p>Alternatively integer slices can be provided; for example, <code>{'x': slice(0, 1000), 'y': slice(10000, 11000)}</code> would indicate that values should be written to the region <code>0:1000</code> along <code>x</code> and <code>10000:11000</code> along <code>y</code>.</p> <p>Users are expected to ensure that the specified region aligns with Zarr chunk boundaries, and that dask chunks are also aligned. Xarray makes limited checks that these multiple chunk boundaries line up. It is possible to write incomplete chunks and corrupt the data with this option if you are not careful.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>safe_chunks</code> </td> <td> <code>bool</code> </td> <td> <div class=doc-md-description> <p>If True, only allow writes to when there is a many-to-one relationship between Zarr chunks (specified in encoding) and Dask chunks. Set False to override this restriction; however, data may become corrupted if Zarr arrays are written in parallel. In addition to the many-to-one relationship validation, it also detects partial chunks writes when using the region parameter, these partial chunks are considered unsafe in the mode "r+" but safe in the mode "a". Note: Even with these validations it can still be unsafe to write two or more chunked arrays in the same location in parallel if they are not writing in independent regions.</p> </div> </td> <td> <code>True</code> </td> </tr> <tr class=doc-section-item> <td> <code>chunkmanager_store_kwargs</code> </td> <td> <code>dict</code> </td> <td> <div class=doc-md-description> <p>Additional keyword arguments passed on to the <code>ChunkManager.store</code> method used to store chunked arrays. For example for a dask array additional kwargs will be passed eventually to <code>dask.array.store()</code>. Experimental API that should not be relied upon.</p> </div> </td> <td> <code>None</code> </td> </tr> <tr class=doc-section-item> <td> <code>split_every</code> </td> <td> <code>int | None</code> </td> <td> <div class=doc-md-description> <p>Number of tasks to merge at every level of the tree reduction.</p> </div> </td> <td> <code>None</code> </td> </tr> </tbody> </table> <p><span class=doc-section-title>Returns:</span></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr class=doc-section-item> <td> <code>None</code> </td> <td> <div class=doc-md-description> </div> </td> </tr> </tbody> </table> <details class=note open> <summary>Notes</summary> <p>Two restrictions apply to the use of <code>region</code>:</p> <ul> <li>If <code>region</code> is set, <em>all</em> variables in a dataset must have at least one dimension in common with the region. Other variables should be written in a separate single call to <code>to_zarr()</code>.</li> <li>Dimensions cannot be included in both <code>region</code> and <code>append_dim</code> at the same time. To create empty arrays to fill in with <code>region</code>, use the <code>XarrayDatasetWriter</code> directly.</li> </ul> </details> <details class=quote> <summary>Source code in <code>icechunk/xarray.py</code></summary> <div class="language-python highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-0-196>196</a></span>
<span class=normal><a href=#__codelineno-0-197>197</a></span>
<span class=normal><a href=#__codelineno-0-198>198</a></span>
<span class=normal><a href=#__codelineno-0-199>199</a></span>
<span class=normal><a href=#__codelineno-0-200>200</a></span>
<span class=normal><a href=#__codelineno-0-201>201</a></span>
<span class=normal><a href=#__codelineno-0-202>202</a></span>
<span class=normal><a href=#__codelineno-0-203>203</a></span>
<span class=normal><a href=#__codelineno-0-204>204</a></span>
<span class=normal><a href=#__codelineno-0-205>205</a></span>
<span class=normal><a href=#__codelineno-0-206>206</a></span>
<span class=normal><a href=#__codelineno-0-207>207</a></span>
<span class=normal><a href=#__codelineno-0-208>208</a></span>
<span class=normal><a href=#__codelineno-0-209>209</a></span>
<span class=normal><a href=#__codelineno-0-210>210</a></span>
<span class=normal><a href=#__codelineno-0-211>211</a></span>
<span class=normal><a href=#__codelineno-0-212>212</a></span>
<span class=normal><a href=#__codelineno-0-213>213</a></span>
<span class=normal><a href=#__codelineno-0-214>214</a></span>
<span class=normal><a href=#__codelineno-0-215>215</a></span>
<span class=normal><a href=#__codelineno-0-216>216</a></span>
<span class=normal><a href=#__codelineno-0-217>217</a></span>
<span class=normal><a href=#__codelineno-0-218>218</a></span>
<span class=normal><a href=#__codelineno-0-219>219</a></span>
<span class=normal><a href=#__codelineno-0-220>220</a></span>
<span class=normal><a href=#__codelineno-0-221>221</a></span>
<span class=normal><a href=#__codelineno-0-222>222</a></span>
<span class=normal><a href=#__codelineno-0-223>223</a></span>
<span class=normal><a href=#__codelineno-0-224>224</a></span>
<span class=normal><a href=#__codelineno-0-225>225</a></span>
<span class=normal><a href=#__codelineno-0-226>226</a></span>
<span class=normal><a href=#__codelineno-0-227>227</a></span>
<span class=normal><a href=#__codelineno-0-228>228</a></span>
<span class=normal><a href=#__codelineno-0-229>229</a></span>
<span class=normal><a href=#__codelineno-0-230>230</a></span>
<span class=normal><a href=#__codelineno-0-231>231</a></span>
<span class=normal><a href=#__codelineno-0-232>232</a></span>
<span class=normal><a href=#__codelineno-0-233>233</a></span>
<span class=normal><a href=#__codelineno-0-234>234</a></span>
<span class=normal><a href=#__codelineno-0-235>235</a></span>
<span class=normal><a href=#__codelineno-0-236>236</a></span>
<span class=normal><a href=#__codelineno-0-237>237</a></span>
<span class=normal><a href=#__codelineno-0-238>238</a></span>
<span class=normal><a href=#__codelineno-0-239>239</a></span>
<span class=normal><a href=#__codelineno-0-240>240</a></span>
<span class=normal><a href=#__codelineno-0-241>241</a></span>
<span class=normal><a href=#__codelineno-0-242>242</a></span>
<span class=normal><a href=#__codelineno-0-243>243</a></span>
<span class=normal><a href=#__codelineno-0-244>244</a></span>
<span class=normal><a href=#__codelineno-0-245>245</a></span>
<span class=normal><a href=#__codelineno-0-246>246</a></span>
<span class=normal><a href=#__codelineno-0-247>247</a></span>
<span class=normal><a href=#__codelineno-0-248>248</a></span>
<span class=normal><a href=#__codelineno-0-249>249</a></span>
<span class=normal><a href=#__codelineno-0-250>250</a></span>
<span class=normal><a href=#__codelineno-0-251>251</a></span>
<span class=normal><a href=#__codelineno-0-252>252</a></span>
<span class=normal><a href=#__codelineno-0-253>253</a></span>
<span class=normal><a href=#__codelineno-0-254>254</a></span>
<span class=normal><a href=#__codelineno-0-255>255</a></span>
<span class=normal><a href=#__codelineno-0-256>256</a></span>
<span class=normal><a href=#__codelineno-0-257>257</a></span>
<span class=normal><a href=#__codelineno-0-258>258</a></span>
<span class=normal><a href=#__codelineno-0-259>259</a></span>
<span class=normal><a href=#__codelineno-0-260>260</a></span>
<span class=normal><a href=#__codelineno-0-261>261</a></span>
<span class=normal><a href=#__codelineno-0-262>262</a></span>
<span class=normal><a href=#__codelineno-0-263>263</a></span>
<span class=normal><a href=#__codelineno-0-264>264</a></span>
<span class=normal><a href=#__codelineno-0-265>265</a></span>
<span class=normal><a href=#__codelineno-0-266>266</a></span>
<span class=normal><a href=#__codelineno-0-267>267</a></span>
<span class=normal><a href=#__codelineno-0-268>268</a></span>
<span class=normal><a href=#__codelineno-0-269>269</a></span>
<span class=normal><a href=#__codelineno-0-270>270</a></span>
<span class=normal><a href=#__codelineno-0-271>271</a></span>
<span class=normal><a href=#__codelineno-0-272>272</a></span>
<span class=normal><a href=#__codelineno-0-273>273</a></span>
<span class=normal><a href=#__codelineno-0-274>274</a></span>
<span class=normal><a href=#__codelineno-0-275>275</a></span>
<span class=normal><a href=#__codelineno-0-276>276</a></span>
<span class=normal><a href=#__codelineno-0-277>277</a></span>
<span class=normal><a href=#__codelineno-0-278>278</a></span>
<span class=normal><a href=#__codelineno-0-279>279</a></span>
<span class=normal><a href=#__codelineno-0-280>280</a></span>
<span class=normal><a href=#__codelineno-0-281>281</a></span>
<span class=normal><a href=#__codelineno-0-282>282</a></span>
<span class=normal><a href=#__codelineno-0-283>283</a></span>
<span class=normal><a href=#__codelineno-0-284>284</a></span>
<span class=normal><a href=#__codelineno-0-285>285</a></span>
<span class=normal><a href=#__codelineno-0-286>286</a></span>
<span class=normal><a href=#__codelineno-0-287>287</a></span>
<span class=normal><a href=#__codelineno-0-288>288</a></span>
<span class=normal><a href=#__codelineno-0-289>289</a></span>
<span class=normal><a href=#__codelineno-0-290>290</a></span>
<span class=normal><a href=#__codelineno-0-291>291</a></span>
<span class=normal><a href=#__codelineno-0-292>292</a></span>
<span class=normal><a href=#__codelineno-0-293>293</a></span>
<span class=normal><a href=#__codelineno-0-294>294</a></span>
<span class=normal><a href=#__codelineno-0-295>295</a></span>
<span class=normal><a href=#__codelineno-0-296>296</a></span>
<span class=normal><a href=#__codelineno-0-297>297</a></span>
<span class=normal><a href=#__codelineno-0-298>298</a></span>
<span class=normal><a href=#__codelineno-0-299>299</a></span>
<span class=normal><a href=#__codelineno-0-300>300</a></span>
<span class=normal><a href=#__codelineno-0-301>301</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-0-196><a id=__codelineno-0-196 name=__codelineno-0-196></a><span class=k>def</span> <span class=nf>to_icechunk</span><span class=p>(</span>
</span><span id=__span-0-197><a id=__codelineno-0-197 name=__codelineno-0-197></a>    <span class=n>dataset</span><span class=p>:</span> <span class=n>Dataset</span><span class=p>,</span>
</span><span id=__span-0-198><a id=__codelineno-0-198 name=__codelineno-0-198></a>    <span class=n>store</span><span class=p>:</span> <span class=n>IcechunkStore</span><span class=p>,</span>
</span><span id=__span-0-199><a id=__codelineno-0-199 name=__codelineno-0-199></a>    <span class=o>*</span><span class=p>,</span>
</span><span id=__span-0-200><a id=__codelineno-0-200 name=__codelineno-0-200></a>    <span class=n>group</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-201><a id=__codelineno-0-201 name=__codelineno-0-201></a>    <span class=n>mode</span><span class=p>:</span> <span class=n>ZarrWriteModes</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-202><a id=__codelineno-0-202 name=__codelineno-0-202></a>    <span class=c1># TODO: uncomment when Zarr has support</span>
</span><span id=__span-0-203><a id=__codelineno-0-203 name=__codelineno-0-203></a>    <span class=c1># write_empty_chunks: bool | None = None,</span>
</span><span id=__span-0-204><a id=__codelineno-0-204 name=__codelineno-0-204></a>    <span class=n>safe_chunks</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span><span class=p>,</span>
</span><span id=__span-0-205><a id=__codelineno-0-205 name=__codelineno-0-205></a>    <span class=n>append_dim</span><span class=p>:</span> <span class=n>Hashable</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-206><a id=__codelineno-0-206 name=__codelineno-0-206></a>    <span class=n>region</span><span class=p>:</span> <span class=n>Region</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-207><a id=__codelineno-0-207 name=__codelineno-0-207></a>    <span class=n>encoding</span><span class=p>:</span> <span class=n>Mapping</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-208><a id=__codelineno-0-208 name=__codelineno-0-208></a>    <span class=n>chunkmanager_store_kwargs</span><span class=p>:</span> <span class=n>MutableMapping</span><span class=p>[</span><span class=n>Any</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-209><a id=__codelineno-0-209 name=__codelineno-0-209></a>    <span class=n>split_every</span><span class=p>:</span> <span class=nb>int</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
</span><span id=__span-0-210><a id=__codelineno-0-210 name=__codelineno-0-210></a>    <span class=o>**</span><span class=n>kwargs</span><span class=p>:</span> <span class=n>Any</span><span class=p>,</span>
</span><span id=__span-0-211><a id=__codelineno-0-211 name=__codelineno-0-211></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-212><a id=__codelineno-0-212 name=__codelineno-0-212></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-0-213><a id=__codelineno-0-213 name=__codelineno-0-213></a><span class=sd>    Write an Xarray Dataset to a group of an icechunk store.</span>
</span><span id=__span-0-214><a id=__codelineno-0-214 name=__codelineno-0-214></a>
</span><span id=__span-0-215><a id=__codelineno-0-215 name=__codelineno-0-215></a><span class=sd>    Parameters</span>
</span><span id=__span-0-216><a id=__codelineno-0-216 name=__codelineno-0-216></a><span class=sd>    ----------</span>
</span><span id=__span-0-217><a id=__codelineno-0-217 name=__codelineno-0-217></a><span class=sd>    store : MutableMapping, str or path-like, optional</span>
</span><span id=__span-0-218><a id=__codelineno-0-218 name=__codelineno-0-218></a><span class=sd>        Store or path to directory in local or remote file system.</span>
</span><span id=__span-0-219><a id=__codelineno-0-219 name=__codelineno-0-219></a><span class=sd>    mode : {&quot;w&quot;, &quot;w-&quot;, &quot;a&quot;, &quot;a-&quot;, r+&quot;, None}, optional</span>
</span><span id=__span-0-220><a id=__codelineno-0-220 name=__codelineno-0-220></a><span class=sd>        Persistence mode: &quot;w&quot; means create (overwrite if exists);</span>
</span><span id=__span-0-221><a id=__codelineno-0-221 name=__codelineno-0-221></a><span class=sd>        &quot;w-&quot; means create (fail if exists);</span>
</span><span id=__span-0-222><a id=__codelineno-0-222 name=__codelineno-0-222></a><span class=sd>        &quot;a&quot; means override all existing variables including dimension coordinates (create if does not exist);</span>
</span><span id=__span-0-223><a id=__codelineno-0-223 name=__codelineno-0-223></a><span class=sd>        &quot;a-&quot; means only append those variables that have ``append_dim``.</span>
</span><span id=__span-0-224><a id=__codelineno-0-224 name=__codelineno-0-224></a><span class=sd>        &quot;r+&quot; means modify existing array *values* only (raise an error if</span>
</span><span id=__span-0-225><a id=__codelineno-0-225 name=__codelineno-0-225></a><span class=sd>        any metadata or shapes would change).</span>
</span><span id=__span-0-226><a id=__codelineno-0-226 name=__codelineno-0-226></a><span class=sd>        The default mode is &quot;a&quot; if ``append_dim`` is set. Otherwise, it is</span>
</span><span id=__span-0-227><a id=__codelineno-0-227 name=__codelineno-0-227></a><span class=sd>        &quot;r+&quot; if ``region`` is set and ``w-`` otherwise.</span>
</span><span id=__span-0-228><a id=__codelineno-0-228 name=__codelineno-0-228></a><span class=sd>    group : str, optional</span>
</span><span id=__span-0-229><a id=__codelineno-0-229 name=__codelineno-0-229></a><span class=sd>        Group path. (a.k.a. `path` in zarr terminology.)</span>
</span><span id=__span-0-230><a id=__codelineno-0-230 name=__codelineno-0-230></a><span class=sd>    encoding : dict, optional</span>
</span><span id=__span-0-231><a id=__codelineno-0-231 name=__codelineno-0-231></a><span class=sd>        Nested dictionary with variable names as keys and dictionaries of</span>
</span><span id=__span-0-232><a id=__codelineno-0-232 name=__codelineno-0-232></a><span class=sd>        variable specific encodings as values, e.g.,</span>
</span><span id=__span-0-233><a id=__codelineno-0-233 name=__codelineno-0-233></a><span class=sd>        ``{&quot;my_variable&quot;: {&quot;dtype&quot;: &quot;int16&quot;, &quot;scale_factor&quot;: 0.1,}, ...}``</span>
</span><span id=__span-0-234><a id=__codelineno-0-234 name=__codelineno-0-234></a><span class=sd>    append_dim : hashable, optional</span>
</span><span id=__span-0-235><a id=__codelineno-0-235 name=__codelineno-0-235></a><span class=sd>        If set, the dimension along which the data will be appended. All</span>
</span><span id=__span-0-236><a id=__codelineno-0-236 name=__codelineno-0-236></a><span class=sd>        other dimensions on overridden variables must remain the same size.</span>
</span><span id=__span-0-237><a id=__codelineno-0-237 name=__codelineno-0-237></a><span class=sd>    region : dict or &quot;auto&quot;, optional</span>
</span><span id=__span-0-238><a id=__codelineno-0-238 name=__codelineno-0-238></a><span class=sd>        Optional mapping from dimension names to either a) ``&quot;auto&quot;``, or b) integer</span>
</span><span id=__span-0-239><a id=__codelineno-0-239 name=__codelineno-0-239></a><span class=sd>        slices, indicating the region of existing zarr array(s) in which to write</span>
</span><span id=__span-0-240><a id=__codelineno-0-240 name=__codelineno-0-240></a><span class=sd>        this dataset&#39;s data.</span>
</span><span id=__span-0-241><a id=__codelineno-0-241 name=__codelineno-0-241></a>
</span><span id=__span-0-242><a id=__codelineno-0-242 name=__codelineno-0-242></a><span class=sd>        If ``&quot;auto&quot;`` is provided the existing store will be opened and the region</span>
</span><span id=__span-0-243><a id=__codelineno-0-243 name=__codelineno-0-243></a><span class=sd>        inferred by matching indexes. ``&quot;auto&quot;`` can be used as a single string,</span>
</span><span id=__span-0-244><a id=__codelineno-0-244 name=__codelineno-0-244></a><span class=sd>        which will automatically infer the region for all dimensions, or as</span>
</span><span id=__span-0-245><a id=__codelineno-0-245 name=__codelineno-0-245></a><span class=sd>        dictionary values for specific dimensions mixed together with explicit</span>
</span><span id=__span-0-246><a id=__codelineno-0-246 name=__codelineno-0-246></a><span class=sd>        slices for other dimensions.</span>
</span><span id=__span-0-247><a id=__codelineno-0-247 name=__codelineno-0-247></a>
</span><span id=__span-0-248><a id=__codelineno-0-248 name=__codelineno-0-248></a><span class=sd>        Alternatively integer slices can be provided; for example, ``{&#39;x&#39;: slice(0,</span>
</span><span id=__span-0-249><a id=__codelineno-0-249 name=__codelineno-0-249></a><span class=sd>        1000), &#39;y&#39;: slice(10000, 11000)}`` would indicate that values should be</span>
</span><span id=__span-0-250><a id=__codelineno-0-250 name=__codelineno-0-250></a><span class=sd>        written to the region ``0:1000`` along ``x`` and ``10000:11000`` along</span>
</span><span id=__span-0-251><a id=__codelineno-0-251 name=__codelineno-0-251></a><span class=sd>        ``y``.</span>
</span><span id=__span-0-252><a id=__codelineno-0-252 name=__codelineno-0-252></a>
</span><span id=__span-0-253><a id=__codelineno-0-253 name=__codelineno-0-253></a><span class=sd>        Users are expected to ensure that the specified region aligns with</span>
</span><span id=__span-0-254><a id=__codelineno-0-254 name=__codelineno-0-254></a><span class=sd>        Zarr chunk boundaries, and that dask chunks are also aligned.</span>
</span><span id=__span-0-255><a id=__codelineno-0-255 name=__codelineno-0-255></a><span class=sd>        Xarray makes limited checks that these multiple chunk boundaries line up.</span>
</span><span id=__span-0-256><a id=__codelineno-0-256 name=__codelineno-0-256></a><span class=sd>        It is possible to write incomplete chunks and corrupt the data with this</span>
</span><span id=__span-0-257><a id=__codelineno-0-257 name=__codelineno-0-257></a><span class=sd>        option if you are not careful.</span>
</span><span id=__span-0-258><a id=__codelineno-0-258 name=__codelineno-0-258></a><span class=sd>    safe_chunks : bool, default: True</span>
</span><span id=__span-0-259><a id=__codelineno-0-259 name=__codelineno-0-259></a><span class=sd>        If True, only allow writes to when there is a many-to-one relationship</span>
</span><span id=__span-0-260><a id=__codelineno-0-260 name=__codelineno-0-260></a><span class=sd>        between Zarr chunks (specified in encoding) and Dask chunks.</span>
</span><span id=__span-0-261><a id=__codelineno-0-261 name=__codelineno-0-261></a><span class=sd>        Set False to override this restriction; however, data may become corrupted</span>
</span><span id=__span-0-262><a id=__codelineno-0-262 name=__codelineno-0-262></a><span class=sd>        if Zarr arrays are written in parallel.</span>
</span><span id=__span-0-263><a id=__codelineno-0-263 name=__codelineno-0-263></a><span class=sd>        In addition to the many-to-one relationship validation, it also detects partial</span>
</span><span id=__span-0-264><a id=__codelineno-0-264 name=__codelineno-0-264></a><span class=sd>        chunks writes when using the region parameter,</span>
</span><span id=__span-0-265><a id=__codelineno-0-265 name=__codelineno-0-265></a><span class=sd>        these partial chunks are considered unsafe in the mode &quot;r+&quot; but safe in</span>
</span><span id=__span-0-266><a id=__codelineno-0-266 name=__codelineno-0-266></a><span class=sd>        the mode &quot;a&quot;.</span>
</span><span id=__span-0-267><a id=__codelineno-0-267 name=__codelineno-0-267></a><span class=sd>        Note: Even with these validations it can still be unsafe to write</span>
</span><span id=__span-0-268><a id=__codelineno-0-268 name=__codelineno-0-268></a><span class=sd>        two or more chunked arrays in the same location in parallel if they are</span>
</span><span id=__span-0-269><a id=__codelineno-0-269 name=__codelineno-0-269></a><span class=sd>        not writing in independent regions.</span>
</span><span id=__span-0-270><a id=__codelineno-0-270 name=__codelineno-0-270></a><span class=sd>    chunkmanager_store_kwargs : dict, optional</span>
</span><span id=__span-0-271><a id=__codelineno-0-271 name=__codelineno-0-271></a><span class=sd>        Additional keyword arguments passed on to the `ChunkManager.store` method used to store</span>
</span><span id=__span-0-272><a id=__codelineno-0-272 name=__codelineno-0-272></a><span class=sd>        chunked arrays. For example for a dask array additional kwargs will be passed eventually to</span>
</span><span id=__span-0-273><a id=__codelineno-0-273 name=__codelineno-0-273></a><span class=sd>        `dask.array.store()`. Experimental API that should not be relied upon.</span>
</span><span id=__span-0-274><a id=__codelineno-0-274 name=__codelineno-0-274></a><span class=sd>    split_every: int, optional</span>
</span><span id=__span-0-275><a id=__codelineno-0-275 name=__codelineno-0-275></a><span class=sd>        Number of tasks to merge at every level of the tree reduction.</span>
</span><span id=__span-0-276><a id=__codelineno-0-276 name=__codelineno-0-276></a>
</span><span id=__span-0-277><a id=__codelineno-0-277 name=__codelineno-0-277></a><span class=sd>    Returns</span>
</span><span id=__span-0-278><a id=__codelineno-0-278 name=__codelineno-0-278></a><span class=sd>    -------</span>
</span><span id=__span-0-279><a id=__codelineno-0-279 name=__codelineno-0-279></a><span class=sd>    None</span>
</span><span id=__span-0-280><a id=__codelineno-0-280 name=__codelineno-0-280></a>
</span><span id=__span-0-281><a id=__codelineno-0-281 name=__codelineno-0-281></a><span class=sd>    Notes</span>
</span><span id=__span-0-282><a id=__codelineno-0-282 name=__codelineno-0-282></a><span class=sd>    -----</span>
</span><span id=__span-0-283><a id=__codelineno-0-283 name=__codelineno-0-283></a><span class=sd>    Two restrictions apply to the use of ``region``:</span>
</span><span id=__span-0-284><a id=__codelineno-0-284 name=__codelineno-0-284></a>
</span><span id=__span-0-285><a id=__codelineno-0-285 name=__codelineno-0-285></a><span class=sd>      - If ``region`` is set, _all_ variables in a dataset must have at</span>
</span><span id=__span-0-286><a id=__codelineno-0-286 name=__codelineno-0-286></a><span class=sd>        least one dimension in common with the region. Other variables</span>
</span><span id=__span-0-287><a id=__codelineno-0-287 name=__codelineno-0-287></a><span class=sd>        should be written in a separate single call to ``to_zarr()``.</span>
</span><span id=__span-0-288><a id=__codelineno-0-288 name=__codelineno-0-288></a><span class=sd>      - Dimensions cannot be included in both ``region`` and</span>
</span><span id=__span-0-289><a id=__codelineno-0-289 name=__codelineno-0-289></a><span class=sd>        ``append_dim`` at the same time. To create empty arrays to fill</span>
</span><span id=__span-0-290><a id=__codelineno-0-290 name=__codelineno-0-290></a><span class=sd>        in with ``region``, use the `XarrayDatasetWriter` directly.</span>
</span><span id=__span-0-291><a id=__codelineno-0-291 name=__codelineno-0-291></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-0-292><a id=__codelineno-0-292 name=__codelineno-0-292></a>    <span class=n>writer</span> <span class=o>=</span> <span class=n>XarrayDatasetWriter</span><span class=p>(</span><span class=n>dataset</span><span class=p>,</span> <span class=n>store</span><span class=o>=</span><span class=n>store</span><span class=p>)</span>
</span><span id=__span-0-293><a id=__codelineno-0-293 name=__codelineno-0-293></a>
</span><span id=__span-0-294><a id=__codelineno-0-294 name=__codelineno-0-294></a>    <span class=n>writer</span><span class=o>.</span><span class=n>_open_group</span><span class=p>(</span><span class=n>group</span><span class=o>=</span><span class=n>group</span><span class=p>,</span> <span class=n>mode</span><span class=o>=</span><span class=n>mode</span><span class=p>,</span> <span class=n>append_dim</span><span class=o>=</span><span class=n>append_dim</span><span class=p>,</span> <span class=n>region</span><span class=o>=</span><span class=n>region</span><span class=p>)</span>
</span><span id=__span-0-295><a id=__codelineno-0-295 name=__codelineno-0-295></a>
</span><span id=__span-0-296><a id=__codelineno-0-296 name=__codelineno-0-296></a>    <span class=c1># write metadata</span>
</span><span id=__span-0-297><a id=__codelineno-0-297 name=__codelineno-0-297></a>    <span class=n>writer</span><span class=o>.</span><span class=n>write_metadata</span><span class=p>(</span><span class=n>encoding</span><span class=p>)</span>
</span><span id=__span-0-298><a id=__codelineno-0-298 name=__codelineno-0-298></a>    <span class=c1># write in-memory arrays</span>
</span><span id=__span-0-299><a id=__codelineno-0-299 name=__codelineno-0-299></a>    <span class=n>writer</span><span class=o>.</span><span class=n>write_eager</span><span class=p>()</span>
</span><span id=__span-0-300><a id=__codelineno-0-300 name=__codelineno-0-300></a>    <span class=c1># eagerly write dask arrays</span>
</span><span id=__span-0-301><a id=__codelineno-0-301 name=__codelineno-0-301></a>    <span class=n>writer</span><span class=o>.</span><span class=n>write_lazy</span><span class=p>(</span><span class=n>chunkmanager_store_kwargs</span><span class=o>=</span><span class=n>chunkmanager_store_kwargs</span><span class=p>)</span>
</span></code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">January 14, 2025</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Contributors> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg> </span> <nav> <a href=mailto:code@amisdelabc.com>Sebastin Galkin</a> </nav> </span> </aside> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! Help us improve this page by using our <a href=https://share.hsforms.com/10yWXT95yS6mWXg3bc1e4PQdl5u6 target=_blank rel=noopener>feedback form</a>. </div> </div> </div> </fieldset> </form> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../virtual/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Virtual Datasets"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Virtual Datasets </div> </div> </a> <a href=../../icechunk-rust/ class="md-footer__link md-footer__link--next" aria-label="Next: Icechunk Rust"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Icechunk Rust </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2025 <a href=https://earthmover.io target=_blank>Earthmover PBC</a> </div> </div> <div class=md-social> <a href=https://github.com/earth-mover/icechunk target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://pypi.org/project/icechunk/ target=_blank rel=noopener title=pypi.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3"/></svg> </a> <a href=https://crates.io/crates/icechunk target=_blank rel=noopener title=crates.io class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m508.52 249.75-21.82-13.51c-.17-2-.34-3.93-.55-5.88l18.72-17.5a7.35 7.35 0 0 0-2.44-12.25l-24-9c-.54-1.88-1.08-3.78-1.67-5.64l15-20.83a7.35 7.35 0 0 0-4.79-11.54l-25.42-4.15c-.9-1.73-1.79-3.45-2.73-5.15l10.68-23.42a7.35 7.35 0 0 0-6.95-10.39l-25.82.91q-1.79-2.22-3.61-4.4L439 81.84a7.36 7.36 0 0 0-8.84-8.84L405 78.93q-2.17-1.83-4.4-3.61l.91-25.82a7.35 7.35 0 0 0-10.39-7L367.7 53.23c-1.7-.94-3.43-1.84-5.15-2.73l-4.15-25.42a7.35 7.35 0 0 0-11.54-4.79L326 35.26c-1.86-.59-3.75-1.13-5.64-1.67l-9-24a7.35 7.35 0 0 0-12.25-2.44l-17.5 18.72c-1.95-.21-3.91-.38-5.88-.55L262.25 3.48a7.35 7.35 0 0 0-12.5 0L236.24 25.3c-2 .17-3.93.34-5.88.55l-17.5-18.72a7.35 7.35 0 0 0-12.25 2.44l-9 24c-1.89.55-3.79 1.08-5.66 1.68l-20.82-15a7.35 7.35 0 0 0-11.54 4.79l-4.15 25.41c-1.73.9-3.45 1.79-5.16 2.73l-23.4-10.63a7.35 7.35 0 0 0-10.39 7l.92 25.81c-1.49 1.19-3 2.39-4.42 3.61L81.84 73A7.36 7.36 0 0 0 73 81.84L78.93 107c-1.23 1.45-2.43 2.93-3.62 4.41l-25.81-.91a7.42 7.42 0 0 0-6.37 3.26 7.35 7.35 0 0 0-.57 7.13l10.66 23.41c-.94 1.7-1.83 3.43-2.73 5.16l-25.41 4.14a7.35 7.35 0 0 0-4.79 11.54l15 20.82c-.59 1.87-1.13 3.77-1.68 5.66l-24 9a7.35 7.35 0 0 0-2.44 12.25l18.72 17.5c-.21 1.95-.38 3.91-.55 5.88l-21.86 13.5a7.35 7.35 0 0 0 0 12.5l21.82 13.51c.17 2 .34 3.92.55 5.87l-18.72 17.5a7.35 7.35 0 0 0 2.44 12.25l24 9c.55 1.89 1.08 3.78 1.68 5.65l-15 20.83a7.35 7.35 0 0 0 4.79 11.54l25.42 4.15c.9 1.72 1.79 3.45 2.73 5.14l-10.63 23.43a7.35 7.35 0 0 0 .57 7.13 7.13 7.13 0 0 0 6.37 3.26l25.83-.91q1.77 2.22 3.6 4.4L73 430.16a7.36 7.36 0 0 0 8.84 8.84l25.16-5.93q2.18 1.83 4.41 3.61l-.92 25.82a7.35 7.35 0 0 0 10.39 6.95l23.43-10.68c1.69.94 3.42 1.83 5.14 2.73l4.15 25.42a7.34 7.34 0 0 0 11.54 4.78l20.83-15c1.86.6 3.76 1.13 5.65 1.68l9 24a7.36 7.36 0 0 0 12.25 2.44l17.5-18.72c1.95.21 3.92.38 5.88.55l13.51 21.82a7.35 7.35 0 0 0 12.5 0l13.51-21.82c2-.17 3.93-.34 5.88-.56l17.5 18.73a7.36 7.36 0 0 0 12.25-2.44l9-24c1.89-.55 3.78-1.08 5.65-1.68l20.82 15a7.34 7.34 0 0 0 11.54-4.78l4.15-25.42c1.72-.9 3.45-1.79 5.15-2.73l23.42 10.68a7.35 7.35 0 0 0 10.39-6.95l-.91-25.82q2.22-1.79 4.4-3.61l25.15 5.93a7.36 7.36 0 0 0 8.84-8.84L433.07 405q1.83-2.17 3.61-4.4l25.82.91a7.23 7.23 0 0 0 6.37-3.26 7.35 7.35 0 0 0 .58-7.13l-10.68-23.42c.94-1.7 1.83-3.43 2.73-5.15l25.42-4.15a7.35 7.35 0 0 0 4.79-11.54l-15-20.83c.59-1.87 1.13-3.76 1.67-5.65l24-9a7.35 7.35 0 0 0 2.44-12.25l-18.72-17.5c.21-1.95.38-3.91.55-5.87l21.82-13.51a7.35 7.35 0 0 0 0-12.5Zm-151 129.08A13.91 13.91 0 0 0 341 389.51l-7.64 35.67a187.51 187.51 0 0 1-156.36-.74l-7.64-35.66a13.87 13.87 0 0 0-16.46-10.68l-31.51 6.76a187 187 0 0 1-16.26-19.21H258.3c1.72 0 2.89-.29 2.89-1.91v-54.19c0-1.57-1.17-1.91-2.89-1.91h-44.83l.05-34.35H262c4.41 0 23.66 1.28 29.79 25.87 1.91 7.55 6.17 32.14 9.06 40 2.89 8.82 14.6 26.46 27.1 26.46H407a187 187 0 0 1-17.34 20.09Zm25.77 34.49A15.24 15.24 0 1 1 368 398.08h.44a15.23 15.23 0 0 1 14.8 15.24Zm-225.62-.68a15.24 15.24 0 1 1-15.25-15.25h.45a15.25 15.25 0 0 1 14.75 15.25Zm-88.1-178.49 32.83-14.6a13.88 13.88 0 0 0 7.06-18.33L102.69 186h26.56v119.73h-53.6a187.7 187.7 0 0 1-6.08-71.58m-11.26-36.06a15.24 15.24 0 0 1 15.23-15.25H74a15.24 15.24 0 1 1-15.67 15.24Zm155.16 24.49.05-35.32h63.26c3.28 0 23.07 3.77 23.07 18.62 0 12.29-15.19 16.7-27.68 16.7ZM399 306.71c-9.8 1.13-20.63-4.12-22-10.09-5.78-32.49-15.39-39.4-30.57-51.4 18.86-11.95 38.46-29.64 38.46-53.26 0-25.52-17.49-41.59-29.4-49.48-16.76-11-35.28-13.23-40.27-13.23h-198.9a187.5 187.5 0 0 1 104.89-59.19l23.47 24.6a13.82 13.82 0 0 0 19.6.44l26.26-25a187.51 187.51 0 0 1 128.37 91.43l-18 40.57a14 14 0 0 0 7.09 18.33l34.59 15.33a187 187 0 0 1 .4 32.54h-19.28c-1.91 0-2.69 1.27-2.69 3.13v8.82C421 301 409.31 305.58 399 306.71M240 60.21A15.24 15.24 0 0 1 255.21 45h.45A15.24 15.24 0 1 1 240 60.21M436.84 214a15.24 15.24 0 1 1 0-30.48h.44a15.24 15.24 0 0 1-.44 30.48"/></svg> </a> <a href=https://join.slack.com/t/earthmover-community/shared_invite/zt-2cwje92ir-xU3CfdG8BI~4CJOJy~sceQ target=_blank rel=noopener title=join.slack.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M94.12 315.1c0 25.9-21.16 47.06-47.06 47.06S0 341 0 315.1s21.16-47.06 47.06-47.06h47.06zm23.72 0c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06v117.84c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06zm47.06-188.98c-25.9 0-47.06-21.16-47.06-47.06S139 32 164.9 32s47.06 21.16 47.06 47.06v47.06zm0 23.72c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06H47.06C21.16 243.96 0 222.8 0 196.9s21.16-47.06 47.06-47.06zm188.98 47.06c0-25.9 21.16-47.06 47.06-47.06S448 171 448 196.9s-21.16 47.06-47.06 47.06h-47.06zm-23.72 0c0 25.9-21.16 47.06-47.06 47.06s-47.06-21.16-47.06-47.06V79.06c0-25.9 21.16-47.06 47.06-47.06s47.06 21.16 47.06 47.06zM283.1 385.88c25.9 0 47.06 21.16 47.06 47.06S309 480 283.1 480s-47.06-21.16-47.06-47.06v-47.06zm0-23.72c-25.9 0-47.06-21.16-47.06-47.06s21.16-47.06 47.06-47.06h117.84c25.9 0 47.06 21.16 47.06 47.06s-21.16 47.06-47.06 47.06z"/></svg> </a> <a href=https://x.com/earthmoverhq target=_blank rel=noopener title=x.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input class=md-toggle type=checkbox id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=analytics checked> <span class=task-list-indicator></span> Google Analytics </label> </li> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">Accept</button> <label class=md-button for=__settings>Manage settings</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tracking", "navigation.indexes", "navigation.footer", "navigation.tabs", "navigation.tabs.sticky", "toc.follow", "navigation.top", "announce.dismiss", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../assets/javascripts/bundle.525ec568.min.js></script> <script src=/js/open_in_new_tab.js></script> </body> </html>